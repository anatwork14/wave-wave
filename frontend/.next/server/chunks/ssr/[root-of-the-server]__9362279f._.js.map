{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/RequireLogin/index.tsx"],"sourcesContent":["import Image from \"next/image\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function RequireLogin() {\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-full bg-white p-8\">\r\n      <div></div>\r\n      <Image\r\n        src=\"/study_desk.svg\"\r\n        alt=\"Login required illustration\"\r\n        height={360}\r\n        width={360}\r\n        className=\"mb-10 2xl:hidden\"\r\n      />\r\n      <Image\r\n        src=\"/study_desk.svg\"\r\n        alt=\"Login required illustration\"\r\n        height={540}\r\n        width={540}\r\n        className=\"mb-10 hidden 2xl:flex\"\r\n      />\r\n      <h1 className=\"text-2xl xl:text-4xl font-bold text-gray-800 mb-2\">\r\n        B·∫°n ch∆∞a ƒëƒÉng nh·∫≠p\r\n      </h1>\r\n      <p className=\"text-gray-600 mb-6 xl:text-xl\">\r\n        H√£y ƒëƒÉng nh·∫≠p ƒë·ªÉ s·ª≠ d·ª•ng t·∫•t c·∫£ c√°c t√≠nh nƒÉng.\r\n      </p>\r\n      <Link\r\n        href=\"/login\"\r\n        className=\"px-6 py-3 bg-[#F66868] text-white rounded-xl shadow-md hover:bg-[#F66868]/70 transition-all duration-300\"\r\n      >\r\n        ƒêƒÉng nh·∫≠p ngay\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,SAAS;IACtB,qBACE,8QAAC;QAAI,WAAU;;0BACb,8QAAC;;;;;0BACD,8QAAC,wKAAK;gBACJ,KAAI;gBACJ,KAAI;gBACJ,QAAQ;gBACR,OAAO;gBACP,WAAU;;;;;;0BAEZ,8QAAC,wKAAK;gBACJ,KAAI;gBACJ,KAAI;gBACJ,QAAQ;gBACR,OAAO;gBACP,WAAU;;;;;;0BAEZ,8QAAC;gBAAG,WAAU;0BAAoD;;;;;;0BAGlE,8QAAC;gBAAE,WAAU;0BAAgC;;;;;;0BAG7C,8QAAC,uMAAI;gBACH,MAAK;gBACL,WAAU;0BACX;;;;;;;;;;;;AAKP","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\nexport function formatActor(name: string) {\r\n  if (name == \"teacher_agent\") return \"Mini Wave Teacher\";\r\n  else \"Agent\";\r\n}\r\n\r\nexport function removeBrackets(text: string): string {\r\n  // Remove anything inside parentheses (and the parentheses)\r\n  return text.replace(/\\s*\\(.*?\\)/g, \"\").trim();\r\n}\r\n/**\r\n * Formats an ISO time string into a \"time ago\" format.\r\n * @param timeString The ISO 8601 timestamp (e.g., \"2025-10-25T12:30:44.488876\")\r\n */\r\nexport function formatTime(timeString: string): string {\r\n  const time = new Date(timeString);\r\n  const now = new Date();\r\n\r\n  // Get the difference in seconds\r\n  const seconds = Math.floor((now.getTime() - time.getTime()) / 1000);\r\n\r\n  // Less than 5 seconds\r\n  if (seconds < 5) {\r\n    return \"just now\";\r\n  }\r\n\r\n  // Less than 1 minute\r\n  if (seconds < 60) {\r\n    return `${seconds} seconds ago`;\r\n  }\r\n\r\n  // Less than 1 hour\r\n  const minutes = Math.floor(seconds / 60);\r\n  if (minutes < 60) {\r\n    return `${minutes} minute${minutes > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  // Less than 1 day\r\n  const hours = Math.floor(minutes / 60);\r\n  if (hours < 24) {\r\n    return `${hours} hour${hours > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  // Less than 1 month\r\n  const days = Math.floor(hours / 24);\r\n  if (days < 30) {\r\n    return `${days} day${days > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  // Less than 1 year\r\n  const months = Math.floor(days / 30);\r\n  if (months < 12) {\r\n    return `${months} month${months > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  // Years\r\n  const years = Math.floor(months / 12);\r\n  return `${years} year${years > 1 ? \"s\" : \"\"} ago`;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sMAAO,EAAC,IAAA,6KAAI,EAAC;AACtB;AAEO,SAAS,YAAY,IAAY;IACtC,IAAI,QAAQ,iBAAiB,OAAO;SAC/B;AACP;AAEO,SAAS,eAAe,IAAY;IACzC,2DAA2D;IAC3D,OAAO,KAAK,OAAO,CAAC,eAAe,IAAI,IAAI;AAC7C;AAKO,SAAS,WAAW,UAAkB;IAC3C,MAAM,OAAO,IAAI,KAAK;IACtB,MAAM,MAAM,IAAI;IAEhB,gCAAgC;IAChC,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,IAAI,OAAO,KAAK,KAAK,OAAO,EAAE,IAAI;IAE9D,sBAAsB;IACtB,IAAI,UAAU,GAAG;QACf,OAAO;IACT;IAEA,qBAAqB;IACrB,IAAI,UAAU,IAAI;QAChB,OAAO,GAAG,QAAQ,YAAY,CAAC;IACjC;IAEA,mBAAmB;IACnB,MAAM,UAAU,KAAK,KAAK,CAAC,UAAU;IACrC,IAAI,UAAU,IAAI;QAChB,OAAO,GAAG,QAAQ,OAAO,EAAE,UAAU,IAAI,MAAM,GAAG,IAAI,CAAC;IACzD;IAEA,kBAAkB;IAClB,MAAM,QAAQ,KAAK,KAAK,CAAC,UAAU;IACnC,IAAI,QAAQ,IAAI;QACd,OAAO,GAAG,MAAM,KAAK,EAAE,QAAQ,IAAI,MAAM,GAAG,IAAI,CAAC;IACnD;IAEA,oBAAoB;IACpB,MAAM,OAAO,KAAK,KAAK,CAAC,QAAQ;IAChC,IAAI,OAAO,IAAI;QACb,OAAO,GAAG,KAAK,IAAI,EAAE,OAAO,IAAI,MAAM,GAAG,IAAI,CAAC;IAChD;IAEA,mBAAmB;IACnB,MAAM,SAAS,KAAK,KAAK,CAAC,OAAO;IACjC,IAAI,SAAS,IAAI;QACf,OAAO,GAAG,OAAO,MAAM,EAAE,SAAS,IAAI,MAAM,GAAG,IAAI,CAAC;IACtD;IAEA,QAAQ;IACR,MAAM,QAAQ,KAAK,KAAK,CAAC,SAAS;IAClC,OAAO,GAAG,MAAM,KAAK,EAAE,QAAQ,IAAI,MAAM,GAAG,IAAI,CAAC;AACnD","debugId":null}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Tabs({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\r\n  return (\r\n    <TabsPrimitive.Root\r\n      data-slot=\"tabs\"\r\n      className={cn(\"flex flex-col gap-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsList({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\r\n  return (\r\n    <TabsPrimitive.List\r\n      data-slot=\"tabs-list\"\r\n      className={cn(\r\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsTrigger({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\r\n  return (\r\n    <TabsPrimitive.Trigger\r\n      data-slot=\"tabs-trigger\"\r\n      className={cn(\r\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\r\n  return (\r\n    <TabsPrimitive.Content\r\n      data-slot=\"tabs-content\"\r\n      className={cn(\"flex-1 outline-none\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8QAAC,wKAAkB;QACjB,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8QAAC,wKAAkB;QACjB,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8QAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8QAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Select({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\r\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\r\n}\r\n\r\nfunction SelectGroup({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\r\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\r\n}\r\n\r\nfunction SelectValue({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\r\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\r\n}\r\n\r\nfunction SelectTrigger({\r\n  className,\r\n  size = \"default\",\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\r\n  size?: \"sm\" | \"default\"\r\n}) {\r\n  return (\r\n    <SelectPrimitive.Trigger\r\n      data-slot=\"select-trigger\"\r\n      data-size={size}\r\n      className={cn(\r\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <SelectPrimitive.Icon asChild>\r\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\r\n      </SelectPrimitive.Icon>\r\n    </SelectPrimitive.Trigger>\r\n  )\r\n}\r\n\r\nfunction SelectContent({\r\n  className,\r\n  children,\r\n  position = \"popper\",\r\n  align = \"center\",\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        data-slot=\"select-content\"\r\n        className={cn(\r\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md\",\r\n          position === \"popper\" &&\r\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n          className\r\n        )}\r\n        position={position}\r\n        align={align}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            \"p-1\",\r\n            position === \"popper\" &&\r\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  )\r\n}\r\n\r\nfunction SelectLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\r\n  return (\r\n    <SelectPrimitive.Label\r\n      data-slot=\"select-label\"\r\n      className={cn(\"text-muted-foreground px-2 py-1.5 text-xs\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectItem({\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\r\n  return (\r\n    <SelectPrimitive.Item\r\n      data-slot=\"select-item\"\r\n      className={cn(\r\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\r\n        <SelectPrimitive.ItemIndicator>\r\n          <CheckIcon className=\"size-4\" />\r\n        </SelectPrimitive.ItemIndicator>\r\n      </span>\r\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n    </SelectPrimitive.Item>\r\n  )\r\n}\r\n\r\nfunction SelectSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\r\n  return (\r\n    <SelectPrimitive.Separator\r\n      data-slot=\"select-separator\"\r\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectScrollUpButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollUpButton\r\n      data-slot=\"select-scroll-up-button\"\r\n      className={cn(\r\n        \"flex cursor-default items-center justify-center py-1\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronUpIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollUpButton>\r\n  )\r\n}\r\n\r\nfunction SelectScrollDownButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollDownButton\r\n      data-slot=\"select-scroll-down-button\"\r\n      className={cn(\r\n        \"flex cursor-default items-center justify-center py-1\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronDownIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollDownButton>\r\n  )\r\n}\r\n\r\nexport {\r\n  Select,\r\n  SelectContent,\r\n  SelectGroup,\r\n  SelectItem,\r\n  SelectLabel,\r\n  SelectScrollDownButton,\r\n  SelectScrollUpButton,\r\n  SelectSeparator,\r\n  SelectTrigger,\r\n  SelectValue,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8QAAC,0KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8QAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8QAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,8QAAC,6KAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,yJAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,8QAAC,0KAAoB;gBAAC,OAAO;0BAC3B,cAAA,8QAAC,2QAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,QAAQ,QAAQ,EAChB,GAAG,OACkD;IACrD,qBACE,8QAAC,4KAAsB;kBACrB,cAAA,8QAAC,6KAAuB;YACtB,aAAU;YACV,WAAW,IAAA,yJAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACV,OAAO;YACN,GAAG,KAAK;;8BAET,8QAAC;;;;;8BACD,8QAAC,8KAAwB;oBACvB,WAAW,IAAA,yJAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,8QAAC;;;;;;;;;;;;;;;;AAIT;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8QAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,8QAAC,0KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,8QAAC;gBAAK,WAAU;0BACd,cAAA,8QAAC,mLAA6B;8BAC5B,cAAA,8QAAC,qPAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,8QAAC,8KAAwB;0BAAE;;;;;;;;;;;;AAGjC;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,8QAAC,+KAAyB;QACxB,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,8QAAC,oLAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8QAAC,qQAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,8QAAC,sLAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8QAAC,2QAAe;YAAC,WAAU;;;;;;;;;;;AAGjC","debugId":null}},
    {"offset": {"line": 447, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-0 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 549, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-[#C73B3B] text-primary-foreground hover:bg-[#C33D3D]/80 transition-all duration-500 cursor-pointer\",\r\n        destructive:\r\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n        \"icon-sm\": \"size-8\",\r\n        \"icon-lg\": \"size-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean;\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\";\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uMAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wMAAI,GAAG;IAE9B,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 608, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uMAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,wMAAI,GAAG;IAE9B,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 654, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\r\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8QAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 679, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/practice-tab.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useMemo, useEffect } from \"react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  Zap,\r\n  Search,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Target,\r\n  TrendingUp,\r\n  Filter,\r\n  X,\r\n  Loader2, // Added for loading state\r\n} from \"lucide-react\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\n\r\n// 1. Define the type for the API response data\r\n\r\ntype PracticeItemStatus = \"in_progress\" | \"completed\";\r\ninterface PracticeItem {\r\n  quiz_id: number;\r\n  title: string;\r\n  description: string | null;\r\n  lesson_id: number;\r\n  total_points: number; // You must fetch this from your API\r\n  user_quiz_id: number;\r\n  score: number;\r\n  status: PracticeItemStatus;\r\n  started_at: string;\r\n  submitted_at: string | null;\r\n  // --- Fields to add for the component ---\r\n}\r\n\r\nconst ITEMS_PER_PAGE = 4;\r\n\r\nexport default function PracticeTab() {\r\n  // --- State for API data ---\r\n  const [practiceItems, setPracticeItems] = useState<PracticeItem[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const { user } = useUserStore();\r\n  // --- State for filters and pagination ---\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [selectStatus, setSelectStatus] = useState<PracticeItemStatus | null>(\r\n    null\r\n  );\r\n\r\n  // 3. useEffect to fetch data on component mount\r\n  useEffect(() => {\r\n    const fetchPracticeItems = async () => {\r\n      try {\r\n        // TODO: Replace '1' with the actual logged-in user's ID\r\n        const response = await fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/quizzes?user_id=${user?.id}`\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const data: { quizzes: Omit<PracticeItem, \"difficulty\">[] } =\r\n          await response.json();\r\n\r\n        // Transform API data to fit component needs (add difficulty)\r\n        const transformedData = data.quizzes.map((item) => ({\r\n          ...item,\r\n          score: Number(item.score), // Ensure score is a number\r\n        }));\r\n\r\n        setPracticeItems(transformedData);\r\n      } catch (err: any) {\r\n        setError(err.message || \"Failed to fetch practice items.\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchPracticeItems();\r\n  }, []); // Empty dependency array runs once on mount\r\n\r\n  // 4. Filter items based on fetched data\r\n  const filteredItems = useMemo(() => {\r\n    return practiceItems.filter((item) => {\r\n      const matchesSearch =\r\n        item.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        (item.description &&\r\n          item.description.toLowerCase().includes(searchQuery.toLowerCase()));\r\n\r\n      const matchesStatus = !selectStatus || item.status === selectStatus;\r\n\r\n      return matchesSearch && matchesStatus;\r\n    });\r\n  }, [practiceItems, searchQuery, selectStatus]);\r\n\r\n  // Pagination (no changes needed)\r\n  const totalPages = Math.ceil(filteredItems.length / ITEMS_PER_PAGE);\r\n  const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;\r\n  const paginatedItems = filteredItems.slice(\r\n    startIndex,\r\n    startIndex + ITEMS_PER_PAGE\r\n  );\r\n\r\n  // Filter handlers (no changes needed)\r\n  const handleSearchChange = (value: string) => {\r\n    setSearchQuery(value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleStatusFilter = (status: PracticeItemStatus) => {\r\n    setSelectStatus(selectStatus === status ? null : status);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  // 5. Calculate stats based on fetched data\r\n  const totalCompleted = practiceItems.filter(\r\n    (item) => item.status === \"completed\"\r\n  ).length;\r\n  const totalExercises = practiceItems.length;\r\n\r\n  // (The original 'totalPoints' calc wasn't used, so we'll skip it)\r\n\r\n  // 6. Handle Loading and Error states\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-32\">\r\n        <Loader2 className=\"h-12 w-12 animate-spin text-[#F66868]\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-16 px-4\">\r\n        <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n          <X className=\"h-16 w-16 text-red-500 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n            ƒê√£ x·∫£y ra l·ªói\r\n          </h3>\r\n          <p className=\"text-gray-600\">{error}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Header with Stats (Updated stats) */}\r\n      <div className=\"relative overflow-hidden rounded-3xl bg-gradient-to-br from-[#f66868] via-[#ff7b7b] to-[#ff8f8f] p-8 text-white shadow-xl hover:scale-105 transition-all duration-500 cursor-pointer\">\r\n        <div className=\"relative z-10\">\r\n          <div className=\"flex flex-col md:flex-row md:items-end md:justify-between gap-6\">\r\n            <div>\r\n              <h2 className=\"text-4xl font-bold mb-3 tracking-tight\">\r\n                Luy·ªán T·∫≠p\r\n              </h2>\r\n              <p className=\"text-white/90 text-lg font-medium\">\r\n                C·∫£i thi·ªán k·ªπ nƒÉng v·ªõi c√°c b√†i t·∫≠p t∆∞∆°ng t√°c th√∫ v·ªã\r\n              </p>\r\n            </div>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"bg-white/20 backdrop-blur-sm rounded-2xl px-4 py-3 text-center border border-white/30\">\r\n                <Target className=\"h-5 w-5 mx-auto mb-1\" />\r\n                <div className=\"text-2xl font-bold\">{totalCompleted}</div>\r\n                <div className=\"text-xs text-white/90\">Ho√†n th√†nh</div>\r\n              </div>\r\n              <div className=\"bg-white/20 backdrop-blur-sm rounded-2xl px-4 py-3 text-center border border-white/30\">\r\n                <TrendingUp className=\"h-5 w-5 mx-auto mb-1\" />\r\n                <div className=\"text-2xl font-bold\">{totalExercises}</div>\r\n                <div className=\"text-xs text-white/90\">B√†i t·∫≠p</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Decorative Elements */}\r\n        <div className=\"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-32 -mt-32\"></div>\r\n        <div className=\"absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full blur-3xl -ml-24 -mb-24\"></div>\r\n      </div>\r\n\r\n      {/* Search and Filters (No changes needed, but 'category' search removed) */}\r\n      <div className=\"space-y-4\">\r\n        {/* Search Bar */}\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n          <Input\r\n            type=\"text\"\r\n            placeholder=\"T√¨m ki·∫øm b√†i t·∫≠p theo t√™n ho·∫∑c m√¥ t·∫£...\"\r\n            value={searchQuery}\r\n            onChange={(e) => handleSearchChange(e.target.value)}\r\n            className=\"pl-12 pr-12 h-14 rounded-2xl border-2 border-rose-100 focus:border-[#F66868] text-base shadow-sm\"\r\n          />\r\n          {searchQuery && (\r\n            <button\r\n              onClick={() => handleSearchChange(\"\")}\r\n              className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors\"\r\n            >\r\n              <X className=\"h-5 w-5\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Difficulty Filters */}\r\n        <div className=\"flex items-center gap-3 flex-wrap\">\r\n          <div className=\"flex items-center gap-2 text-sm font-semibold text-gray-700\">\r\n            <Filter className=\"h-4 w-4\" />\r\n            Tr·∫°ng th√°i: {/* Changed from \"T√¨nh tr·∫°ng\" to \"M·ª©c ƒë·ªô\" */}\r\n          </div>\r\n          {([\"D·ªÖ\", \"Trung B√¨nh\", \"Kh√≥\"] as Difficulty[]).map((difficulty) => (\r\n            <Button\r\n              key={difficulty}\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => handleStatusFilter(difficulty)}\r\n              className={`rounded-xl transition-all duration-300 ${\r\n                selectedDifficulty === difficulty\r\n                  ? difficulty === \"D·ªÖ\"\r\n                    ? \"bg-[#F66868] text-white border-[#F66868] hover:bg-[#F66868]/90\"\r\n                    : difficulty === \"Trung B√¨nh\"\r\n                    ? \"bg-orange-500 text-white border-orange-500 hover:bg-orange-600\"\r\n                    : \"bg-rose-600 text-white border-rose-600 hover:bg-rose-700\"\r\n                  : \"border-rose-200 text-gray-600 hover:border-[#F66868]/50 hover:bg-rose-50\"\r\n              }`}\r\n            >\r\n              {difficulty}\r\n            </Button>\r\n          ))}\r\n          {selectStatus && (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => setSelectStatus(null)}\r\n              className=\"text-gray-500 hover:text-gray-700\"\r\n            >\r\n              X√≥a b·ªô l·ªçc\r\n            </Button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Results count */}\r\n        <div className=\"text-sm text-gray-600\">\r\n          T√¨m th·∫•y{\" \"}\r\n          <span className=\"font-bold text-[#F66868]\">\r\n            {filteredItems.length}\r\n          </span>{\" \"}\r\n          b√†i t·∫≠p\r\n        </div>\r\n      </div>\r\n\r\n      {/* 7. Cards Grid (Updated with API data) */}\r\n      {paginatedItems.length > 0 ? (\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          {paginatedItems.map((item) => {\r\n            const isComplete = item.status === \"completed\";\r\n\r\n            // Calculate progress based on score and total_points\r\n            const progress =\r\n              item.total_points > 0\r\n                ? (item.score / item.total_points) * 100\r\n                : isComplete\r\n                ? 100\r\n                : 0;\r\n\r\n            const clampedProgress = Math.min(100, Math.max(0, progress));\r\n\r\n            return (\r\n              <Card\r\n                key={item.user_quiz_id} // Use unique ID from API\r\n                className={`group overflow-hidden border-2 rounded-3xl bg-gradient-to-br transition-all duration-500 hover:scale-[1.02] cursor-pointer ${\r\n                  isComplete\r\n                    ? \"from-emerald-50 to-green-50/50 border-emerald-200 hover:border-emerald-400 hover:shadow-[0_8px_30px_rgb(16,185,129,0.15)]\"\r\n                    : \"from-white to-rose-50/40 border-rose-100 hover:border-[#F66868] hover:shadow-[0_8px_30px_rgba(246,104,104,0.15)]\"\r\n                }`}\r\n              >\r\n                <CardHeader className=\"pb-4\">\r\n                  <div className=\"flex items-start justify-between gap-3\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-2 mb-2\">\r\n                        {/* Difficulty Badge (inferred) */}\r\n                        <Badge\r\n                          className={`px-3 py-1 rounded-full text-xs font-bold shadow-sm ${\r\n                            item.difficulty === \"D·ªÖ\"\r\n                              ? \"bg-[#F66868]/10 text-[#F66868] border border-[#F66868]/20\"\r\n                              : item.difficulty === \"Trung B√¨nh\"\r\n                              ? \"bg-orange-100 text-orange-600 border border-orange-200\"\r\n                              : \"bg-rose-200 text-rose-800 border border-rose-300\"\r\n                          }`}\r\n                        >\r\n                          {item.difficulty}\r\n                        </Badge>\r\n                        {/* Removed Category Badge (API doesn't have it) */}\r\n                      </div>\r\n                      <CardTitle\r\n                        className={`text-xl font-bold mb-2 transition-colors ${\r\n                          isComplete\r\n                            ? \"text-emerald-600\"\r\n                            : \"text-gray-900 group-hover:text-[#F66868]\"\r\n                        }`}\r\n                      >\r\n                        {item.title}\r\n                      </CardTitle>\r\n                      <CardDescription className=\"text-sm text-gray-600 leading-relaxed\">\r\n                        {item.description || \"Kh√¥ng c√≥ m√¥ t·∫£.\"}\r\n                      </CardDescription>\r\n                    </div>\r\n\r\n                    {/* Points Badge (using total_points) */}\r\n                    <div\r\n                      className={`flex items-center gap-1.5 px-3 py-2 rounded-xl font-bold shadow-sm ${\r\n                        isComplete\r\n                          ? \"bg-emerald-100 text-emerald-700\"\r\n                          : \"bg-rose-100 text-[#F66868]\"\r\n                      }`}\r\n                    >\r\n                      <Zap\r\n                        className={`h-4 w-4 ${\r\n                          isComplete ? \"fill-emerald-400\" : \"fill-[#F66868]/40\"\r\n                        }`}\r\n                      />\r\n                      {/* Using total_points from API */}\r\n                      {item.total_points}\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"space-y-4\">\r\n                  {/* Progress (using score and total_points) */}\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex items-center justify-between text-sm\">\r\n                      <span className=\"text-gray-600 font-medium\">Ti·∫øn ƒë·ªô</span>\r\n                      <span\r\n                        className={`font-bold ${\r\n                          isComplete ? \"text-emerald-600\" : \"text-[#F66868]\"\r\n                        }`}\r\n                      >\r\n                        {/* Show score / total */}\r\n                        {item.score.toFixed(0)} / {item.total_points}\r\n                      </span>\r\n                    </div>\r\n                    <div\r\n                      className={`h-3 rounded-full overflow-hidden shadow-inner ${\r\n                        isComplete ? \"bg-emerald-100\" : \"bg-rose-100\"\r\n                      }`}\r\n                    >\r\n                      <div\r\n                        className={`h-full transition-all duration-700 rounded-full relative ${\r\n                          isComplete\r\n                            ? \"bg-gradient-to-r from-emerald-500 to-green-500\"\r\n                            : \"bg-gradient-to-r from-[#F66868] to-[#ff7b7b]\"\r\n                        }`}\r\n                        style={{ width: `${clampedProgress}%` }}\r\n                      >\r\n                        {clampedProgress > 0 && clampedProgress < 100 && (\r\n                          <div className=\"absolute inset-0 bg-white/30 animate-pulse\"></div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Button (logic based on status) */}\r\n                  <Button\r\n                    className={`w-full h-12 rounded-xl font-bold transition-all duration-300 shadow-md hover:shadow-lg ${\r\n                      isComplete\r\n                        ? \"bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white\"\r\n                        : item.score > 0 // Use score to check if started\r\n                        ? \"bg-gradient-to-r from-[#F66868] to-[#ff7b7b] hover:from-[#f55555] hover:to-[#F66868] text-white\"\r\n                        : \"bg-gradient-to-r from-rose-100 to-pink-100 text-rose-700 hover:from-rose-200 hover:to-pink-200\"\r\n                    }`}\r\n                  >\r\n                    {isComplete\r\n                      ? \"üéâ √în Luy·ªán L·∫°i\"\r\n                      : item.score > 0\r\n                      ? \"Ti·∫øp T·ª•c Luy·ªán T·∫≠p ‚Üí\"\r\n                      : \"B·∫Øt ƒê·∫ßu Luy·ªán T·∫≠p\"}\r\n                  </Button>\r\n                </CardContent>\r\n\r\n                {/* Decorative corner */}\r\n                <div\r\n                  className={`absolute -top-8 -right-8 w-24 h-24 rounded-full opacity-10 group-hover:opacity-20 transition-opacity ${\r\n                    isComplete ? \"bg-emerald-400\" : \"bg-[#F66868]\"\r\n                  }`}\r\n                ></div>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        // No Results Found (no changes)\r\n        <div className=\"flex flex-col items-center justify-center py-16 px-4\">\r\n          <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n            <Search className=\"h-16 w-16 text-[#f66868]/60 mx-auto mb-4\" />\r\n            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n              Kh√¥ng t√¨m th·∫•y b√†i t·∫≠p\r\n            </h3>\r\n            <p className=\"text-gray-600\">\r\n              Th·ª≠ ƒëi·ªÅu ch·ªânh t·ª´ kh√≥a t√¨m ki·∫øm ho·∫∑c b·ªô l·ªçc c·ªßa b·∫°n\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Pagination (no changes) */}\r\n      {filteredItems.length > ITEMS_PER_PAGE && (\r\n        <div className=\"flex items-center justify-center gap-2 pt-4\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() => setCurrentPage((prev) => Math.max(1, prev - 1))}\r\n            disabled={currentPage === 1}\r\n            className=\"rounded-xl border-2 border-rose-200 hover:border-[#F66868] hover:bg-rose-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <ChevronLeft className=\"h-4 w-4 mr-1\" />\r\n            Tr∆∞·ªõc\r\n          </Button>\r\n\r\n          <div className=\"flex items-center gap-1\">\r\n            {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n              <Button\r\n                key={page}\r\n                variant={currentPage === page ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                onClick={() => setCurrentPage(page)}\r\n                className={`w-10 h-10 rounded-xl transition-all duration-300 ${\r\n                  currentPage === page\r\n                    ? \"bg-[#F66868] text-white hover:bg-[#F66868]/90 shadow-md\"\r\n                    : \"border-2 border-rose-200 text-gray-700 hover:border-[#F66868] hover:bg-rose-50\"\r\n                }`}\r\n              >\r\n                {page}\r\n              </Button>\r\n            ))}\r\n          </div>\r\n\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={() =>\r\n              setCurrentPage((prev) => Math.min(totalPages, prev + 1))\r\n            }\r\n            disabled={currentPage === totalPages}\r\n            className=\"rounded-xl border-2 border-rose-200 hover:border-[#F66868] hover:bg-rose-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            Sau\r\n            <ChevronRight className=\"h-4 w-4 ml-1\" />\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1396, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        \"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",\n        className\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-[#F66868] h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  );\n}\n\nexport { Progress };\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD;IACpD,qBACE,8QAAC,4MAAsB;QACrB,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,8QAAC,iNAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE","debugId":null}},
    {"offset": {"line": 1434, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/tooltip.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction TooltipProvider({\r\n  delayDuration = 0,\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {\r\n  return (\r\n    <TooltipPrimitive.Provider\r\n      data-slot=\"tooltip-provider\"\r\n      delayDuration={delayDuration}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction Tooltip({\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Root>) {\r\n  return (\r\n    <TooltipProvider>\r\n      <TooltipPrimitive.Root data-slot=\"tooltip\" {...props} />\r\n    </TooltipProvider>\r\n  )\r\n}\r\n\r\nfunction TooltipTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {\r\n  return <TooltipPrimitive.Trigger data-slot=\"tooltip-trigger\" {...props} />\r\n}\r\n\r\nfunction TooltipContent({\r\n  className,\r\n  sideOffset = 0,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Content>) {\r\n  return (\r\n    <TooltipPrimitive.Portal>\r\n      <TooltipPrimitive.Content\r\n        data-slot=\"tooltip-content\"\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n        <TooltipPrimitive.Arrow className=\"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\" />\r\n      </TooltipPrimitive.Content>\r\n    </TooltipPrimitive.Portal>\r\n  )\r\n}\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,gBAAgB,EACvB,gBAAgB,CAAC,EACjB,GAAG,OACoD;IACvD,qBACE,8QAAC,+MAAyB;QACxB,aAAU;QACV,eAAe;QACd,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,QAAQ,EACf,GAAG,OACgD;IACnD,qBACE,8QAAC;kBACC,cAAA,8QAAC,2MAAqB;YAAC,aAAU;YAAW,GAAG,KAAK;;;;;;;;;;;AAG1D;AAEA,SAAS,eAAe,EACtB,GAAG,OACmD;IACtD,qBAAO,8QAAC,8MAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,aAAa,CAAC,EACd,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,8QAAC,6MAAuB;kBACtB,cAAA,8QAAC,8MAAwB;YACvB,aAAU;YACV,YAAY;YACZ,WAAW,IAAA,yJAAE,EACX,qaACA;YAED,GAAG,KAAK;;gBAER;8BACD,8QAAC,4MAAsB;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI1C","debugId":null}},
    {"offset": {"line": 1578, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/MarkdownRender/index.tsx"],"sourcesContent":["// components/MarkdownRenderer.tsx\r\nimport React from \"react\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport remarkGfm from \"remark-gfm\";\r\n\r\ninterface MarkdownRendererProps {\r\n  content: string;\r\n  className?: string;\r\n}\r\n\r\nexport default function MarkdownRenderer({\r\n  content,\r\n  className,\r\n}: MarkdownRendererProps) {\r\n  return (\r\n    <div className={`prose prose-rose max-w-none leading-relaxed ${className}`}>\r\n      <ReactMarkdown remarkPlugins={[remarkGfm]}>{content}</ReactMarkdown>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;AAElC;AACA;;;;AAOe,SAAS,iBAAiB,EACvC,OAAO,EACP,SAAS,EACa;IACtB,qBACE,8QAAC;QAAI,WAAW,CAAC,4CAA4C,EAAE,WAAW;kBACxE,cAAA,8QAAC,mOAAa;YAAC,eAAe;gBAAC,wLAAS;aAAC;sBAAG;;;;;;;;;;;AAGlD","debugId":null}},
    {"offset": {"line": 1612, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/VocabularyInfo/index.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Bookmark,\r\n  Check,\r\n  Share,\r\n  Video,\r\n  Image as ImageIcon,\r\n  Sparkles,\r\n  Camera,\r\n  Loader2,\r\n} from \"lucide-react\";\r\n// --- TH√äM useCallback ---\r\nimport { useEffect, useState, useRef, useCallback } from \"react\";\r\n// ---\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\nimport MarkdownRenderer from \"../MarkdownRender\";\r\n\r\n// --- C·∫•u h√¨nh WebSocket ---\r\nconst WEBSOCKET_URL = \"ws://localhost:8001/ws/predict-stream/\";\r\n\r\n// --- THAY ƒê·ªîI 1: C·∫¨P NH·∫¨T L√äN 20 FPS ---\r\n// 1000ms / 20 FPS = 50ms\r\nconst FRAME_INTERVAL_MS = 50;\r\n// ---\r\n\r\ninterface VocabularyInfoProps {\r\n  word: string;\r\n  partOfSpeech?: string;\r\n  definition?: string;\r\n  videoUrl?: string;\r\n  imageUrl?: string;\r\n}\r\n\r\ninterface SignPrediction {\r\n  label_text: string;\r\n  confidence: number;\r\n}\r\n\r\nexport default function VocabularyInfo({\r\n  word,\r\n  partOfSpeech,\r\n  definition,\r\n  videoUrl,\r\n  imageUrl,\r\n}: VocabularyInfoProps) {\r\n  const [bookmarked, setBookmarked] = useState(false);\r\n  const [isShare, setIsShare] = useState(false);\r\n  const [mediaMode, setMediaMode] = useState<\"video\" | \"image\">(\r\n    videoUrl ? \"video\" : \"image\"\r\n  );\r\n  const [showContext, setShowContext] = useState(false);\r\n  const [isLoadingContext, setIsLoadingContext] = useState(false);\r\n  const [contextText, setContextText] = useState(\"\");\r\n  const [sessionId, setSessionId] = useState<string | null>(null);\r\n  const [isCameraActive, setIsCameraActive] = useState(false);\r\n  const { user } = useUserStore();\r\n\r\n  const [prediction, setPrediction] = useState<SignPrediction | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [framesCollected, setFramesCollected] = useState(0);\r\n  const [framesNeeded, setFramesNeeded] = useState(30);\r\n\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const streamRef = useRef<MediaStream | null>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const wsRef = useRef<WebSocket | null>(null);\r\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // --- H√ÄM G·ª¨I KHUNG H√åNH (GI·ªÆ NGUY√äN) ---\r\n  const sendFrame = () => {\r\n    if (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\r\n      console.log(\"WebSocket not ready, state:\", wsRef.current?.readyState);\r\n      return;\r\n    }\r\n\r\n    if (!videoRef.current || !canvasRef.current) {\r\n      console.log(\"Video or canvas ref not ready\");\r\n      return;\r\n    }\r\n\r\n    const video = videoRef.current;\r\n\r\n    // Check if video is ready\r\n    if (\r\n      video.videoWidth === 0 ||\r\n      video.videoHeight === 0 ||\r\n      video.readyState < 2\r\n    ) {\r\n      console.log(\"Video not ready yet:\", {\r\n        width: video.videoWidth,\r\n        height: video.videoHeight,\r\n        readyState: video.readyState,\r\n      });\r\n      return;\r\n    }\r\n\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    if (!context) {\r\n      console.log(\"Canvas context not available\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n      const frameData = canvas.toDataURL(\"image/jpeg\", 0.8);\r\n\r\n      console.log(\"Sending frame, size:\", frameData.length);\r\n      wsRef.current.send(frameData);\r\n    } catch (err) {\r\n      console.error(\"Error sending frame:\", err);\r\n    }\r\n  };\r\n  // ---\r\n\r\n  // --- H√ÄM D·ªåN D·∫∏P (GI·ªÆ NGUY√äN) ---\r\n  const cleanupCamera = useCallback(() => {\r\n    console.log(\"ƒêang ch·∫°y d·ªçn d·∫πp camera...\");\r\n\r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n    if (wsRef.current) {\r\n      wsRef.current.onclose = null;\r\n      wsRef.current.onerror = null;\r\n      wsRef.current.close();\r\n      wsRef.current = null;\r\n    }\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach((track) => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n\r\n    setIsCameraActive((isActive) => {\r\n      if (isActive) {\r\n        setPrediction(null);\r\n        setError(null);\r\n        setFramesCollected(0);\r\n      }\r\n      return false;\r\n    });\r\n  }, []);\r\n  // ---\r\n\r\n  // --- THAY ƒê·ªîI 2: K√çCH HO·∫†T L·∫†I WEBSOCKET KHI M·ªû CAMERA ---\r\n  const handleCameraAccess = useCallback(async () => {\r\n    if (isCameraActive) {\r\n      // --- Logic T·∫ÆT (GI·ªÆ NGUY√äN) ---\r\n      console.log(\"ƒêang T·∫ÆT camera (do ng∆∞·ªùi d√πng nh·∫•p)...\");\r\n      cleanupCamera();\r\n    } else {\r\n      // --- Logic M·ªû (ƒê√É KH√îI PH·ª§C) ---\r\n      console.log(\"ƒêang M·ªû camera V√Ä K·∫æT N·ªêI...\");\r\n      try {\r\n        // 1. L·∫•y stream video\r\n        const stream = await navigator.mediaDevices.getUserMedia({\r\n          video: true,\r\n        });\r\n        streamRef.current = stream; // L∆ØU stream v√†o ref\r\n\r\n        // 2. K·∫æT N·ªêI WEBSOCKET\r\n        wsRef.current = new WebSocket(WEBSOCKET_URL);\r\n\r\n        // 3. ƒê·ªãnh nghƒ©a c√°c tr√¨nh x·ª≠ l√Ω\r\n        wsRef.current.onopen = () => {\r\n          console.log(\"WebSocket ƒë√£ k·∫øt n·ªëi!\");\r\n          setIsCameraActive(true); // <-- K√≠ch ho·∫°t re-render ƒë·ªÉ hi·ªÉn th·ªã video\r\n          setError(null);\r\n          // B·∫ÆT ƒê·∫¶U G·ª¨I KHUNG H√åNH (v·ªõi 20 FPS)\r\n          intervalRef.current = setInterval(sendFrame, FRAME_INTERVAL_MS);\r\n        };\r\n\r\n        wsRef.current.onmessage = (event) => {\r\n          console.log(\"WebSocket message received:\", event.data);\r\n          try {\r\n            const data = JSON.parse(event.data);\r\n            console.log(\"Parsed data:\", data);\r\n\r\n            if (data.status === \"predicted\") {\r\n              setPrediction({\r\n                label_text: data.label_text,\r\n                confidence: data.confidence,\r\n              });\r\n              setFramesCollected(0);\r\n            } else if (data.status === \"collecting\") {\r\n              console.log(\r\n                `Collecting frames: ${data.frames_collected}/${data.frames_needed}`\r\n              );\r\n              setFramesCollected(data.frames_collected);\r\n              setFramesNeeded(data.frames_needed);\r\n            } else if (data.status === \"waiting\") {\r\n              console.log(\"Waiting:\", data.message);\r\n            } else if (data.status === \"error\") {\r\n              console.error(\"Backend error:\", data.message);\r\n              setError(data.message);\r\n            }\r\n          } catch (err) {\r\n            console.error(\"Failed to parse WebSocket message:\", err);\r\n          }\r\n        };\r\n\r\n        wsRef.current.onclose = () => {\r\n          console.log(\"WebSocket B·ªä NG·∫ÆT (b·∫•t ng·ªù). ƒêang d·ªçn d·∫πp.\");\r\n          cleanupCamera();\r\n          setError(\"K·∫øt n·ªëi ƒë√£ m·∫•t. Vui l√≤ng th·ª≠ l·∫°i.\");\r\n        };\r\n\r\n        wsRef.current.onerror = (err) => {\r\n          console.error(\"L·ªói WebSocket:\", err);\r\n          setError(\"L·ªói k·∫øt n·ªëi. Backend c√≥ ƒëang ch·∫°y kh√¥ng?\");\r\n        };\r\n      } catch (err) {\r\n        console.error(\"L·ªói truy c·∫≠p camera:\", err);\r\n        setError(\"Kh√¥ng th·ªÉ truy c·∫≠p camera. Vui l√≤ng ki·ªÉm tra quy·ªÅn.\");\r\n      }\r\n    }\r\n  }, [isCameraActive, cleanupCamera]);\r\n  // ---\r\n\r\n  // --- C√ÅC useEffect (GI·ªÆ NGUY√äN) ---\r\n\r\n  // useEffect n√†y CH·ªà x·ª≠ l√Ω bookmark/share\r\n  useEffect(() => {\r\n    if (bookmarked || isShare) {\r\n      const timer = setTimeout(() => {\r\n        setBookmarked(false);\r\n        setIsShare(false);\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [bookmarked, isShare]);\r\n\r\n  // useEffect n√†y CH·ªà x·ª≠ l√Ω khi `word` thay ƒë·ªïi\r\n  useEffect(() => {\r\n    console.log(\"T·ª´ ƒë√£ thay ƒë·ªïi, d·ªçn d·∫πp context...\");\r\n    setShowContext(false);\r\n    setContextText(\"\");\r\n    setSessionId(null);\r\n    console.log(\"T·ª´ ƒë√£ thay ƒë·ªïi, d·ªçn d·∫πp camera...\");\r\n    cleanupCamera();\r\n  }, [word, cleanupCamera]); // <-- S·ª≠a l·∫°i dependency (th√™m cleanupCamera)\r\n\r\n  // useEffect n√†y CH·ªà d·ªçn d·∫πp khi component unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log(\"Component unmount, ƒëang d·ªçn d·∫πp camera...\");\r\n      cleanupCamera();\r\n    };\r\n  }, [cleanupCamera]); // <-- S·ª≠a l·∫°i dependency\r\n\r\n  // useEffect n√†y X·ª¨ L√ù M√ÄN H√åNH ƒêEN (GI·ªÆ NGUY√äN)\r\n  useEffect(() => {\r\n    if (isCameraActive && videoRef.current && streamRef.current) {\r\n      console.log(\"ƒêang g√°n stream v√†o video element...\");\r\n      videoRef.current.srcObject = streamRef.current;\r\n      videoRef.current.play().catch((err) => {\r\n        console.error(\"Video play() b·ªã l·ªói:\", err);\r\n      });\r\n    }\r\n  }, [isCameraActive]);\r\n  // ---\r\n\r\n  // Handle context toggle (GI·ªÆ NGUY√äN)\r\n  const handleContextToggle = async () => {\r\n    // ... (To√†n b·ªô logic context c·ªßa b·∫°n kh√¥ng thay ƒë·ªïi) ...\r\n    if (!showContext) {\r\n      setIsLoadingContext(true);\r\n      setContextText(\"\");\r\n      const prompt = `Khi n√†o s·ª≠ d·ª•ng t·ª´ n√†y, trong tr∆∞·ªùng h·ª£p, ho√†n c·∫£nh n√†o: \"${word}\"`;\r\n      const API_URL = process.env.NEXT_PUBLIC_SERVER_URL;\r\n      try {\r\n        const response = await fetch(`${API_URL}/api/chat`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            message: prompt,\r\n            user_id: user?.id || \"guest-user\",\r\n            session_id: sessionId,\r\n          }),\r\n        });\r\n        if (!response.ok) {\r\n          throw new Error(\"Failed to fetch context from API\");\r\n        }\r\n        const data = await response.json();\r\n        setContextText(data.response);\r\n        setSessionId(data.session_id);\r\n        setShowContext(true);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch context:\", error);\r\n        setContextText(\"L·ªói: Kh√¥ng th·ªÉ t·∫£i ng·ªØ c·∫£nh.\");\r\n        setShowContext(true);\r\n      } finally {\r\n        setIsLoadingContext(false);\r\n      }\r\n    } else {\r\n      setShowContext(false);\r\n    }\r\n  };\r\n\r\n  // --- PH·∫¶N RETURN (JSX) (KH√îNG THAY ƒê·ªîI) ---\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-lg border-2 border-[#FF978E] overflow-hidden\">\r\n      {/* Header Section with Actions */}\r\n      <div className=\"bg-gradient-to-r from-[#f66868] to-[#FF978E] p-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-baseline gap-3\">\r\n            <h1 className=\"text-3xl font-bold text-white drop-shadow-md\">\r\n              {word}\r\n            </h1>\r\n            {partOfSpeech && (\r\n              <div className=\"text-white/90 italic text-xl font-medium bg-white/20 px-3 py-1 rounded-full\">\r\n                {partOfSpeech}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <TooltipProvider>\r\n            <div className=\"flex gap-2\">\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <button\r\n                    onClick={() => {\r\n                      setIsShare(true);\r\n                      navigator.clipboard.writeText(window.location.href);\r\n                    }}\r\n                    className=\"p-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all duration-300 backdrop-blur-sm\"\r\n                  >\r\n                    {isShare ? (\r\n                      <Check className=\"w-6 h-6 text-white\" />\r\n                    ) : (\r\n                      <Share className=\"w-6 h-6 text-white\" />\r\n                    )}\r\n                  </button>\r\n                </TooltipTrigger>\r\n                <TooltipContent>\r\n                  {isShare ? \"ƒê√£ sao ch√©p li√™n k·∫øt!\" : \"Chia s·∫ª\"}\r\n                </TooltipContent>\r\n              </Tooltip>\r\n\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <button\r\n                    onClick={() => setBookmarked(!bookmarked)}\r\n                    className=\"p-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all duration-300 backdrop-blur-sm\"\r\n                  >\r\n                    <Bookmark\r\n                      className={`w-6 h-6 ${\r\n                        bookmarked ? \"fill-white text-white\" : \"text-white\"\r\n                      }`}\r\n                    />\r\n                  </button>\r\n                </TooltipTrigger>\r\n                <TooltipContent>\r\n                  {bookmarked ? \"ƒê√£ l∆∞u\" : \"L∆∞u t·ª´\"}\r\n                </TooltipContent>\r\n              </Tooltip>\r\n            </div>\r\n          </TooltipProvider>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"p-6 space-y-6\">\r\n        {/* Definition Section */}\r\n        {definition && (\r\n          <div className=\"bg-rose-50 rounded-xl p-5 border border-rose-200\">\r\n            <h3 className=\"text-sm font-bold text-[#C73B3B] uppercase tracking-wide mb-3 flex items-center gap-2\">\r\n              <div className=\"w-1 h-5 bg-[#C73B3B] rounded-full\"></div>\r\n              C√°ch th·ª±c hi·ªán\r\n            </h3>\r\n            <p className=\"text-gray-700 text-base\">{definition}</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Two Column Layout: Video/Image + Camera */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          {/* Left Column: Instructional Media */}\r\n          {(videoUrl || imageUrl) && (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-sm font-bold text-[#C73B3B] uppercase tracking-wide flex items-center gap-2\">\r\n                  <div className=\"w-1 h-5 bg-[#C73B3B] rounded-full\"></div>\r\n                  H∆∞·ªõng d·∫´n\r\n                </h3>\r\n\r\n                {/* Media Toggle */}\r\n                <div className=\"flex bg-rose-50 border border-rose-200 rounded-lg overflow-hidden\">\r\n                  {videoUrl && (\r\n                    <button\r\n                      onClick={() => setMediaMode(\"video\")}\r\n                      className={`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium transition-all cursor-pointer\r\n                        ${\r\n                          mediaMode === \"video\"\r\n                            ? \"bg-[#C73B3B] text-white shadow-sm\"\r\n                            : \"text-[#C73B3B] hover:bg-rose-100\"\r\n                        }`}\r\n                    >\r\n                      <Video className=\"w-3.5 h-3.5\" /> Video\r\n                    </button>\r\n                  )}\r\n                  {imageUrl && (\r\n                    <button\r\n                      onClick={() => setMediaMode(\"image\")}\r\n                      className={`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium transition-all cursor-pointer\r\n                        ${\r\n                          mediaMode === \"image\"\r\n                            ? \"bg-[#C73B3B] text-white shadow-sm\"\r\n                            : \"text-[#C73B3B] hover:bg-rose-100\"\r\n                        }`}\r\n                    >\r\n                      <ImageIcon className=\"w-3.5 h-3.5\" /> H√¨nh ·∫£nh\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Media Display */}\r\n              <div className=\"relative w-full rounded-xl overflow-hidden border-2 border-gray-200 shadow-md aspect-video bg-gray-100\">\r\n                {mediaMode === \"video\" && videoUrl ? (\r\n                  <video\r\n                    controls\r\n                    className=\"w-full h-full object-contain\"\r\n                    src={videoUrl}\r\n                  />\r\n                ) : (\r\n                  imageUrl && (\r\n                    <img\r\n                      src={imageUrl}\r\n                      alt={`${word} illustration`}\r\n                      className=\"w-full h-full object-contain p-4\"\r\n                      loading=\"lazy\"\r\n                    />\r\n                  )\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Right Column: Practice Camera */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-sm font-bold text-[#C73B3B] uppercase tracking-wide flex items-center gap-2\">\r\n                <div className=\"w-1 h-5 bg-[#C73B3B] rounded-full\"></div>\r\n                Luy·ªán t·∫≠p\r\n              </h3>\r\n\r\n              <TooltipProvider>\r\n                <Tooltip>\r\n                  <TooltipTrigger asChild>\r\n                    <button\r\n                      onClick={handleCameraAccess}\r\n                      className={`px-4 py-2 rounded-lg font-medium transition-all duration-300 transform flex items-center gap-2 text-sm\r\n                        ${\r\n                          isCameraActive\r\n                            ? \"bg-[#f66868] text-white shadow-lg scale-105\"\r\n                            : \"bg-rose-100 text-[#f66868] hover:bg-rose-200\"\r\n                        }`}\r\n                    >\r\n                      <Camera className=\"w-4 h-4\" />\r\n                      {isCameraActive ? \"T·∫Øt camera\" : \"B·∫≠t camera\"}\r\n                    </button>\r\n                  </TooltipTrigger>\r\n                  <TooltipContent>\r\n                    {isCameraActive\r\n                      ? \"D·ª´ng luy·ªán t·∫≠p\"\r\n                      : \"B·∫Øt ƒë·∫ßu luy·ªán t·∫≠p v·ªõi camera\"}\r\n                  </TooltipContent>\r\n                </Tooltip>\r\n              </TooltipProvider>\r\n            </div>\r\n\r\n            {/* Camera Display */}\r\n            {isCameraActive ? (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"relative w-full rounded-xl overflow-hidden border-2 border-[#f66868] shadow-lg aspect-video bg-black\">\r\n                  <video\r\n                    ref={videoRef}\r\n                    autoPlay\r\n                    muted\r\n                    playsInline\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                  {/* Recording Indicator */}\r\n                  <div className=\"absolute top-3 right-3 flex items-center gap-2 bg-red-500 text-white px-3 py-1.5 rounded-full text-xs font-bold\">\r\n                    <div className=\"w-2 h-2 bg-white rounded-full animate-pulse\"></div>\r\n                    REC\r\n                  </div>\r\n                </div>\r\n\r\n                <canvas ref={canvasRef} style={{ display: \"none\" }} />\r\n\r\n                {/* Prediction Results */}\r\n                {prediction && (\r\n                  <div className=\"p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <p className=\"text-xs text-green-600 font-medium mb-1\">\r\n                          Nh·∫≠n di·ªán ƒë∆∞·ª£c:\r\n                        </p>\r\n                        <h4 className=\"text-2xl font-bold text-green-800\">\r\n                          {prediction.label_text}\r\n                        </h4>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-xs text-green-600 font-medium mb-1\">\r\n                          ƒê·ªô ch√≠nh x√°c:\r\n                        </p>\r\n                        <p className=\"text-3xl font-bold text-green-700\">\r\n                          {(prediction.confidence * 100).toFixed(0)}%\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Collection Progress */}\r\n                <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-xl\">\r\n                  {framesCollected > 0 ? (\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"flex justify-between text-sm text-blue-700 font-medium\">\r\n                        <span>ƒêang thu th·∫≠p khung h√¨nh...</span>\r\n                        <span>\r\n                          {framesCollected}/{framesNeeded}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"w-full bg-blue-200 rounded-full h-2 overflow-hidden\">\r\n                        <div\r\n                          className=\"bg-blue-600 h-full transition-all duration-300 rounded-full\"\r\n                          style={{\r\n                            width: `${(framesCollected / framesNeeded) * 100}%`,\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <p className=\"text-blue-700 flex items-center justify-center gap-2 text-sm\">\r\n                      <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                      {prediction\r\n                        ? \"S·∫µn s√†ng nh·∫≠n di·ªán ti·∫øp...\"\r\n                        : \"ƒêang kh·ªüi ƒë·ªông AI...\"}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {error && (\r\n                  <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n                    <p className=\"text-red-600 text-sm text-center\">{error}</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"w-full aspect-video rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 flex flex-col items-center justify-center text-center p-6\">\r\n                <Camera className=\"w-12 h-12 text-gray-400 mb-3\" />\r\n                <p className=\"text-gray-600 font-medium mb-1\">\r\n                  Camera ch∆∞a ƒë∆∞·ª£c b·∫≠t\r\n                </p>\r\n                <p className=\"text-gray-400 text-sm\">\r\n                  Nh·∫•n n√∫t \"B·∫≠t camera\" ƒë·ªÉ b·∫Øt ƒë·∫ßu luy·ªán t·∫≠p\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Context Button */}\r\n        <div className=\"flex justify-center pt-4\">\r\n          <Button\r\n            size=\"lg\"\r\n            onClick={handleContextToggle}\r\n            disabled={isLoadingContext}\r\n            className=\"px-8 py-6 rounded-xl bg-gradient-to-r from-[#C73B3B] to-[#f66868] text-white font-bold hover:shadow-lg hover:scale-105 transition-all duration-300 text-base flex items-center gap-3\"\r\n          >\r\n            {isLoadingContext ? (\r\n              <>\r\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                ƒêang t·∫£i ng·ªØ c·∫£nh...\r\n              </>\r\n            ) : showContext ? (\r\n              <>\r\n                <Sparkles className=\"w-5 h-5\" />\r\n                ·∫®n ng·ªØ c·∫£nh\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Sparkles className=\"w-5 h-5\" />\r\n                Xem ng·ªØ c·∫£nh s·ª≠ d·ª•ng\r\n              </>\r\n            )}\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Context Section */}\r\n        {showContext && (\r\n          <div className=\"bg-gradient-to-br from-rose-50 to-orange-50 border-2 border-rose-200 rounded-xl p-6 shadow-inner\">\r\n            <h3 className=\"text-sm font-bold text-[#C73B3B] uppercase tracking-wide mb-4 flex items-center gap-2\">\r\n              <Sparkles className=\"w-4 h-4\" />\r\n              Ng·ªØ c·∫£nh s·ª≠ d·ª•ng\r\n            </h3>\r\n            {isLoadingContext ? (\r\n              <div className=\"space-y-3\">\r\n                <div className=\"h-4 bg-rose-200 rounded animate-pulse\"></div>\r\n                <div className=\"h-4 bg-rose-200 rounded animate-pulse w-5/6\"></div>\r\n                <div className=\"h-4 bg-rose-200 rounded animate-pulse w-4/6\"></div>\r\n              </div>\r\n            ) : contextText ? (\r\n              <div className=\"prose prose-rose max-w-none\">\r\n                <MarkdownRenderer content={contextText} />\r\n              </div>\r\n            ) : (\r\n              <p className=\"italic text-gray-500 text-center py-4\">\r\n                Kh√¥ng c√≥ ng·ªØ c·∫£nh cho t·ª´ n√†y.\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2652, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/lesson-player.tsx"],"sourcesContent":["\"use client\";\r\nimport { useRouter } from \"next/navigation\";\r\n// 1. Import useEffect, useCallback v√† additional icons\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport {\r\n  CheckCircle2,\r\n  XCircle,\r\n  Volume2,\r\n  RotateCcw,\r\n  ChevronRight,\r\n  ChevronLeft,\r\n  Loader2,\r\n  School,\r\n  Trophy, // Th√™m icon cho m√†n h√¨nh k·∫øt qu·∫£\r\n} from \"lucide-react\";\r\nimport VocabularyInfo from \"@/components/VocabularyInfo\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\n\r\n// (C√°c interface Vocabulary, BackendVocabularyItem, Lesson kh√¥ng ƒë·ªïi)\r\ninterface Vocabulary {\r\n  title: string;\r\n  description: string;\r\n  videoUrl: string;\r\n  imageUrl?: string | null;\r\n  partOfSpeech?: string;\r\n}\r\n\r\ninterface BackendVocabularyItem {\r\n  id: number;\r\n  word: string;\r\n  description: string;\r\n  video_url: string;\r\n}\r\n\r\ninterface Question {\r\n  id: number;\r\n  question_text: string;\r\n  video: string;\r\n  type: \"mcq\" | \"true_false\";\r\n  options: {\r\n    id: number;\r\n    option_text: string;\r\n    is_correct: boolean;\r\n  }[];\r\n}\r\ninterface LessonQuizResponse {\r\n  quiz_id: number | null;\r\n  questions: Question[];\r\n}\r\ninterface Lesson {\r\n  id: number;\r\n  title: string;\r\n}\r\n\r\nexport default function LessonPlayer({ lesson }: { lesson: Lesson }) {\r\n  const [vocabularyList, setVocabularyList] = useState<Vocabulary[]>([]);\r\n  const [quizQuestions, setQuizQuestions] = useState<Question[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const { user } = useUserStore();\r\n  const router = useRouter();\r\n  // 1. TH√äM \"summary\" V√ÄO STATE C·ª¶A PHASE\r\n  const [phase, setPhase] = useState<\"introduction\" | \"quiz\" | \"summary\">(\r\n    \"introduction\"\r\n  );\r\n\r\n  const [currentVocabIndex, setCurrentVocabIndex] = useState(0);\r\n  const [currentQuizIndex, setCurrentQuizIndex] = useState(0);\r\n  const [quizAnswers, setQuizAnswers] = useState<(number | null)[]>([]);\r\n  const [showQuizResult, setShowQuizResult] = useState(false);\r\n  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n\r\n  // 2. TH√äM STATE ƒê·ªÇ GI·ªÆ ƒêI·ªÇM S·ªê CU·ªêI C√ôNG\r\n  const [quizPoint, setQuizPoint] = useState(0);\r\n  const [quizAttemptId, setQuizAttemptId] = useState<number | null>(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false); // Th√™m state loading cho vi·ªác n·ªôp b√†i\r\n  const fetchData = useCallback(async () => {\r\n    if (!lesson.id) {\r\n      setError(\"No lesson ID provided.\");\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setPhase(\"introduction\");\r\n    setCurrentVocabIndex(0);\r\n    setCurrentQuizIndex(0);\r\n    setSelectedAnswer(null);\r\n    setQuizPoint(0); // Reset ƒëi·ªÉm khi t·∫£i data m·ªõi\r\n\r\n    try {\r\n      const [vocabResponse, quizResponse] = await Promise.all([\r\n        fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/lessons/vocabulary?lesson_id=${lesson.id}`\r\n        ),\r\n        fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/lesson-quiz?lesson_id=${lesson.id}`\r\n        ),\r\n      ]);\r\n\r\n      if (!vocabResponse.ok) throw new Error(\"Failed to fetch vocabulary.\");\r\n      if (!quizResponse.ok) throw new Error(\"Failed to fetch quiz questions.\");\r\n\r\n      const vocabData: { vocabulary: BackendVocabularyItem[] } =\r\n        await vocabResponse.json();\r\n      const quizData: LessonQuizResponse = await quizResponse.json();\r\n      const mappedVocabulary: Vocabulary[] = vocabData.vocabulary.map(\r\n        (item) => ({\r\n          title: item.word,\r\n          description: item.description,\r\n          videoUrl: item.video_url,\r\n          imageUrl: null,\r\n        })\r\n      );\r\n      console.log(quizData);\r\n      const fetched_quiz_id = quizData.quiz_id;\r\n      console.log(fetched_quiz_id);\r\n      setQuizAttemptId(fetched_quiz_id); // Gi·∫£ s·ª≠ b·∫°n ƒë√£ ƒë·ªïi t√™n state n√†y\r\n      setVocabularyList(mappedVocabulary);\r\n      setQuizQuestions(quizData.questions || []);\r\n      setQuizAnswers(new Array(quizData.questions?.length || 0).fill(null));\r\n    } catch (err: any) {\r\n      console.error(err);\r\n      setError(err.message || \"An unknown error occurred.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [lesson.id]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n  const currentVocab = vocabularyList[currentVocabIndex];\r\n  const currentQuestion = quizQuestions[currentQuizIndex];\r\n\r\n  // Logic t√≠nh ƒëi·ªÉm ƒë√∫ng/sai cho c√¢u h·ªèi HI·ªÜN T·∫†I\r\n  const correctAnswerIndex = currentQuestion\r\n    ? currentQuestion.options.findIndex((opt) => opt.is_correct)\r\n    : -1;\r\n  const isQuizCorrect = quizAnswers[currentQuizIndex] === correctAnswerIndex;\r\n\r\n  // Logic t√≠nh % thanh progress\r\n  const introProgress =\r\n    vocabularyList.length > 0\r\n      ? ((currentVocabIndex + 1) / vocabularyList.length) * 100\r\n      : 0;\r\n  const quizProgress =\r\n    quizQuestions.length > 0\r\n      ? ((currentQuizIndex + 1) / quizQuestions.length) * 100\r\n      : 0;\r\n\r\n  // 3. S·ª¨A: C·∫≠p nh·∫≠t thanh progress cho c·∫£ 3 giai ƒëo·∫°n\r\n  const currentProgress =\r\n    phase === \"introduction\"\r\n      ? introProgress\r\n      : phase === \"quiz\"\r\n      ? quizProgress\r\n      : 100; // 100% khi ·ªü m√†n h√¨nh summary\r\n\r\n  const handleFinishIntroduction = () => {\r\n    if (quizQuestions.length > 0) {\r\n      setPhase(\"quiz\");\r\n      setCurrentQuizIndex(0);\r\n      setSelectedAnswer(null);\r\n      setShowQuizResult(false);\r\n    } else {\r\n      handleRestart();\r\n    }\r\n  };\r\n\r\n  // (handleQuizGeneration kh√¥ng ƒë·ªïi)\r\n  const handleQuizGeneration = async () => {\r\n    setIsGenerating(true);\r\n    setError(null);\r\n\r\n    const vocabularyPayload = vocabularyList.map((v) => ({\r\n      word: v.title,\r\n      description: v.description,\r\n      video: v.videoUrl,\r\n    }));\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_SERVER_URL}/api/generate-quiz`,\r\n        {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            lesson_id: lesson.id,\r\n            lesson_title: lesson.title,\r\n            user_id: user?.id,\r\n            vocabulary: vocabularyPayload,\r\n            session_id: null,\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const err = await response.json();\r\n        throw new Error(err.detail || \"Kh√¥ng th·ªÉ t·∫°o b√†i ki·ªÉm tra\");\r\n      }\r\n\r\n      const data = await response.json();\r\n      const agentResponse = JSON.parse(data.response);\r\n\r\n      if (agentResponse.action === \"create_quiz\") {\r\n        console.log(\"Quiz ƒë√£ ƒë∆∞·ª£c t·∫°o:\", agentResponse.payload);\r\n        await fetchData();\r\n        setPhase(\"quiz\");\r\n      } else {\r\n        throw new Error(agentResponse.payload || \"Agent kh√¥ng th·ªÉ t·∫°o quiz\");\r\n      }\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleQuizAnswer = (optionIndex: number) => {\r\n    setSelectedAnswer(optionIndex);\r\n    const newAnswers = [...quizAnswers];\r\n    newAnswers[currentQuizIndex] = optionIndex;\r\n    setQuizAnswers(newAnswers);\r\n    setShowQuizResult(true);\r\n  };\r\n\r\n  // 4. S·ª¨A: handleNextQuiz ƒë·ªÉ t√≠nh ƒëi·ªÉm v√† chuy·ªÉn sang \"summary\"\r\n  const handleNextQuiz = () => {\r\n    if (currentQuizIndex < quizQuestions.length - 1) {\r\n      // V·∫´n c√≤n c√¢u h·ªèi\r\n      setCurrentQuizIndex(currentQuizIndex + 1);\r\n      setShowQuizResult(false);\r\n      setSelectedAnswer(null);\r\n    } else {\r\n      // ƒê√¢y l√† c√¢u h·ªèi cu·ªëi c√πng -> T√≠nh ƒëi·ªÉm v√† chuy·ªÉn sang summary\r\n\r\n      // 1. T√≠nh ƒëi·ªÉm\r\n      const pointPerQuestion =\r\n        quizQuestions.length > 0 ? 100 / quizQuestions.length : 0;\r\n\r\n      const correctAnswersCount = quizAnswers.filter(\r\n        (selectedOptionIndex, questionIndex) => {\r\n          const question = quizQuestions[questionIndex];\r\n          if (!question || selectedOptionIndex === null) return false;\r\n\r\n          const correctOptionIndex = question.options.findIndex(\r\n            (opt) => opt.is_correct\r\n          );\r\n          return selectedOptionIndex === correctOptionIndex;\r\n        }\r\n      ).length;\r\n\r\n      setQuizPoint(Math.round(correctAnswersCount * pointPerQuestion));\r\n\r\n      // 2. Chuy·ªÉn phase\r\n      setPhase(\"summary\");\r\n    }\r\n  };\r\n  const handleCompleteQuiz = async () => {\r\n    // Ki·ªÉm tra c√°c ID c·∫ßn thi·∫øt\r\n    if (!quizAttemptId || !user?.id) {\r\n      console.error(\r\n        \"Thi·∫øu ID l∆∞·ª£t l√†m b√†i ho·∫∑c ID ng∆∞·ªùi d√πng. Kh√¥ng th·ªÉ n·ªôp ƒëi·ªÉm.\"\r\n      );\r\n      setError(\"L·ªói: Kh√¥ng th·ªÉ n·ªôp ƒëi·ªÉm. Vui l√≤ng t·∫£i l·∫°i.\");\r\n      return; // Kh√¥ng l√†m g√¨ c·∫£ n·∫øu thi·∫øu ID\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n    console.log(\"Testing:\", quizAttemptId, user.id, quizPoint, lesson.id);\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_SERVER_URL}/api/quiz/submit`,\r\n        {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            quiz_id: quizAttemptId,\r\n            user_id: parseInt(user.id), // ƒê·∫£m b·∫£o user ID l√† s·ªë\r\n            score: quizPoint,\r\n            lesson_id: lesson.id,\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errData = await response.json();\r\n        throw new Error(errData.detail || \"L·ªói khi n·ªôp b√†i\");\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log(\"N·ªôp b√†i th√†nh c√¥ng:\", result);\r\n      // B·∫°n c√≥ th·ªÉ th√™m logic ·ªü ƒë√¢y, v√≠ d·ª•: c·∫≠p nh·∫≠t state c·ªßa user...\r\n      router.back();\r\n    } catch (err: any) {\r\n      console.error(\"L·ªói API n·ªôp b√†i:\", err);\r\n      setError(err.message); // Hi·ªÉn th·ªã l·ªói tr√™n m√†n h√¨nh summary\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n  const handlePreviousQuiz = () => {\r\n    if (currentQuizIndex > 0) {\r\n      setCurrentQuizIndex(currentQuizIndex - 1);\r\n      setShowQuizResult(false);\r\n      setSelectedAnswer(null);\r\n    }\r\n  };\r\n\r\n  const handleNextVocab = () => {\r\n    if (currentVocabIndex < vocabularyList.length - 1) {\r\n      setCurrentVocabIndex(currentVocabIndex + 1);\r\n    }\r\n  };\r\n\r\n  const handlePreviousVocab = () => {\r\n    if (currentVocabIndex > 0) {\r\n      setCurrentVocabIndex(currentVocabIndex - 1);\r\n    }\r\n  };\r\n\r\n  // 5. S·ª¨A: handleRestart ƒë·ªÉ reset c·∫£ ƒëi·ªÉm\r\n  const handleRestart = () => {\r\n    setPhase(\"introduction\");\r\n    setCurrentVocabIndex(0);\r\n    setCurrentQuizIndex(0);\r\n    setQuizAnswers(new Array(quizQuestions.length).fill(null));\r\n    setShowQuizResult(false);\r\n    setSelectedAnswer(null);\r\n    setQuizPoint(0); // <-- RESET ƒêI·ªÇM\r\n  };\r\n\r\n  // (Ph·∫ßn JSX cho loading, error, no-vocabulary kh√¥ng ƒë·ªïi)\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] text-gray-500\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-[#f66868]\" />\r\n        <p className=\"mt-3 text-lg\">ƒêang t·∫£i b√†i h·ªçc...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !isGenerating) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] text-red-600 bg-red-50 p-6 rounded-lg\">\r\n        <XCircle className=\"w-8 h-8\" />\r\n        <p className=\"mt-3 text-lg font-semibold\">L·ªói khi t·∫£i b√†i h·ªçc</p>\r\n        <p className=\"text-sm\">{error}</p>\r\n        <Button onClick={fetchData} className=\"mt-4\">\r\n          Th·ª≠ l·∫°i\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (vocabularyList.length === 0) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] text-gray-500\">\r\n        <p className=\"text-lg\">Kh√¥ng t√¨m th·∫•y t·ª´ v·ª±ng n√†o cho b√†i h·ªçc n√†y.</p>\r\n      </div>\r\n    );\r\n  }\r\n  // --- 1. Define state variables (This is the \"inline\" fix) ---\r\n\r\n  return (\r\n    <div className=\"space-y-8 w-[80%] mx-auto px-4 py-8\">\r\n      {/* (Header kh√¥ng ƒë·ªïi) */}\r\n      <div className=\"text-center\">\r\n        <h2 className=\"text-4xl font-extrabold mb-3 bg-gradient-to-r from-[#f66868] to-rose-400 bg-clip-text text-transparent\">\r\n          {phase === \"introduction\"\r\n            ? \"H·ªçc T·ª´ V·ª±ng K√≠ Hi·ªáu\"\r\n            : phase === \"quiz\"\r\n            ? \"Ki·ªÉm Tra Ki·∫øn Th·ª©c\"\r\n            : \"T·ªïng K·∫øt K·∫øt Qu·∫£\"}\r\n        </h2>\r\n        {/* 6. S·ª¨A: ·∫®n ƒë·∫øm s·ªë c√¢u/t·ª´ v·ª±ng khi ·ªü m√†n h√¨nh summary */}\r\n        {phase !== \"summary\" && (\r\n          <p className=\"text-muted-foreground text-sm\">\r\n            {phase === \"introduction\"\r\n              ? `T·ª´ v·ª±ng ${currentVocabIndex + 1} / ${vocabularyList.length}`\r\n              : `C√¢u h·ªèi ${currentQuizIndex + 1} / ${quizQuestions.length}`}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* (Progress v√† Tip box kh√¥ng ƒë·ªïi) */}\r\n      <div className=\"space-y-1\">\r\n        <div className=\"flex justify-between text-sm font-medium\">\r\n          <span className=\"text-foreground\">Ti·∫øn ƒë·ªô</span>\r\n          <span className=\"text-[#f66868]\">{Math.round(currentProgress)}%</span>\r\n        </div>\r\n        <Progress\r\n          value={currentProgress}\r\n          className=\"h-2 bg-rose-100 [&>div]:bg-[#f66868]\"\r\n        />\r\n      </div>\r\n      {phase == \"introduction\" && (\r\n        <div className=\"w-full flex justify-center\">\r\n          <div className=\"mt-1 w-fit rounded-xl border border-rose-200 bg-gradient-to-r from-rose-50 to-rose-100 p-4 text-center shadow-sm flex flex-row gap-x-4 items-center\">\r\n            <div className=\"text-xl\">üí°</div>\r\n            <div className=\"flex flex-col gap-y-1\">\r\n              <p className=\"text-rose-700 font-medium text-lg\">\r\n                M·∫πo nh·ªè: H√£y b·∫≠t camera ƒë·ªÉ t·ª± ki·ªÉm tra b·∫£n th√¢n nh√©!\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* === PHASE: INTRODUCTION === */}\r\n      {phase === \"introduction\" && currentVocab && (\r\n        <VocabularyInfo\r\n          word={currentVocab.title}\r\n          partOfSpeech={currentVocab.partOfSpeech}\r\n          definition={currentVocab.description}\r\n          videoUrl={currentVocab.videoUrl}\r\n          imageUrl={currentVocab.imageUrl || undefined}\r\n        />\r\n      )}\r\n\r\n      {/* === PHASE: QUIZ === */}\r\n      {phase === \"quiz\" && currentQuestion && (\r\n        <Card className=\"overflow-hidden border-2 shadow-sm hover:shadow-md transition-all scale-[0.98]\">\r\n          <CardHeader className=\"border-b-2 py-2 px-4\">\r\n            <div className=\"flex justify-between items-start\">\r\n              <div>\r\n                <CardTitle className=\"text-lg font-semibold text-foreground\">\r\n                  {currentQuestion.question_text}\r\n                </CardTitle>\r\n                {currentQuestion.video && (\r\n                  <CardDescription className=\"text-xs mt-0.5\">\r\n                    Xem video v√† ch·ªçn ƒë√°p √°n ƒë√∫ng\r\n                  </CardDescription>\r\n                )}\r\n              </div>\r\n              <Badge className=\"bg-[#f66868]/10 text-[#f66868] border border-[#f66868]/30 text-[11px] py-0.5 px-2\">\r\n                Ki·ªÉm Tra\r\n              </Badge>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent className=\"pt-4 space-y-4 px-4 pb-4\">\r\n            {currentQuestion.video && (\r\n              <div className=\"relative rounded-lg overflow-hidden aspect-video bg-rose-50 shadow-inner\">\r\n                <video\r\n                  key={currentQuestion.id}\r\n                  src={currentQuestion.video}\r\n                  className=\"w-full h-full object-cover\"\r\n                  autoPlay\r\n                  loop\r\n                  muted\r\n                />\r\n                <div className=\"absolute top-0 left-0 h-full w-48 bg-white z-10\"></div>\r\n                <div className=\"absolute top-0 right-0 h-full w-48 bg-white z-10\"></div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              {currentQuestion.options.map((option, index) => (\r\n                <button\r\n                  key={option.id}\r\n                  onClick={() => handleQuizAnswer(index)}\r\n                  disabled={showQuizResult}\r\n                  className={`group w-full rounded-lg overflow-hidden border transition-all duration-300 disabled:opacity-60 disabled:cursor-not-allowed ${\r\n                    // This is the new, cleaned-up logic:\r\n                    showQuizResult && selectedAnswer === index // A. Results are SHOWN and this was the user's answer\r\n                      ? option.is_correct\r\n                        ? \"border-green-500 ring-2 ring-green-500/50\" // A1. It was CORRECT (green)\r\n                        : \"border-red-500 ring-2 ring-red-500/50\" // A2. It was INCORRECT (red)\r\n                      : !showQuizResult && selectedAnswer === index // B. Results NOT shown, but this is selected\r\n                      ? \"border-[#f66868] ring-2 ring-[#f66868]/50\" // B1. Neutral \"selected\" state (pink)\r\n                      : \"border-gray-200 hover:border-[#f66868]/70\" // C. Idle / unselected state (gray)\r\n                  }`}\r\n                >\r\n                  {/* This text block now also changes color based on the state */}\r\n                  <div\r\n                    className={`p-3 bg-white border-t text-sm font-medium text-center transition-all duration-300 ${\r\n                      // Logic for text color\r\n                      showQuizResult && selectedAnswer === index\r\n                        ? option.is_correct\r\n                          ? \"text-green-700 font-bold\" // Correct answer, selected\r\n                          : \"text-red-700 font-bold\" // Incorrect answer, selected\r\n                        : !showQuizResult && selectedAnswer === index\r\n                        ? \"text-[#f66868] font-bold\" // Neutral \"selected\" state\r\n                        : \"text-gray-700 group-hover:text-[#f66868]\" // Idle state\r\n                    }`}\r\n                  >\r\n                    {/* FIX: Added \"flex items-center justify-center gap-2\"\r\n    This centers the content and adds space between the icon and text.\r\n  */}\r\n                    <div className=\"flex items-center justify-center gap-2\">\r\n                      {/* FIX: Wrapped the icon logic in a check.\r\n      This ensures icons ONLY show up for the answer the user selected,\r\n      once the results are shown.\r\n    */}\r\n                      {showQuizResult && selectedAnswer === index && (\r\n                        <>\r\n                          {option.is_correct ? (\r\n                            <CheckCircle2 className=\"w-5 h-5 text-green-600\" />\r\n                          ) : (\r\n                            <XCircle className=\"w-5 h-5 text-red-600\" />\r\n                          )}\r\n                        </>\r\n                      )}\r\n\r\n                      {/* This text now renders correctly with or without an icon */}\r\n                      <span>{option.option_text}</span>\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            {showQuizResult && (\r\n              <div\r\n                className={`p-3 rounded-md border text-sm ${\r\n                  isQuizCorrect\r\n                    ? \"bg-green-50 border-green-200 text-green-800\"\r\n                    : \"bg-red-50 border-red-200 text-red-800\"\r\n                }`}\r\n              >\r\n                <p className=\"font-semibold mb-0.5\">\r\n                  {isQuizCorrect ? \"Tuy·ªát v·ªùi!\" : \"Ch∆∞a ƒë√∫ng\"}\r\n                </p>\r\n                <p className=\"text-xs leading-snug\">\r\n                  {isQuizCorrect\r\n                    ? `ƒê√∫ng r·ªìi! ƒê√¢y l√† k√≠ hi·ªáu cho \"${currentQuestion.options[correctAnswerIndex]?.option_text}\".`\r\n                    : `ƒê√°p √°n ƒë√∫ng l√† \"${currentQuestion.options[correctAnswerIndex]?.option_text}\". H√£y th·ª≠ l·∫°i nh√©!`}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* 7. TH√äM: Giao di·ªán cho m√†n h√¨nh SUMMARY */}\r\n      {phase === \"summary\" && (\r\n        <Card className=\"overflow-hidden border-2 border-rose-100 shadow-sm text-center pb-0\">\r\n          <CardHeader className=\"bg-gradient-to-br from-rose-50 to-white py-6\">\r\n            <Trophy className=\"w-16 h-16 text-[#f66868] mx-auto\" />\r\n            <CardTitle className=\"text-3xl font-bold text-[#f66868] pt-2\">\r\n              Ch√∫c M·ª´ng Ho√†n Th√†nh!\r\n            </CardTitle>\r\n            <CardDescription className=\"text-lg text-gray-600\">\r\n              B·∫°n ƒë√£ ho√†n th√†nh b√†i ki·ªÉm tra.\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6 p-6\">\r\n            <div className=\"text-7xl font-bold text-gray-800\">{quizPoint}</div>\r\n            <p className=\"text-xl text-gray-600 -mt-4\">/ 100 ƒëi·ªÉm</p>\r\n            <div className=\"w-full max-w-xs mx-auto\">\r\n              <Progress\r\n                value={quizPoint}\r\n                className=\"h-3 bg-rose-100 [&>div]:bg-[#f66868]\"\r\n              />\r\n            </div>\r\n            <p className=\"text-gray-500\">\r\n              B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng{\" \"}\r\n              <strong>\r\n                {Math.round((quizPoint / 100) * quizQuestions.length)} /{\" \"}\r\n                {quizQuestions.length}\r\n              </strong>{\" \"}\r\n              c√¢u h·ªèi.\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* NAVIGATION */}\r\n      <div className=\"flex items-center justify-between\">\r\n        {/* 8. S·ª¨A: ·∫®n n√∫t \"Quay L·∫°i\" khi ·ªü m√†n h√¨nh summary */}\r\n        {phase !== \"summary\" ? (\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={\r\n              phase === \"introduction\"\r\n                ? handlePreviousVocab\r\n                : handlePreviousQuiz\r\n            }\r\n            disabled={\r\n              phase === \"introduction\"\r\n                ? currentVocabIndex === 0\r\n                : currentQuizIndex === 0\r\n            }\r\n            className=\"flex items-center gap-2 border-rose-200 text-[#f66868] hover:bg-rose-50\"\r\n          >\r\n            <ChevronLeft className=\"h-4 w-4\" /> Quay L·∫°i\r\n          </Button>\r\n        ) : (\r\n          <div></div> // Placeholder ƒë·ªÉ gi·ªØ n√∫t b√™n ph·∫£i ·ªü ƒë√∫ng v·ªã tr√≠\r\n        )}\r\n\r\n        {/* 9. S·ª¨A: ·∫®n thanh progress dots khi ·ªü m√†n h√¨nh summary */}\r\n        {phase !== \"summary\" && (\r\n          <div className=\"flex items-center gap-2\">\r\n            {(phase === \"introduction\" ? vocabularyList : quizQuestions).map(\r\n              (_, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  className={`h-2 rounded-full transition-all ${\r\n                    (phase === \"introduction\"\r\n                      ? currentVocabIndex\r\n                      : currentQuizIndex) === idx\r\n                      ? \"w-8 bg-[#f66868]\"\r\n                      : \"w-2 bg-muted\"\r\n                  }`}\r\n                />\r\n              )\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* 10. S·ª¨A: C·∫≠p nh·∫≠t logic n√∫t ch√≠nh cho c·∫£ 3 phase */}\r\n        <div className=\"flex flex-row gap-x-1\">\r\n          <Button\r\n            onClick={\r\n              phase === \"introduction\"\r\n                ? currentVocabIndex === vocabularyList.length - 1\r\n                  ? handleFinishIntroduction\r\n                  : handleNextVocab\r\n                : phase === \"quiz\" // Th√™m ƒëi·ªÅu ki·ªán check\r\n                ? currentQuizIndex === quizQuestions.length - 1\r\n                  ? handleNextQuiz // handleNextQuiz s·∫Ω t·ª± ƒë·ªông chuy·ªÉn sang summary\r\n                  : handleNextQuiz\r\n                : handleRestart // N·∫øu phase l√† \"summary\", n√∫t n√†y s·∫Ω l√† \"Restart\"\r\n            }\r\n            disabled={(phase === \"quiz\" && !showQuizResult) || isGenerating}\r\n            className=\"flex items-center gap-2 bg-[#f66868] hover:bg-[#f66868]/90 text-white shadow-md\"\r\n          >\r\n            {phase === \"introduction\" ? (\r\n              currentVocabIndex === vocabularyList.length - 1 ? (\r\n                <>\r\n                  {quizQuestions.length > 0 ? \"L√†m Ki·ªÉm Tra\" : \"H·ªçc l·∫°i\"}\r\n                  <ChevronRight className=\"h-4 w-4\" />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  Ti·∫øp T·ª•c <ChevronRight className=\"h-4 w-4\" />\r\n                </>\r\n              )\r\n            ) : phase === \"quiz\" ? ( // Th√™m ƒëi·ªÅu ki·ªán check\r\n              currentQuizIndex === quizQuestions.length - 1 ? (\r\n                // C√¢u quiz cu·ªëi\r\n                <>\r\n                  Ho√†n th√†nh <ChevronRight className=\"h-4 w-4\" />\r\n                </>\r\n              ) : (\r\n                // V·∫´n c√≤n c√¢u quiz\r\n                <>\r\n                  Ti·∫øp T·ª•c <ChevronRight className=\"h-4 w-4\" />\r\n                </>\r\n              )\r\n            ) : (\r\n              // Phase l√† \"summary\"\r\n              <>\r\n                <RotateCcw className=\"h-4 w-4\" /> B·∫Øt ƒê·∫ßu L·∫°i\r\n              </>\r\n            )}\r\n          </Button>\r\n          {phase === \"summary\" && (\r\n            <Button\r\n              className=\"flex items-center gap-2 bg-[#f66868] hover:bg-[#f66868]/90 text-white shadow-md\"\r\n              onClick={handleCompleteQuiz}\r\n            >\r\n              Ho√†n th√†nh\r\n            </Button>\r\n          )}\r\n          {/* N√∫t \"T·∫°o Quiz\" (Logic kh√¥ng ƒë·ªïi) */}\r\n          {phase === \"introduction\" && quizQuestions.length === 0 && (\r\n            <Button\r\n              onClick={handleQuizGeneration}\r\n              variant=\"outline\"\r\n              disabled={isGenerating}\r\n              className=\"flex items-center gap-2 border-rose-200 text-[#f66868] hover:bg-rose-50\"\r\n            >\r\n              {isGenerating ? (\r\n                <>\r\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                  ƒêang t·∫°o...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <School className=\"h-4 w-4\" /> T·∫°o Quiz\r\n                </>\r\n              )}\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3599, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/progress-sidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport {\r\n  CheckCircle2,\r\n  Lock,\r\n  Circle,\r\n  SquarePen,\r\n  GraduationCap,\r\n  Sparkles,\r\n  BookOpen,\r\n  Trophy,\r\n} from \"lucide-react\";\r\nimport { SyllabusInfo } from \"../../map/page\";\r\n\r\ntype LessonStatus = \"complete\" | \"in-progress\" | \"not_start\";\r\n\r\ninterface Lesson {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  vocabulary_count: number;\r\n  lesson_status: LessonStatus;\r\n  level: \"C∆° b·∫£n\";\r\n}\r\n\r\n// 2. DELETE the hardcoded 'lessons' array.\r\n// const lessons: Lesson[] = [ ... ]; // <-- DELETE THIS\r\n\r\n// 3. UPDATE the props to accept the 'lessons' array\r\ninterface ProgressSidebarProps {\r\n  lessons: Lesson[]; // <-- ADD THIS\r\n  syllabus: SyllabusInfo | undefined;\r\n  selectedLessonId?: number;\r\n  onSelectLesson?: (id: number) => void;\r\n}\r\n\r\nexport default function ProgressSidebar({\r\n  lessons, // <-- 4. ACCEPT the 'lessons' prop\r\n  syllabus,\r\n  selectedLessonId,\r\n  onSelectLesson,\r\n}: ProgressSidebarProps) {\r\n  // 5. CALCULATE progress dynamically from the 'lessons' prop\r\n  const totalLessons = lessons.length;\r\n  const completedCount = lessons.filter(\r\n    (l) => l.lesson_status === \"complete\"\r\n  ).length;\r\n  console.log(lessons);\r\n  // More accurate vocabulary calculation\r\n  const totalVocabulary = lessons.reduce(\r\n    (acc, lesson) => acc + (lesson.vocabulary_count || 0),\r\n    0\r\n  );\r\n\r\n  const vocabularyComplete = lessons.reduce(\r\n    (acc, lesson) =>\r\n      acc + (lesson.lesson_status === \"complete\" ? lesson.vocabulary_count : 0),\r\n    0\r\n  );\r\n  const completionPercentage =\r\n    totalLessons > 0 ? (completedCount / totalLessons) * 100 : 0;\r\n\r\n  const vocabPercentage =\r\n    totalVocabulary > 0 ? (vocabularyComplete / totalVocabulary) * 100 : 0;\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Progress Overview Card */}\r\n      <Card className=\"border border-[#F66868]/30 bg-gradient-to-br from-rose-50 to-white rounded-2xl shadow-sm py-6\">\r\n        {/* Decorative background elements */}\r\n        <div className=\"absolute top-0 right-0 w-32 h-32 bg-[#F66868]/10 rounded-full blur-3xl -mr-16 -mt-16\"></div>\r\n        <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-pink-300/20 rounded-full blur-2xl -ml-12 -mb-12\"></div>\r\n\r\n        <CardHeader className=\"relative z-10\">\r\n          <div className=\"flex items-start justify-between gap-3\">\r\n            <div className=\"flex-1\">\r\n              <div className=\"flex items-center gap-2 mb-3\">\r\n                <div className=\"p-2 bg-[#F66868]/10 rounded-xl\">\r\n                  <GraduationCap className=\"h-5 w-5 text-[#F66868]\" />\r\n                </div>\r\n                <span className=\"text-xs font-bold text-[#F66868]/70 uppercase tracking-wider\">\r\n                  Gi√°o tr√¨nh c·ªßa b·∫°n\r\n                </span>\r\n              </div>\r\n              <CardTitle className=\"text-2xl font-bold text-[#F66868] tracking-tight leading-tight\">\r\n                {syllabus?.title || \"Ch·ªçn gi√°o tr√¨nh\"}\r\n              </CardTitle>\r\n            </div>\r\n            {syllabus && Number(syllabus.id) > 11 && (\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"default\"\r\n                className=\"bg-[#F66868] text-white transition-all duration-300 rounded-sm shadow-sm hover:bg-[#F66868]/60 hover:text-white\"\r\n              >\r\n                <SquarePen className=\"h-4 w-4 mr-1\" />\r\n                ƒêi·ªÅu ch·ªânh\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"space-y-5 relative z-10\">\r\n          {/* Syllabus Description */}\r\n          {syllabus?.description && (\r\n            <div className=\"bg-white/60 backdrop-blur-sm rounded-2xl p-4 border border-rose-100\">\r\n              <p className=\"text-sm text-gray-700 leading-relaxed\">\r\n                {syllabus.description}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Stats Grid */}\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            {/* Lessons Stat */}\r\n            <div className=\"bg-white rounded-2xl p-4 shadow-sm border border-rose-100 hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-center gap-2 mb-2\">\r\n                <div className=\"p-2 bg-[#F66868]/10 rounded-lg\">\r\n                  <BookOpen className=\"h-4 w-4 text-[#F66868]\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">\r\n                {completedCount}\r\n                <span className=\"text-lg text-gray-400\">/{totalLessons}</span>\r\n              </div>\r\n              <div className=\"text-xs text-gray-600 mt-1 font-medium\">\r\n                B√†i h·ªçc\r\n              </div>\r\n            </div>\r\n\r\n            {/* Vocabulary Stat */}\r\n            <div className=\"bg-white rounded-2xl p-4 shadow-sm border border-emerald-100 hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-center gap-2 mb-2\">\r\n                <div className=\"p-2 bg-emerald-100 rounded-lg\">\r\n                  <Sparkles className=\"h-4 w-4 text-emerald-600\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">\r\n                {vocabularyComplete}\r\n                <span className=\"text-lg text-gray-400\">\r\n                  /{totalVocabulary}\r\n                </span>\r\n              </div>\r\n              <div className=\"text-xs text-gray-600 mt-1 font-medium\">\r\n                T·ª´ v·ª±ng\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Vocabulary Progress */}\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center justify-between text-sm\">\r\n              <span className=\"text-gray-600 font-semibold\">\r\n                Ti·∫øn ƒë·ªô t·ª´ v·ª±ng\r\n              </span>\r\n              <span className=\"font-bold text-emerald-600 text-base\">\r\n                {Math.round(vocabPercentage)}%\r\n              </span>\r\n            </div>\r\n            <div className=\"relative h-3 bg-emerald-100 rounded-full overflow-hidden shadow-inner\">\r\n              <div\r\n                className=\"h-full bg-gradient-to-r from-emerald-500 via-green-500 to-emerald-500 transition-all duration-700 ease-out rounded-full relative\"\r\n                style={{ width: `${vocabPercentage}%` }}\r\n              >\r\n                <div className=\"absolute inset-0 bg-white/30 animate-pulse\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Achievement Badge */}\r\n          {completionPercentage === 100 && (\r\n            <div className=\"relative overflow-hidden rounded-2xl bg-white/70 backdrop-blur-md border border-[#F66868]/40 p-5 text-center shadow-sm\">\r\n              <div className=\"absolute inset-0 bg-gradient-to-r from-[#F66868]/20 via-[#F66868]/15 to-[#F66868]/25 animate-pulse\"></div>\r\n              <div className=\"relative z-10\">\r\n                <Trophy className=\"h-10 w-10 text-[#F66868] mx-auto mb-2 drop-shadow-sm\" />\r\n                <p className=\"text-[#F66868] font-bold text-base\">\r\n                  Ho√†n th√†nh xu·∫•t s·∫Øc! üéâ\r\n                </p>\r\n                <p className=\"text-[#F66868]/80 text-sm mt-1\">\r\n                  B·∫°n ƒë√£ chinh ph·ª•c gi√°o tr√¨nh n√†y\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Lesson List */}\r\n      <div className=\"space-y-2 max-h-[600px] overflow-y-auto pr-2\">\r\n        {lessons.map((lesson) => (\r\n          <div\r\n            key={lesson.id}\r\n            onClick={() => onSelectLesson?.(lesson.id)}\r\n            className={`p-3 rounded-xl border text-sm transition-all cursor-pointer backdrop-blur-sm\r\n    \r\n    ${\r\n      lesson.lesson_status === \"complete\"\r\n        ? \"border-green-400 bg-green-50 hover:bg-green-100\"\r\n        : \"hover:bg-rose-50 hover:border-[#F66868] \"\r\n    }          \r\n    ${\r\n      selectedLessonId === lesson.id\r\n        ? \"border-[#F66868] bg-[#F66868]/10 shadow-[0_0_8px_#F66868]/30\"\r\n        : \"\"\r\n    }\r\n    \r\n  `}\r\n          >\r\n            <div className=\"flex gap-3 items-center\">\r\n              <div className=\"flex-shrink-0 mt-0.5\">\r\n                {lesson.lesson_status === \"complete\" && (\r\n                  <CheckCircle2 className=\"h-5 w-5 text-green-500\" />\r\n                )}\r\n                {lesson.lesson_status === \"in-progress\" && (\r\n                  <Circle className=\"h-5 w-5 text-[#F66868] fill-[#F66868]/40 animate-pulse\" />\r\n                )}\r\n                {lesson.lesson_status === \"not_start\" && (\r\n                  <Circle className=\"h-5 w-5 text-gray-300\" />\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"flex w-full flex-row justify-between items-center\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p\r\n                    className={`text-sm font-medium truncate ${\r\n                      lesson.lesson_status === \"complete\"\r\n                        ? \"text-green-700\"\r\n                        : \"text-gray-900\"\r\n                    }`}\r\n                  >\r\n                    {lesson.title}\r\n                  </p>\r\n                  <p\r\n                    className={`text-xs mt-1 ${\r\n                      lesson.lesson_status === \"complete\"\r\n                        ? \"text-green-600/70\"\r\n                        : \"text-gray-500\"\r\n                    }`}\r\n                  >\r\n                    {lesson.vocabulary_count} t·ª´ v·ª±ng\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AAsCe,SAAS,gBAAgB,EACtC,OAAO,EACP,QAAQ,EACR,gBAAgB,EAChB,cAAc,EACO;IACrB,4DAA4D;IAC5D,MAAM,eAAe,QAAQ,MAAM;IACnC,MAAM,iBAAiB,QAAQ,MAAM,CACnC,CAAC,IAAM,EAAE,aAAa,KAAK,YAC3B,MAAM;IACR,QAAQ,GAAG,CAAC;IACZ,uCAAuC;IACvC,MAAM,kBAAkB,QAAQ,MAAM,CACpC,CAAC,KAAK,SAAW,MAAM,CAAC,OAAO,gBAAgB,IAAI,CAAC,GACpD;IAGF,MAAM,qBAAqB,QAAQ,MAAM,CACvC,CAAC,KAAK,SACJ,MAAM,CAAC,OAAO,aAAa,KAAK,aAAa,OAAO,gBAAgB,GAAG,CAAC,GAC1E;IAEF,MAAM,uBACJ,eAAe,IAAI,AAAC,iBAAiB,eAAgB,MAAM;IAE7D,MAAM,kBACJ,kBAAkB,IAAI,AAAC,qBAAqB,kBAAmB,MAAM;IACvE,qBACE,8QAAC;QAAI,WAAU;;0BAEb,8QAAC,wKAAI;gBAAC,WAAU;;kCAEd,8QAAC;wBAAI,WAAU;;;;;;kCACf,8QAAC;wBAAI,WAAU;;;;;;kCAEf,8QAAC,8KAAU;wBAAC,WAAU;kCACpB,cAAA,8QAAC;4BAAI,WAAU;;8CACb,8QAAC;oCAAI,WAAU;;sDACb,8QAAC;4CAAI,WAAU;;8DACb,8QAAC;oDAAI,WAAU;8DACb,cAAA,8QAAC,yQAAa;wDAAC,WAAU;;;;;;;;;;;8DAE3B,8QAAC;oDAAK,WAAU;8DAA+D;;;;;;;;;;;;sDAIjF,8QAAC,6KAAS;4CAAC,WAAU;sDAClB,UAAU,SAAS;;;;;;;;;;;;gCAGvB,YAAY,OAAO,SAAS,EAAE,IAAI,oBACjC,8QAAC,4KAAM;oCACL,MAAK;oCACL,SAAQ;oCACR,WAAU;;sDAEV,8QAAC,6PAAS;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;;;;;;;;;;;;kCAO9C,8QAAC,+KAAW;wBAAC,WAAU;;4BAEpB,UAAU,6BACT,8QAAC;gCAAI,WAAU;0CACb,cAAA,8QAAC;oCAAE,WAAU;8CACV,SAAS,WAAW;;;;;;;;;;;0CAM3B,8QAAC;gCAAI,WAAU;;kDAEb,8QAAC;wCAAI,WAAU;;0DACb,8QAAC;gDAAI,WAAU;0DACb,cAAA,8QAAC;oDAAI,WAAU;8DACb,cAAA,8QAAC,0PAAQ;wDAAC,WAAU;;;;;;;;;;;;;;;;0DAGxB,8QAAC;gDAAI,WAAU;;oDACZ;kEACD,8QAAC;wDAAK,WAAU;;4DAAwB;4DAAE;;;;;;;;;;;;;0DAE5C,8QAAC;gDAAI,WAAU;0DAAyC;;;;;;;;;;;;kDAM1D,8QAAC;wCAAI,WAAU;;0DACb,8QAAC;gDAAI,WAAU;0DACb,cAAA,8QAAC;oDAAI,WAAU;8DACb,cAAA,8QAAC,sPAAQ;wDAAC,WAAU;;;;;;;;;;;;;;;;0DAGxB,8QAAC;gDAAI,WAAU;;oDACZ;kEACD,8QAAC;wDAAK,WAAU;;4DAAwB;4DACpC;;;;;;;;;;;;;0DAGN,8QAAC;gDAAI,WAAU;0DAAyC;;;;;;;;;;;;;;;;;;0CAO5D,8QAAC;gCAAI,WAAU;;kDACb,8QAAC;wCAAI,WAAU;;0DACb,8QAAC;gDAAK,WAAU;0DAA8B;;;;;;0DAG9C,8QAAC;gDAAK,WAAU;;oDACb,KAAK,KAAK,CAAC;oDAAiB;;;;;;;;;;;;;kDAGjC,8QAAC;wCAAI,WAAU;kDACb,cAAA,8QAAC;4CACC,WAAU;4CACV,OAAO;gDAAE,OAAO,GAAG,gBAAgB,CAAC,CAAC;4CAAC;sDAEtC,cAAA,8QAAC;gDAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;4BAMpB,yBAAyB,qBACxB,8QAAC;gCAAI,WAAU;;kDACb,8QAAC;wCAAI,WAAU;;;;;;kDACf,8QAAC;wCAAI,WAAU;;0DACb,8QAAC,gPAAM;gDAAC,WAAU;;;;;;0DAClB,8QAAC;gDAAE,WAAU;0DAAqC;;;;;;0DAGlD,8QAAC;gDAAE,WAAU;0DAAiC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAUxD,8QAAC;gBAAI,WAAU;0BACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,8QAAC;wBAEC,SAAS,IAAM,iBAAiB,OAAO,EAAE;wBACzC,WAAW,CAAC;;IAEpB,EACE,OAAO,aAAa,KAAK,aACrB,oDACA,2CACL;IACD,EACE,qBAAqB,OAAO,EAAE,GAC1B,iEACA,GACL;;EAEH,CAAC;kCAES,cAAA,8QAAC;4BAAI,WAAU;;8CACb,8QAAC;oCAAI,WAAU;;wCACZ,OAAO,aAAa,KAAK,4BACxB,8QAAC,qQAAY;4CAAC,WAAU;;;;;;wCAEzB,OAAO,aAAa,KAAK,+BACxB,8QAAC,gPAAM;4CAAC,WAAU;;;;;;wCAEnB,OAAO,aAAa,KAAK,6BACxB,8QAAC,gPAAM;4CAAC,WAAU;;;;;;;;;;;;8CAItB,8QAAC;oCAAI,WAAU;8CACb,cAAA,8QAAC;wCAAI,WAAU;;0DACb,8QAAC;gDACC,WAAW,CAAC,6BAA6B,EACvC,OAAO,aAAa,KAAK,aACrB,mBACA,iBACJ;0DAED,OAAO,KAAK;;;;;;0DAEf,8QAAC;gDACC,WAAW,CAAC,aAAa,EACvB,OAAO,aAAa,KAAK,aACrB,sBACA,iBACJ;;oDAED,OAAO,gBAAgB;oDAAC;;;;;;;;;;;;;;;;;;;;;;;;uBAhD5B,OAAO,EAAE;;;;;;;;;;;;;;;;AA0D1B","debugId":null}},
    {"offset": {"line": 4102, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/lesson-tab.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Play,\r\n  CheckCircle2,\r\n  BookOpen,\r\n  Sparkles,\r\n  TrendingUp,\r\n} from \"lucide-react\";\r\nimport LessonPlayer from \"./lesson-player\";\r\nimport ProgressSidebar from \"./progress-sidebar\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\nimport { SyllabusInfo } from \"../../map/page\";\r\n\r\ntype LessonStatus = \"complete\" | \"in-progress\" | \"not_start\";\r\n\r\ninterface Lesson {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  vocabularyCount: number;\r\n  lesson_status: LessonStatus;\r\n  level: \"C∆° b·∫£n\";\r\n}\r\n\r\nexport default function LessonTab({\r\n  syllabus,\r\n}: {\r\n  syllabus: SyllabusInfo | undefined;\r\n}) {\r\n  const { user } = useUserStore();\r\n  const [lessons, setLessons] = useState<Lesson[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [selectedLesson, setSelectedLesson] = useState<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!syllabus?.id || !user?.id) {\r\n      setLessons([]);\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchLessons = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        const res = await fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/syllabuses/${syllabus.id}/lessons?user_id=${user.id}`\r\n        );\r\n        if (!res.ok) throw new Error(\"Failed to fetch lessons\");\r\n        const data: { lessons: Lesson[] } = await res.json();\r\n        setLessons(data.lessons || []);\r\n      } catch (e) {\r\n        console.error(e);\r\n        setLessons([]);\r\n      } finally {\r\n        setIsLoading(false);\r\n        setSelectedLesson(null);\r\n      }\r\n    };\r\n\r\n    fetchLessons();\r\n  }, [syllabus?.id, user?.id]);\r\n\r\n  const lessonToPlay = lessons.find((l) => l.id === selectedLesson);\r\n\r\n  if (selectedLesson && lessonToPlay) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={() => setSelectedLesson(null)}\r\n          className=\"mb-4 border-2 border-[#f66868] text-[#f66868] hover:text-white hover:bg-[#f66868] transition-all duration-300 font-semibold shadow-sm\"\r\n        >\r\n          ‚Üê Quay L·∫°i Danh S√°ch\r\n        </Button>\r\n        <LessonPlayer lesson={lessonToPlay} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-20\">\r\n        <div className=\"relative\">\r\n          <div className=\"w-16 h-16 border-4 border-rose-200 border-t-[#f66868] rounded-full animate-spin\"></div>\r\n          <Sparkles className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-6 w-6 text-[#f66868]\" />\r\n        </div>\r\n        <p className=\"mt-6 text-gray-600 font-medium text-lg\">\r\n          ƒêang t·∫£i b√†i h·ªçc...\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (lessons.length === 0) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-20 px-4\">\r\n        <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n          <BookOpen className=\"h-16 w-16 text-[#f66868]/60 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n            Ch∆∞a c√≥ b√†i h·ªçc\r\n          </h3>\r\n          <p className=\"text-gray-600\">\r\n            Kh√¥ng t√¨m th·∫•y b√†i h·ªçc n√†o cho ch·ªß ƒë·ªÅ n√†y.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const completed = lessons.filter(\r\n    (l) => l.lesson_status === \"complete\"\r\n  ).length;\r\n  const progress = (completed / lessons.length) * 100;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n      <div className=\"lg:col-span-2 space-y-8\">\r\n        {/* Progress Header */}\r\n        <div className=\"relative overflow-hidden rounded-3xl bg-gradient-to-br from-[#f66868] via-[#ff7b7b] to-[#ff8f8f] p-8 text-white shadow-xl\">\r\n          <div className=\"relative z-10\">\r\n            <div className=\"flex justify-between items-start\">\r\n              <div>\r\n                <h2 className=\"text-4xl font-bold mb-3\">B√†i H·ªçc</h2>\r\n                <p className=\"text-white/90 text-lg font-medium\">\r\n                  H·ªçc b√†i theo c√°ch l·ªô tr√¨nh c·ªßa b·∫°n\r\n                </p>\r\n              </div>\r\n              <div className=\"bg-white/20 rounded-2xl px-6 py-4 text-center border border-white/30\">\r\n                <div className=\"text-3xl font-bold\">\r\n                  {completed}/{lessons.length}\r\n                </div>\r\n                <div className=\"text-sm text-white/90 mt-1\">Ho√†n th√†nh</div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            <div className=\"mt-6\">\r\n              <div className=\"flex justify-between mb-2\">\r\n                <span className=\"text-sm font-semibold text-white/90\">\r\n                  Ti·∫øn ƒë·ªô h·ªçc t·∫≠p\r\n                </span>\r\n                <span className=\"text-sm font-bold\">\r\n                  {Math.round(progress)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"h-3 bg-white/20 rounded-full overflow-hidden\">\r\n                <div\r\n                  className=\"h-full bg-white rounded-full transition-all duration-1000 ease-out\"\r\n                  style={{ width: `${progress}%` }}\r\n                ></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Lessons Grid */}\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          {lessons.map((lesson, index) => {\r\n            const isComplete = lesson.lesson_status === \"complete\";\r\n            const isPlayable =\r\n              lesson.lesson_status === \"in-progress\" ||\r\n              lesson.lesson_status === \"not_start\";\r\n\r\n            return (\r\n              <Card\r\n                key={lesson.id}\r\n                onClick={() => setSelectedLesson(lesson.id)}\r\n                className={`group relative overflow-hidden rounded-3xl border-2 transition-all duration-500 hover:scale-[1.02] cursor-pointer \r\n                  ${\r\n                    isComplete\r\n                      ? \"border-emerald-200 hover:border-emerald-400 hover:shadow-[0_8px_30px_rgb(16,185,129,0.15)]\"\r\n                      : \"border-rose-100 hover:border-[#F66868] hover:shadow-[0_8px_30px_rgba(246,104,104,0.15)]\"\r\n                  }`}\r\n              >\r\n                {/* Hover Overlay */}\r\n                <div\r\n                  className={`absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ${\r\n                    isComplete\r\n                      ? \"bg-gradient-to-br from-emerald-50/50 to-green-50/50\"\r\n                      : \"bg-gradient-to-br from-rose-50/50 to-pink-50/50\"\r\n                  }`}\r\n                />\r\n\r\n                <CardHeader className=\"pt-6 pb-4 relative z-10\">\r\n                  <div className=\"flex justify-between items-start gap-4\">\r\n                    <div className=\"flex-1\">\r\n                      <div\r\n                        className={`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold mb-3 ${\r\n                          isComplete\r\n                            ? \"bg-emerald-100 text-emerald-700\"\r\n                            : \"bg-rose-100 text-[#f66868]\"\r\n                        }`}\r\n                      >\r\n                        <span>B√†i {index + 1}</span>\r\n                        {lesson.lesson_status === \"in-progress\" && (\r\n                          <TrendingUp className=\"h-3 w-3\" />\r\n                        )}\r\n                      </div>\r\n\r\n                      <CardTitle\r\n                        className={`text-xl font-bold leading-snug transition-colors ${\r\n                          isComplete\r\n                            ? \"text-emerald-600 group-hover:text-emerald-700\"\r\n                            : \"text-gray-800 group-hover:text-[#f66868]\"\r\n                        }`}\r\n                      >\r\n                        {lesson.title}\r\n                      </CardTitle>\r\n\r\n                      <p className=\"text-sm text-gray-600 mt-2 line-clamp-2\">\r\n                        {lesson.description}\r\n                      </p>\r\n                    </div>\r\n\r\n                    {isComplete && (\r\n                      <CheckCircle2 className=\"h-8 w-8 text-emerald-500 drop-shadow-sm\" />\r\n                    )}\r\n                  </div>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"space-y-4 pb-6 relative z-10\">\r\n                  <div className=\"flex items-center gap-2 text-sm text-gray-600\">\r\n                    <BookOpen className=\"h-4 w-4\" />\r\n                    <span className=\"font-medium\">\r\n                      {lesson.vocabularyCount} t·ª´ v·ª±ng\r\n                    </span>\r\n                  </div>\r\n\r\n                  <Button\r\n                    className={`w-full h-12 rounded-xl text-sm font-bold shadow-md hover:shadow-xl transition-all duration-300\r\n                      ${\r\n                        isComplete\r\n                          ? \"bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white\"\r\n                          : isPlayable\r\n                          ? \"bg-gradient-to-r from-[#F66868] to-[#ff7b7b] hover:from-[#f55555] hover:to-[#F66868] text-white\"\r\n                          : \"bg-gray-100 text-gray-500 cursor-not-allowed\"\r\n                      }`}\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      setSelectedLesson(lesson.id);\r\n                    }}\r\n                  >\r\n                    {isComplete && (\r\n                      <>\r\n                        <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n                        √în T·∫≠p\r\n                      </>\r\n                    )}\r\n                    {lesson.lesson_status === \"in-progress\" && (\r\n                      <>\r\n                        <Play className=\"h-4 w-4 mr-2\" />\r\n                        Ti·∫øp T·ª•c\r\n                      </>\r\n                    )}\r\n                    {lesson.lesson_status === \"not_start\" && (\r\n                      <>\r\n                        <Play className=\"h-4 w-4 mr-2\" />\r\n                        B·∫Øt ƒê·∫ßu\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                </CardContent>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"lg:col-span-1\">\r\n        <div className=\"sticky top-24\">\r\n          <ProgressSidebar\r\n            syllabus={syllabus}\r\n            lessons={lessons}\r\n            selectedLessonId={selectedLesson ?? undefined}\r\n            onSelectLesson={setSelectedLesson}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4640, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport RequireLogin from \"@/components/RequireLogin\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { User, useUserStore } from \"@/store/useUserStore\";\r\nimport { BookOpen, Hand, Zap } from \"lucide-react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport PracticeTab from \"./components/practice-tab\";\r\nimport LessonTab from \"./components/lesson-tab\";\r\nimport { removeBrackets } from \"@/lib/utils\";\r\nimport { SyllabusInfo } from \"../map/page\"; // (Assuming this path is correct)\r\n\r\nconst tempUser: User = {\r\n  id: \"1\",\r\n  name: \"Khanh An\",\r\n  email: \"iamyasou00@gmail.com\",\r\n  avatar: \"/avatar.png\",\r\n};\r\n\r\n// --- 1. CHANGE COMPONENT SIGNATURE ---\r\n// Accept 'params' which contains the { id: \"2\" } from the URL\r\nexport default function StudyPage({ params }: { params: { id: string } }) {\r\n  const { user, setUser } = useUserStore();\r\n  const [activeTab, setActiveTab] = useState(\"lessons\");\r\n  const [syllabuses, setSyllabuses] = useState<SyllabusInfo[]>([]);\r\n  const [selectedSyllabusId, setSelectedSyllabusId] = useState<string | null>(\r\n    null\r\n  );\r\n  const [isLoadingSyllabus, setIsLoadingSyllabus] = useState(true);\r\n\r\n  // --- 2. GET THE ID FROM PARAMS ---\r\n  // This effect sets the user\r\n  useEffect(() => {\r\n    setUser(tempUser);\r\n  }, [setUser]);\r\n\r\n  // This effect fetches data and sets the selected ID\r\n  useEffect(() => {\r\n    if (!user?.id) return;\r\n\r\n    const fetchSyllabuses = async () => {\r\n      try {\r\n        setIsLoadingSyllabus(true);\r\n        const response = await fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/syllabuses?user_id=${user.id}`\r\n        );\r\n        if (!response.ok) {\r\n          throw new Error(\"Failed to fetch syllabuses\");\r\n        }\r\n\r\n        const data: { syllabuses: SyllabusInfo[] } = await response.json();\r\n        const sortedSyllabuses = data.syllabuses.sort((a, b) => {\r\n          const isAIn2to11 = a.id >= 2 && a.id <= 11;\r\n          const isBIn2to11 = b.id >= 2 && b.id <= 11;\r\n\r\n          if (isAIn2to11 && !isBIn2to11) return 1; // a goes after b\r\n          if (!isAIn2to11 && isBIn2to11) return -1; // a goes before b\r\n          return a.id - b.id; // both in same group, sort ascending\r\n        });\r\n        // --- 3. FIX: SET ALL SYLLABUSES FOR THE DROPDOWN ---\r\n        // Do not filter the list, just set the full sorted list\r\n        setSyllabuses(sortedSyllabuses);\r\n\r\n        // --- 4. NEW SELECTION LOGIC (PRIORITIZED) ---\r\n\r\n        // Check if the ID from the URL is valid\r\n      } catch (error) {\r\n        console.error(\"Error fetching syllabuses:\", error);\r\n      } finally {\r\n        setIsLoadingSyllabus(false);\r\n      }\r\n    };\r\n\r\n    fetchSyllabuses();\r\n\r\n    // --- 5. ADD 'urlSyllabusId' TO DEPENDENCY ARRAY ---\r\n    // This ensures the component reacts if the URL ID changes\r\n  }, [user]);\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"flex flex-col justify-center items-center w-full h-screen\">\r\n        <RequireLogin />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-background to-secondary/20\">\r\n      {/* Header */}\r\n      <header className=\"sticky top-0 z-50 border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\r\n        <div className=\"container mx-auto px-4 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"flex h-10 w-10 items-center justify-center rounded-lg bg-[#f66868] text-primary-foreground\">\r\n                <Hand className=\"h-6 w-6\" />\r\n              </div>\r\n              <h1 className=\"text-2xl text-[#f66868] font-bold\">H·ªçc K√≠ Hi·ªáu</h1>\r\n            </div>\r\n            <Tabs\r\n              value={activeTab}\r\n              onValueChange={setActiveTab}\r\n              className=\"w-fit text-3xl\"\r\n            >\r\n              <TabsList className=\"grid w-fit grid-cols-2 lg:inline-grid gap-4 mx-auto p-1.5 rounded-full shadow-inner h-fit bg-rose-50/70 border-2 border-rose-200/60\">\r\n                <TabsTrigger\r\n                  value=\"lessons\"\r\n                  className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-rose-600 rounded-full transition-all duration-300 hover:bg-[#F66868]/10 data-[state=active]:bg-[#F66868] data-[state=active]:text-white data-[state=active]:shadow-[0_0_8px_#F66868] cursor-pointer\"\r\n                >\r\n                  <BookOpen className=\"h-4 w-4\" />\r\n                  <span className=\"hidden sm:inline \">B√†i H·ªçc</span>\r\n                </TabsTrigger>\r\n\r\n                <TabsTrigger\r\n                  value=\"practice\"\r\n                  className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-rose-600 rounded-full transition-all duration-300 hover:bg-[#F66868]/10 data-[state=active]:bg-[#F66868] data-[state=active]:text-white data-[state=active]:shadow-[0_0_8px_#F66868] cursor-pointer\"\r\n                >\r\n                  <Zap className=\"h-4 w-4\" />\r\n                  <span className=\"hidden sm:inline\">Luy·ªán T·∫≠p</span>\r\n                </TabsTrigger>\r\n              </TabsList>\r\n            </Tabs>\r\n            {/* --- SYLLABUS PICKING UI --- */}\r\n            <div>\r\n              {isLoadingSyllabus ? (\r\n                <div className=\"h-10 w-[280px] animate-pulse rounded-full bg-gray-200\" />\r\n              ) : (\r\n                <Select\r\n                  value={selectedSyllabusId || \"\"}\r\n                  onValueChange={setSelectedSyllabusId}\r\n                  defaultValue=\"Ch·ªçn ch·ªß ƒë·ªÅ\"\r\n                >\r\n                  <SelectTrigger\r\n                    className=\"w-[280px] gap-2 rounded-full border-2 \r\n                                       border-rose-200/60 bg-rose-50/70 text-rose-600 shadow-inner \r\n                                       hover:bg-rose-100 focus:ring-rose-500\"\r\n                  >\r\n                    <SelectValue placeholder=\"Ch·ªçn ch·ªß ƒë·ªÅ\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {syllabuses.map((syllabus) => (\r\n                      <SelectItem\r\n                        key={syllabus.id}\r\n                        value={syllabus.id.toString()}\r\n                        disabled={syllabus.status === \"locked\"}\r\n                      >\r\n                        {removeBrackets(syllabus.title)}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"container mx-auto px-4 py-8\">\r\n        <Tabs\r\n          value={activeTab}\r\n          onValueChange={setActiveTab}\r\n          className=\"w-full text-3xl\"\r\n        >\r\n          <TabsContent value=\"lessons\" className=\"space-y-6\">\r\n            <LessonTab\r\n              syllabus={syllabuses.find(\r\n                (syllabus) => syllabus.id === Number(selectedSyllabusId)\r\n              )}\r\n            />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"practice\" className=\"space-y-6\">\r\n            <PracticeTab syllabusId={selectedSyllabusId} />\r\n          </TabsContent>\r\n        </Tabs>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}