{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/RequireLogin/index.tsx"],"sourcesContent":["import Image from \"next/image\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function RequireLogin() {\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-full bg-white p-8\">\r\n      <div></div>\r\n      <Image\r\n        src=\"/study_desk.svg\"\r\n        alt=\"Login required illustration\"\r\n        height={360}\r\n        width={360}\r\n        className=\"mb-10 2xl:hidden\"\r\n      />\r\n      <Image\r\n        src=\"/study_desk.svg\"\r\n        alt=\"Login required illustration\"\r\n        height={540}\r\n        width={540}\r\n        className=\"mb-10 hidden 2xl:flex\"\r\n      />\r\n      <h1 className=\"text-2xl xl:text-4xl font-bold text-gray-800 mb-2\">\r\n        Bạn chưa đăng nhập\r\n      </h1>\r\n      <p className=\"text-gray-600 mb-6 xl:text-xl\">\r\n        Hãy đăng nhập để sử dụng tất cả các tính năng.\r\n      </p>\r\n      <Link\r\n        href=\"/login\"\r\n        className=\"px-6 py-3 bg-[#F66868] text-white rounded-xl shadow-md hover:bg-[#F66868]/70 transition-all duration-300\"\r\n      >\r\n        Đăng nhập ngay\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,SAAS;IACtB,qBACE,8QAAC;QAAI,WAAU;;0BACb,8QAAC;;;;;0BACD,8QAAC,wKAAK;gBACJ,KAAI;gBACJ,KAAI;gBACJ,QAAQ;gBACR,OAAO;gBACP,WAAU;;;;;;0BAEZ,8QAAC,wKAAK;gBACJ,KAAI;gBACJ,KAAI;gBACJ,QAAQ;gBACR,OAAO;gBACP,WAAU;;;;;;0BAEZ,8QAAC;gBAAG,WAAU;0BAAoD;;;;;;0BAGlE,8QAAC;gBAAE,WAAU;0BAAgC;;;;;;0BAG7C,8QAAC,uMAAI;gBACH,MAAK;gBACL,WAAU;0BACX;;;;;;;;;;;;AAKP","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\nexport function formatActor(name: string) {\r\n  if (name == \"teacher_agent\") return \"Mini Wave Teacher\";\r\n  else \"Agent\";\r\n}\r\n\r\nexport function removeBrackets(text: string): string {\r\n  // Remove anything inside parentheses (and the parentheses)\r\n  return text.replace(/\\s*\\(.*?\\)/g, \"\").trim();\r\n}\r\n/**\r\n * Formats an ISO time string into a \"time ago\" format.\r\n * @param timeString The ISO 8601 timestamp (e.g., \"2025-10-25T12:30:44.488876\")\r\n */\r\nexport function formatTime(timeString: string): string {\r\n  const time = new Date(timeString);\r\n  const now = new Date();\r\n\r\n  // Get the difference in seconds\r\n  const seconds = Math.floor((now.getTime() - time.getTime()) / 1000);\r\n\r\n  // Less than 5 seconds\r\n  if (seconds < 5) {\r\n    return \"just now\";\r\n  }\r\n\r\n  // Less than 1 minute\r\n  if (seconds < 60) {\r\n    return `${seconds} seconds ago`;\r\n  }\r\n\r\n  // Less than 1 hour\r\n  const minutes = Math.floor(seconds / 60);\r\n  if (minutes < 60) {\r\n    return `${minutes} minute${minutes > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  // Less than 1 day\r\n  const hours = Math.floor(minutes / 60);\r\n  if (hours < 24) {\r\n    return `${hours} hour${hours > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  // Less than 1 month\r\n  const days = Math.floor(hours / 24);\r\n  if (days < 30) {\r\n    return `${days} day${days > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  // Less than 1 year\r\n  const months = Math.floor(days / 30);\r\n  if (months < 12) {\r\n    return `${months} month${months > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  // Years\r\n  const years = Math.floor(months / 12);\r\n  return `${years} year${years > 1 ? \"s\" : \"\"} ago`;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sMAAO,EAAC,IAAA,6KAAI,EAAC;AACtB;AAEO,SAAS,YAAY,IAAY;IACtC,IAAI,QAAQ,iBAAiB,OAAO;SAC/B;AACP;AAEO,SAAS,eAAe,IAAY;IACzC,2DAA2D;IAC3D,OAAO,KAAK,OAAO,CAAC,eAAe,IAAI,IAAI;AAC7C;AAKO,SAAS,WAAW,UAAkB;IAC3C,MAAM,OAAO,IAAI,KAAK;IACtB,MAAM,MAAM,IAAI;IAEhB,gCAAgC;IAChC,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,IAAI,OAAO,KAAK,KAAK,OAAO,EAAE,IAAI;IAE9D,sBAAsB;IACtB,IAAI,UAAU,GAAG;QACf,OAAO;IACT;IAEA,qBAAqB;IACrB,IAAI,UAAU,IAAI;QAChB,OAAO,GAAG,QAAQ,YAAY,CAAC;IACjC;IAEA,mBAAmB;IACnB,MAAM,UAAU,KAAK,KAAK,CAAC,UAAU;IACrC,IAAI,UAAU,IAAI;QAChB,OAAO,GAAG,QAAQ,OAAO,EAAE,UAAU,IAAI,MAAM,GAAG,IAAI,CAAC;IACzD;IAEA,kBAAkB;IAClB,MAAM,QAAQ,KAAK,KAAK,CAAC,UAAU;IACnC,IAAI,QAAQ,IAAI;QACd,OAAO,GAAG,MAAM,KAAK,EAAE,QAAQ,IAAI,MAAM,GAAG,IAAI,CAAC;IACnD;IAEA,oBAAoB;IACpB,MAAM,OAAO,KAAK,KAAK,CAAC,QAAQ;IAChC,IAAI,OAAO,IAAI;QACb,OAAO,GAAG,KAAK,IAAI,EAAE,OAAO,IAAI,MAAM,GAAG,IAAI,CAAC;IAChD;IAEA,mBAAmB;IACnB,MAAM,SAAS,KAAK,KAAK,CAAC,OAAO;IACjC,IAAI,SAAS,IAAI;QACf,OAAO,GAAG,OAAO,MAAM,EAAE,SAAS,IAAI,MAAM,GAAG,IAAI,CAAC;IACtD;IAEA,QAAQ;IACR,MAAM,QAAQ,KAAK,KAAK,CAAC,SAAS;IAClC,OAAO,GAAG,MAAM,KAAK,EAAE,QAAQ,IAAI,MAAM,GAAG,IAAI,CAAC;AACnD","debugId":null}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Tabs({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\r\n  return (\r\n    <TabsPrimitive.Root\r\n      data-slot=\"tabs\"\r\n      className={cn(\"flex flex-col gap-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsList({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\r\n  return (\r\n    <TabsPrimitive.List\r\n      data-slot=\"tabs-list\"\r\n      className={cn(\r\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsTrigger({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\r\n  return (\r\n    <TabsPrimitive.Trigger\r\n      data-slot=\"tabs-trigger\"\r\n      className={cn(\r\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\r\n  return (\r\n    <TabsPrimitive.Content\r\n      data-slot=\"tabs-content\"\r\n      className={cn(\"flex-1 outline-none\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8QAAC,wMAAkB;QACjB,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8QAAC,wMAAkB;QACjB,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8QAAC,2MAAqB;QACpB,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8QAAC,2MAAqB;QACpB,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Select({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\r\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\r\n}\r\n\r\nfunction SelectGroup({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\r\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\r\n}\r\n\r\nfunction SelectValue({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\r\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\r\n}\r\n\r\nfunction SelectTrigger({\r\n  className,\r\n  size = \"default\",\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\r\n  size?: \"sm\" | \"default\"\r\n}) {\r\n  return (\r\n    <SelectPrimitive.Trigger\r\n      data-slot=\"select-trigger\"\r\n      data-size={size}\r\n      className={cn(\r\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <SelectPrimitive.Icon asChild>\r\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\r\n      </SelectPrimitive.Icon>\r\n    </SelectPrimitive.Trigger>\r\n  )\r\n}\r\n\r\nfunction SelectContent({\r\n  className,\r\n  children,\r\n  position = \"popper\",\r\n  align = \"center\",\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        data-slot=\"select-content\"\r\n        className={cn(\r\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md\",\r\n          position === \"popper\" &&\r\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n          className\r\n        )}\r\n        position={position}\r\n        align={align}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            \"p-1\",\r\n            position === \"popper\" &&\r\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  )\r\n}\r\n\r\nfunction SelectLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\r\n  return (\r\n    <SelectPrimitive.Label\r\n      data-slot=\"select-label\"\r\n      className={cn(\"text-muted-foreground px-2 py-1.5 text-xs\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectItem({\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\r\n  return (\r\n    <SelectPrimitive.Item\r\n      data-slot=\"select-item\"\r\n      className={cn(\r\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\r\n        <SelectPrimitive.ItemIndicator>\r\n          <CheckIcon className=\"size-4\" />\r\n        </SelectPrimitive.ItemIndicator>\r\n      </span>\r\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n    </SelectPrimitive.Item>\r\n  )\r\n}\r\n\r\nfunction SelectSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\r\n  return (\r\n    <SelectPrimitive.Separator\r\n      data-slot=\"select-separator\"\r\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectScrollUpButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollUpButton\r\n      data-slot=\"select-scroll-up-button\"\r\n      className={cn(\r\n        \"flex cursor-default items-center justify-center py-1\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronUpIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollUpButton>\r\n  )\r\n}\r\n\r\nfunction SelectScrollDownButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollDownButton\r\n      data-slot=\"select-scroll-down-button\"\r\n      className={cn(\r\n        \"flex cursor-default items-center justify-center py-1\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronDownIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollDownButton>\r\n  )\r\n}\r\n\r\nexport {\r\n  Select,\r\n  SelectContent,\r\n  SelectGroup,\r\n  SelectItem,\r\n  SelectLabel,\r\n  SelectScrollDownButton,\r\n  SelectScrollUpButton,\r\n  SelectSeparator,\r\n  SelectTrigger,\r\n  SelectValue,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8QAAC,0MAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8QAAC,2MAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8QAAC,2MAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,8QAAC,6MAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,yJAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,8QAAC,0MAAoB;gBAAC,OAAO;0BAC3B,cAAA,8QAAC,2QAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,QAAQ,QAAQ,EAChB,GAAG,OACkD;IACrD,qBACE,8QAAC,4MAAsB;kBACrB,cAAA,8QAAC,6MAAuB;YACtB,aAAU;YACV,WAAW,IAAA,yJAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACV,OAAO;YACN,GAAG,KAAK;;8BAET,8QAAC;;;;;8BACD,8QAAC,8MAAwB;oBACvB,WAAW,IAAA,yJAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,8QAAC;;;;;;;;;;;;;;;;AAIT;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8QAAC,2MAAqB;QACpB,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,8QAAC,0MAAoB;QACnB,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,8QAAC;gBAAK,WAAU;0BACd,cAAA,8QAAC,mNAA6B;8BAC5B,cAAA,8QAAC,qPAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,8QAAC,8MAAwB;0BAAE;;;;;;;;;;;;AAGjC;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,8QAAC,+MAAyB;QACxB,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,8QAAC,oNAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8QAAC,qQAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,8QAAC,sNAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,8QAAC,2QAAe;YAAC,WAAU;;;;;;;;;;;AAGjC","debugId":null}},
    {"offset": {"line": 447, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-0 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 549, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-[#C73B3B] text-primary-foreground hover:bg-[#C33D3D]/80 transition-all duration-500 cursor-pointer\",\r\n        destructive:\r\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n        \"icon-sm\": \"size-8\",\r\n        \"icon-lg\": \"size-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean;\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\";\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uMAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wMAAI,GAAG;IAE9B,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 608, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\r\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8QAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 633, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uMAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,wMAAI,GAAG;IAE9B,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 679, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/quiz-player.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  CardTitle,\r\n  CardDescription,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, XCircle, CheckCircle2, Trophy } from \"lucide-react\";\r\nimport { PracticeItem } from \"./practice-tab\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\n\r\n// --- Types for Question API ---\r\ninterface Option {\r\n  id: number;\r\n  option_text: string;\r\n  is_correct: boolean;\r\n}\r\n\r\ninterface Question {\r\n  id: number;\r\n  question_text: string;\r\n  video: string;\r\n  type: \"mcq\" | \"true_false\";\r\n  options: Option[];\r\n}\r\n\r\ninterface LessonQuizResponse {\r\n  quiz_id: number | null;\r\n  questions: Question[];\r\n}\r\n\r\ninterface QuizPlayerProps {\r\n  quiz: PracticeItem;\r\n  onBack: (shouldRefetch: boolean) => void; // <-- SỬA 1: Thêm tham số boolean\r\n}\r\n\r\nexport default function QuizPlayer({ quiz, onBack }: QuizPlayerProps) {\r\n  // --- State cho việc tải câu hỏi ---\r\n  const [questions, setQuestions] = useState<Question[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // --- State cho quá trình làm quiz ---\r\n  const [phase, setPhase] = useState<\"quiz\" | \"results\">(\"quiz\");\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);\r\n  const [showQuizResult, setShowQuizResult] = useState(false);\r\n  const [isQuizCorrect, setIsQuizCorrect] = useState(false);\r\n  const [score, setScore] = useState(0);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const { user } = useUserStore();\r\n\r\n  // --- 1. Tải câu hỏi ---\r\n  useEffect(() => {\r\n    if (!quiz.lesson_id) {\r\n      setIsLoading(false);\r\n      setError(\"Bài quiz này không liên kết với bài học nào.\");\r\n      return;\r\n    }\r\n\r\n    const fetchQuestions = async () => {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      try {\r\n        const res = await fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/lesson-quiz?lesson_id=${quiz.lesson_id}`\r\n        );\r\n        if (!res.ok) throw new Error(\"Không thể tải câu hỏi.\");\r\n        const data: LessonQuizResponse = await res.json();\r\n        if (!data.questions || data.questions.length === 0) {\r\n          throw new Error(\"Bài quiz này chưa có câu hỏi.\");\r\n        }\r\n        setQuestions(data.questions);\r\n      } catch (e: any) {\r\n        setError(e.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchQuestions();\r\n  }, [quiz.lesson_id]);\r\n\r\n  // --- 2. Logic xử lý quiz ---\r\n  if (questions.length === 0 && !isLoading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-16 px-4\">\r\n        <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n          <XCircle className=\"h-16 w-16 text-red-500 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n            Đã xảy ra lỗi\r\n          </h3>\r\n          <p className=\"text-gray-600\">{error || \"Không có câu hỏi.\"}</p>\r\n          <Button\r\n            onClick={() => onBack(false)} // <-- SỬA 2: Gửi 'false'\r\n            variant=\"outline\"\r\n            className=\"mt-4\"\r\n          >\r\n            Quay lại\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-32\">\r\n        <Loader2 className=\"h-12 w-12 animate-spin text-[#F66868]\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const currentQuestion = questions[currentQuestionIndex];\r\n  const correctAnswerIndex =\r\n    currentQuestion?.options.findIndex((opt) => opt.is_correct) ?? -1;\r\n\r\n  const handleQuizAnswer = (selectedIndex: number) => {\r\n    if (showQuizResult) return;\r\n    const correctOption = currentQuestion.options.find((opt) => opt.is_correct);\r\n    const selectedOption = currentQuestion.options[selectedIndex];\r\n    const isCorrect = correctOption?.id === selectedOption?.id;\r\n\r\n    setSelectedAnswer(selectedIndex);\r\n    setIsQuizCorrect(isCorrect);\r\n    setShowQuizResult(true);\r\n\r\n    if (isCorrect) {\r\n      setScore((prevScore) => prevScore + 100 / questions.length);\r\n    }\r\n  };\r\n\r\n  const handleNextQuestion = () => {\r\n    if (!showQuizResult) return;\r\n    setShowQuizResult(false);\r\n    setSelectedAnswer(null);\r\n    if (currentQuestionIndex < questions.length - 1) {\r\n      setCurrentQuestionIndex((prev) => prev + 1);\r\n    }\r\n  };\r\n\r\n  const handleQuizEnd = async () => {\r\n    if (!quiz.user_quiz_id || !user?.id) {\r\n      console.error(\r\n        \"Thiếu ID lượt làm bài (user_quiz_id) hoặc ID người dùng. Không thể nộp điểm.\"\r\n      );\r\n      setError(\"Lỗi: Không thể nộp điểm. Vui lòng tải lại.\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n    const finalScore = Math.round(score);\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_SERVER_URL}/api/quiz/submit`,\r\n        {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            quiz_id: quiz.user_quiz_id,\r\n            user_id: parseInt(user.id),\r\n            score: finalScore,\r\n            lesson_id: quiz.lesson_id,\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errData = await response.json();\r\n        throw new Error(errData.detail || \"Lỗi khi nộp bài\");\r\n      }\r\n\r\n      await response.json();\r\n      setPhase(\"results\");\r\n    } catch (err: any) {\r\n      console.error(\"Lỗi API nộp bài:\", err);\r\n      setError(err.message);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // --- 3. Render các trạng thái ---\r\n\r\n  if (error && !isSubmitting) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-16 px-4\">\r\n        <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n          <XCircle className=\"h-16 w-16 text-red-500 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n            Đã xảy ra lỗi\r\n          </h3>\r\n          <p className=\"text-gray-600\">{error}</p>\r\n          <Button\r\n            onClick={() => onBack(false)} // <-- SỬA 3: Gửi 'false'\r\n            variant=\"outline\"\r\n            className=\"mt-4\"\r\n          >\r\n            Quay lại\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- Màn hình KẾT QUẢ ---\r\n  if (phase === \"results\") {\r\n    return (\r\n      <div className=\"max-w-3xl mx-auto p-4 py-12\">\r\n        <Card className=\"overflow-hidden rounded-3xl shadow-xl\">\r\n          <CardHeader className=\"text-center bg-gradient-to-br from-[#f66868] to-[#ff8f8f] text-white p-8\">\r\n            <Trophy className=\"h-20 w-20 mx-auto\" />\r\n            <CardTitle className=\"text-4xl font-bold mt-4\">\r\n              Hoàn thành!\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"p-8 text-center\">\r\n            <div className=\"text-7xl font-bold text-[#F66868]\">\r\n              {score.toFixed(0)}\r\n              <span className=\"text-4xl text-gray-500 ml-2\">điểm</span>\r\n            </div>\r\n            <p className=\"text-lg text-gray-600 mt-4\">\r\n              Cảm ơn bạn đã hoàn thành bài luyện tập.\r\n            </p>\r\n            <Button\r\n              onClick={() => onBack(true)} // <-- SỬA 4: Gửi 'true'\r\n              className=\"w-full h-12 rounded-xl font-bold transition-all duration-300 shadow-md hover:shadow-lg mt-10 bg-[#F66868] hover:bg-[#F66868]/90\"\r\n            >\r\n              Quay về trang Luyện tập\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- Màn hình LÀM QUIZ ---\r\n  return (\r\n    <div className=\"space-y-6 max-w-3xl mx-auto\">\r\n      <Button\r\n        variant=\"outline\"\r\n        onClick={() => onBack(false)} // <-- SỬA 5: Gửi 'false'\r\n        className=\"border-2 border-[#f66868] text-[#f66868] hover:text-white hover:bg-[#f66868] transition-all duration-300 font-semibold shadow-sm\"\r\n      >\r\n        ← Quay Lại Danh Sách\r\n      </Button>\r\n\r\n      {/* Progress Bar */}\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex justify-between text-sm font-medium text-gray-600\">\r\n          <span>{quiz.title}</span>\r\n          <span>\r\n            Câu {currentQuestionIndex + 1} / {questions.length}\r\n          </span>\r\n        </div>\r\n        <div className=\"h-3 rounded-full bg-rose-100 overflow-hidden\">\r\n          <div\r\n            className=\"h-full bg-gradient-to-r from-[#F66868] to-[#ff7b7b] transition-all duration-500\"\r\n            style={{\r\n              width: `${\r\n                ((currentQuestionIndex + 1) / questions.length) * 100\r\n              }%`,\r\n            }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* UI Làm Quiz */}\r\n      <Card className=\"overflow-hidden border-2 shadow-sm\">\r\n        {/* ... (Phần còn lại của CardHeader và CardContent không đổi) ... */}\r\n        <CardHeader className=\"border-b-2 py-2 px-4\">\r\n          <div className=\"flex justify-between items-start\">\r\n            <div>\r\n              <CardTitle className=\"text-lg font-semibold text-foreground\">\r\n                {currentQuestion.question_text}\r\n              </CardTitle>\r\n              {currentQuestion.video && (\r\n                <CardDescription className=\"text-xs mt-0.5\">\r\n                  Xem video và chọn đáp án đúng\r\n                </CardDescription>\r\n              )}\r\n            </div>\r\n            <Badge className=\"bg-[#f66868]/10 text-[#f66868] border border-[#f66868]/30 text-[11px] py-0.5 px-2\">\r\n              Kiểm Tra\r\n            </Badge>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"pt-4 space-y-4 px-4 pb-4\">\r\n          {currentQuestion.video && (\r\n            <div className=\"relative rounded-lg overflow-hidden aspect-video bg-rose-50 shadow-inner\">\r\n              <video\r\n                key={currentQuestion.id}\r\n                src={currentQuestion.video}\r\n                className=\"w-full h-full object-cover\"\r\n                autoPlay\r\n                loop\r\n                muted\r\n              />\r\n              <div className=\"absolute top-0 left-0 h-full w-48 bg-white z-10\"></div>\r\n              <div className=\"absolute top-0 right-0 h-full w-48 bg-white z-10\"></div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            {currentQuestion.options.map((option, index) => (\r\n              <button\r\n                key={option.id}\r\n                onClick={() => handleQuizAnswer(index)}\r\n                disabled={showQuizResult}\r\n                className={`group w-full rounded-lg overflow-hidden border transition-all duration-300 disabled:opacity-60 disabled:cursor-not-allowed ${\r\n                  showQuizResult && selectedAnswer === index\r\n                    ? option.is_correct\r\n                      ? \"border-green-500 ring-2 ring-green-500/50\"\r\n                      : \"border-red-500 ring-2 ring-red-500/50\"\r\n                    : !showQuizResult && selectedAnswer === index\r\n                    ? \"border-[#f66868] ring-2 ring-[#f66868]/50\"\r\n                    : \"border-gray-200 hover:border-[#f66868]/70\"\r\n                }`}\r\n              >\r\n                <div\r\n                  className={`p-3 bg-white border-t text-sm font-medium text-center transition-all duration-300 ${\r\n                    showQuizResult && selectedAnswer === index\r\n                      ? option.is_correct\r\n                        ? \"text-green-700 font-bold\"\r\n                        : \"text-red-700 font-bold\"\r\n                      : !showQuizResult && selectedAnswer === index\r\n                      ? \"text-[#f66868] font-bold\"\r\n                      : \"text-gray-700 group-hover:text-[#f66868]\"\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center justify-center gap-2\">\r\n                    {showQuizResult && selectedAnswer === index && (\r\n                      <>\r\n                        {option.is_correct ? (\r\n                          <CheckCircle2 className=\"w-5 h-5 text-green-600\" />\r\n                        ) : (\r\n                          <XCircle className=\"w-5 h-5 text-red-600\" />\r\n                        )}\r\n                      </>\r\n                    )}\r\n                    <span>{option.option_text}</span>\r\n                  </div>\r\n                </div>\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {showQuizResult && (\r\n            <div\r\n              className={`p-3 rounded-md border text-sm ${\r\n                isQuizCorrect\r\n                  ? \"bg-green-50 border-green-200 text-green-800\"\r\n                  : \"bg-red-50 border-red-200 text-red-800\"\r\n              }`}\r\n            >\r\n              <p className=\"font-semibold mb-0.5\">\r\n                {isQuizCorrect ? \"Tuyệt vời!\" : \"Chưa đúng\"}\r\n              </p>\r\n              <p className=\"text-xs leading-snug\">\r\n                {isQuizCorrect\r\n                  ? `Đúng rồi! Đây là kí hiệu cho \"${currentQuestion.options[correctAnswerIndex]?.option_text}\".`\r\n                  : `Đáp án đúng là \"${currentQuestion.options[correctAnswerIndex]?.option_text}\". Hãy thử lại nhé!`}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {error && isSubmitting && (\r\n            <p className=\"text-sm text-red-600 text-center\">{error}</p>\r\n          )}\r\n\r\n          {showQuizResult && (\r\n            <Button\r\n              onClick={\r\n                currentQuestionIndex === questions.length - 1\r\n                  ? handleQuizEnd\r\n                  : handleNextQuestion\r\n              }\r\n              disabled={isSubmitting}\r\n              className={`w-full h-12 rounded-xl font-bold transition-all duration-300 shadow-md hover:shadow-lg ${\r\n                isQuizCorrect\r\n                  ? \"bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white\"\r\n                  : \"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white\"\r\n              }`}\r\n            >\r\n              {currentQuestionIndex === questions.length - 1 ? (\r\n                isSubmitting ? (\r\n                  <Loader2 className=\"animate-spin\" />\r\n                ) : (\r\n                  \"Hoàn thành Quiz\"\r\n                )\r\n              ) : (\r\n                \"Câu tiếp theo\"\r\n              )}\r\n            </Button>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1289, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/practice-tab.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useMemo, useEffect } from \"react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  Zap,\r\n  Search,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Target,\r\n  Trophy,\r\n  Filter,\r\n  X,\r\n  Loader2,\r\n} from \"lucide-react\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\nimport QuizPlayer from \"./quiz-player\";\r\n\r\n// 1. Define the type for the API response data\r\ntype PracticeItemStatus = \"in_progress\" | \"completed\";\r\n\r\n// --- 2. EXPORT TYPE ĐỂ QUIZPLAYER CÓ THỂ SỬ DỤNG ---\r\nexport interface PracticeItem {\r\n  quiz_id: number;\r\n  title: string;\r\n  description: string | null;\r\n  lesson_id: number;\r\n  total_points: number;\r\n  user_quiz_id: number;\r\n  score: number;\r\n  status: PracticeItemStatus;\r\n  started_at: string;\r\n  submitted_at: string | null;\r\n}\r\n\r\n// ... (const statusOptions, ITEMS_PER_PAGE)\r\nconst statusOptions: { value: PracticeItemStatus; label: string }[] = [\r\n  { value: \"in_progress\", label: \"Đang làm\" },\r\n  { value: \"completed\", label: \"Đã hoàn thành\" },\r\n];\r\n// ------------------------------\r\n\r\nconst ITEMS_PER_PAGE = 4;\r\nexport default function PracticeTab() {\r\n  // --- State for API data ---\r\n  const [practiceItems, setPracticeItems] = useState<PracticeItem[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const { user } = useUserStore();\r\n\r\n  // --- 3. THÊM STATE ĐỂ CHỌN QUIZ ---\r\n  const [selectedQuiz, setSelectedQuiz] = useState<PracticeItem | null>(null);\r\n\r\n  // --- State for filters and pagination ---\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [selectStatus, setSelectStatus] = useState<PracticeItemStatus | null>(\r\n    null\r\n  );\r\n  const fetchPracticeItems = async () => {\r\n    if (!user) {\r\n      setIsLoading(false);\r\n      setError(\"Không tìm thấy thông tin người dùng. Vui lòng đăng nhập lại.\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true); // Luôn đặt loading khi fetch\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_SERVER_URL}/api/quizzes?user_id=${user.id}`\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const data: { quizzes: PracticeItem[] } = await response.json();\r\n      const transformedData = data.quizzes.map((item) => ({\r\n        ...item,\r\n        score: Number(item.score),\r\n      }));\r\n      setPracticeItems(transformedData);\r\n    } catch (err: any) {\r\n      setError(err.message || \"Failed to fetch practice items.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  // ... (useEffect fetchPracticeItems - không thay đổi)\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchPracticeItems();\r\n    } else {\r\n      // Xử lý nếu không có user\r\n      setIsLoading(false);\r\n      setError(\"Không tìm thấy thông tin người dùng. Vui lòng đăng nhập lại.\");\r\n    }\r\n  }, [user]);\r\n\r\n  // ... (filteredItems, totalPages, startIndex, paginatedItems, handlers - không thay đổi)\r\n  const filteredItems = useMemo(() => {\r\n    return practiceItems.filter((item) => {\r\n      const matchesSearch =\r\n        item.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        (item.description &&\r\n          item.description.toLowerCase().includes(searchQuery.toLowerCase()));\r\n\r\n      const matchesStatus = !selectStatus || item.status === selectStatus;\r\n\r\n      return matchesSearch && matchesStatus;\r\n    });\r\n  }, [practiceItems, searchQuery, selectStatus]);\r\n\r\n  const totalPages = Math.ceil(filteredItems.length / ITEMS_PER_PAGE);\r\n  const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;\r\n  const paginatedItems = filteredItems.slice(\r\n    startIndex,\r\n    startIndex + ITEMS_PER_PAGE\r\n  );\r\n\r\n  const handleSearchChange = (value: string) => {\r\n    setSearchQuery(value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleStatusFilter = (status: PracticeItemStatus) => {\r\n    setSelectStatus(selectStatus === status ? null : status);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  // ... (averageScore, totalCompleted - không thay đổi)\r\n  const completedQuizzes = practiceItems.filter(\r\n    (item) => item.status === \"completed\"\r\n  );\r\n\r\n  const totalCompleted = completedQuizzes.length;\r\n\r\n  const averageScore = useMemo(() => {\r\n    if (completedQuizzes.length === 0) {\r\n      return 0;\r\n    }\r\n    const totalScore = completedQuizzes.reduce(\r\n      (acc, item) => acc + item.score,\r\n      0\r\n    );\r\n    return totalScore / completedQuizzes.length;\r\n  }, [completedQuizzes]);\r\n\r\n  // --- 4. CẬP NHẬT RENDER LOGIC ---\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-32\">\r\n        <Loader2 className=\"h-12 w-12 animate-spin text-[#F66868]\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    // ... (error UI - không thay đổi)\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-16 px-4\">\r\n        <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n          <X className=\"h-16 w-16 text-red-500 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n            Đã xảy ra lỗi\r\n          </h3>\r\n          <p className=\"text-gray-600\">{error}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- 5. LOGIC RENDER MỚI (giống hệt LessonTab) ---\r\n  if (selectedQuiz) {\r\n    return (\r\n      <QuizPlayer\r\n        quiz={selectedQuiz}\r\n        onBack={(shouldRefetch: boolean) => {\r\n          setSelectedQuiz(null); // 1. Luôn quay lại danh sách\r\n          if (shouldRefetch) {\r\n            // 2. Chỉ fetch lại nếu được yêu cầu (quiz đã hoàn thành)\r\n            fetchPracticeItems();\r\n          }\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  // --- 6. Đây là UI danh sách quiz (return mặc định) ---\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* --- HEADER: Updated Stats Grid --- */}\r\n      {/* ... (Code header không thay đổi) ... */}\r\n      <div className=\"relative overflow-hidden rounded-3xl bg-gradient-to-br from-[#f66868] via-[#ff7b7b] to-[#ff8f8f] p-8 text-white shadow-xl hover:scale-105 transition-all duration-500 cursor-pointer\">\r\n        <div className=\"relative z-10\">\r\n          <div className=\"flex flex-col md:flex-row md:items-end md:justify-between gap-6\">\r\n            <div>\r\n              <h2 className=\"text-4xl font-bold mb-3 tracking-tight\">\r\n                Luyện Tập\r\n              </h2>\r\n              <p className=\"text-white/90 text-lg font-medium\">\r\n                Cải thiện kỹ năng với các bài tập tương tác thú vị\r\n              </p>\r\n            </div>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"bg-white/20 backdrop-blur-sm rounded-2xl px-4 py-3 text-center border border-white/30\">\r\n                <Target className=\"h-5 w-5 mx-auto mb-1\" />\r\n                <div className=\"text-2xl font-bold\">{totalCompleted}</div>\r\n                <div className=\"text-xs text-white/90\">Hoàn thành</div>\r\n              </div>\r\n              <div className=\"bg-white/20 backdrop-blur-sm rounded-2xl px-4 py-3 text-center border border-white/30\">\r\n                <Trophy className=\"h-5 w-5 mx-auto mb-1\" />\r\n                <div className=\"text-2xl font-bold\">\r\n                  {averageScore.toFixed(0)}\r\n                </div>\r\n                <div className=\"text-xs text-white/90\">Điểm TB</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Decorative Elements */}\r\n        <div className=\"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-32 -mt-32\"></div>\r\n        <div className=\"absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full blur-3xl -ml-24 -mb-24\"></div>\r\n      </div>\r\n\r\n      {/* Search and Filters */}\r\n      {/* ... (Code search/filter không thay đổi) ... */}\r\n      <div className=\"space-y-4\">\r\n        {/* Search Bar (no change) */}\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n          <Input\r\n            type=\"text\"\r\n            placeholder=\"Tìm kiếm bài tập theo tên hoặc mô tả...\"\r\n            value={searchQuery}\r\n            onChange={(e) => handleSearchChange(e.target.value)}\r\n            className=\"pl-12 pr-12 h-14 rounded-2xl border-2 border-rose-100 focus:border-[#F66868] text-base shadow-sm\"\r\n          />\r\n          {searchQuery && (\r\n            <button\r\n              onClick={() => handleSearchChange(\"\")}\r\n              className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors\"\r\n            >\r\n              <X className=\"h-5 w-5\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* --- CHANGED: Status Filters --- */}\r\n        <div className=\"bg-gradient-to-r from-rose-50/50 to-pink-50/50 rounded-2xl p-5 border-2 border-rose-100/60 shadow-sm\">\r\n          <div className=\"flex items-center gap-3 flex-wrap\">\r\n            <div className=\"flex items-center gap-2.5 text-sm font-bold text-gray-800 bg-white px-4 py-2 rounded-xl shadow-sm border border-rose-100\">\r\n              <Filter className=\"h-4 w-4 text-[#F66868]\" />\r\n              Trạng thái:\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2 flex-wrap\">\r\n              {statusOptions.map((status) => (\r\n                <Button\r\n                  key={status.value}\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleStatusFilter(status.value)}\r\n                  className={`rounded-xl font-semibold transition-all duration-300 border-2 shadow-sm hover:scale-105 hover:shadow-md cursor-pointer ${\r\n                    selectStatus === status.value\r\n                      ? status.value === \"completed\"\r\n                        ? \"bg-gradient-to-r from-emerald-500 to-green-500 text-white border-emerald-400 hover:from-emerald-600 hover:to-green-600 ring-2 ring-emerald-200\"\r\n                        : \"bg-[#F66868] text-white hover:bg-[#F66868]/80 ring-2 ring-[#F66868]\"\r\n                      : \"border-rose-200 bg-white text-gray-700 hover:border-[#F66868] hover:bg-rose-50 hover:text-[#F66868]\"\r\n                  }`}\r\n                >\r\n                  {status.label}\r\n                </Button>\r\n              ))}\r\n            </div>\r\n\r\n            {selectStatus && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => setSelectStatus(null)}\r\n                className=\"ml-auto text-gray-500 hover:text-[#F66868] hover:bg-rose-50 rounded-xl font-semibold transition-all duration-300 border-2 border-transparent hover:border-rose-200 cursor-pointer\"\r\n              >\r\n                <X className=\"h-4 w-4 mr-1\" />\r\n                Xóa bộ lọc\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Results count (no change) */}\r\n        <div className=\"text-sm text-gray-600\">\r\n          Tìm thấy{\" \"}\r\n          <span className=\"font-bold text-[#F66868]\">\r\n            {filteredItems.length}\r\n          </span>{\" \"}\r\n          bài tập\r\n        </div>\r\n      </div>\r\n\r\n      {/* 7. Cards Grid (Updated with API data) */}\r\n      {paginatedItems.length > 0 ? (\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          {paginatedItems.map((item) => {\r\n            const isComplete = item.status === \"completed\";\r\n            const progress =\r\n              100 > 0 ? (item.score / 100) * 100 : isComplete ? 100 : 0;\r\n            const clampedProgress = Math.min(100, Math.max(0, progress));\r\n\r\n            return (\r\n              <Card\r\n                key={item.user_quiz_id}\r\n                // --- 7. THAY ĐỔI NHỎ: BỎ CLICK Ở ĐÂY ---\r\n                // onClick={() => setSelectedQuiz(item)} // Chúng ta sẽ đặt click vào Button\r\n                className={`group overflow-hidden border-2 rounded-3xl bg-gradient-to-br transition-all duration-500 py-6 ${\r\n                  isComplete\r\n                    ? \"from-emerald-50 to-green-50/50 border-emerald-200\"\r\n                    : \"from-white to-rose-50/40 border-rose-100\"\r\n                }\r\n                // --- Xóa hover effect ở card ngoài ---\r\n                // hover:scale-[1.02] cursor-pointer \r\n                // hover:border-emerald-400 hover:shadow-[0_8px_30px_rgb(16,185,129,0.15)]\r\n                // hover:border-[#F66868] hover:shadow-[0_8px_30px_rgba(246,104,104,0.15)]\r\n                `}\r\n              >\r\n                {/* ... (CardHeader, CardContent - không thay đổi) ... */}\r\n                <CardHeader className=\"pb-4\">\r\n                  <div className=\"flex items-start justify-between gap-3\">\r\n                    <div className=\"flex-1\">\r\n                      <CardTitle\r\n                        className={`text-xl font-bold mb-2 transition-colors ${\r\n                          isComplete ? \"text-emerald-600\" : \"text-gray-900\" // Xóa group-hover\r\n                        }`}\r\n                      >\r\n                        {item.title}\r\n                      </CardTitle>\r\n                      <CardDescription className=\"text-sm text-gray-600 leading-relaxed\">\r\n                        {item.description ||\r\n                          \"Hoàn thành bài tập này để củng cố kiến thức của bạn.\"}\r\n                      </CardDescription>\r\n                    </div>\r\n\r\n                    <div\r\n                      className={`flex items-center gap-1.5 px-3 py-2 rounded-xl font-bold shadow-sm ${\r\n                        isComplete\r\n                          ? \"bg-emerald-100 text-emerald-700\"\r\n                          : \"bg-rose-100 text-[#F66868]\"\r\n                      }`}\r\n                    >\r\n                      <Zap\r\n                        className={`h-4 w-4 ${\r\n                          isComplete ? \"fill-emerald-400\" : \"fill-[#F66868]/40\"\r\n                        }`}\r\n                      />\r\n                      {item.score}\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"space-y-4\">\r\n                  {/* Progress (using score and total_points) */}\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex items-center justify-between text-sm\">\r\n                      <span className=\"text-gray-600 font-medium\">Điểm</span>\r\n                      <span\r\n                        className={`font-bold ${\r\n                          isComplete ? \"text-emerald-600\" : \"text-[#F66868]\"\r\n                        }`}\r\n                      >\r\n                        {item.score.toFixed(0)} / {100}\r\n                      </span>\r\n                    </div>\r\n                    <div\r\n                      className={`h-3 rounded-full overflow-hidden shadow-inner ${\r\n                        isComplete ? \"bg-emerald-100\" : \"bg-rose-100\"\r\n                      }`}\r\n                    >\r\n                      <div\r\n                        className={`h-full transition-all duration-700 rounded-full relative ${\r\n                          isComplete\r\n                            ? \"bg-gradient-to-r from-emerald-500 to-green-500\"\r\n                            : \"bg-gradient-to-r from-[#F66868] to-[#ff7b7b]\"\r\n                        }`}\r\n                        style={{ width: `${clampedProgress}%` }}\r\n                      >\r\n                        {clampedProgress > 0 && clampedProgress < 100 && (\r\n                          <div className=\"absolute inset-0 bg-white/30 animate-pulse\"></div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* --- 8. ĐẶT ONCLICK VÀO ĐÂY --- */}\r\n                  <Button\r\n                    onClick={() => setSelectedQuiz(item)} // <--- THAY ĐỔI QUAN TRỌNG\r\n                    className={`w-full h-12 rounded-xl font-bold transition-all duration-300 shadow-md hover:shadow-lg hover:scale-[1.03] ${\r\n                      isComplete\r\n                        ? \"bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white\"\r\n                        : item.status === \"in_progress\"\r\n                        ? \"bg-gradient-to-r from-[#F66868] to-[#ff7b7b] hover:from-[#f55555] hover:to-[#F66868] text-white\"\r\n                        : \"bg-gradient-to-r from-rose-100 to-pink-100 text-rose-700 hover:from-rose-200 hover:to-pink-200\"\r\n                    }`}\r\n                  >\r\n                    {isComplete\r\n                      ? \"🎉 Ôn Luyện Lại\"\r\n                      : item.status === \"in_progress\"\r\n                      ? \"Tiếp Tục Luyện Tập →\"\r\n                      : \"Bắt Đầu Luyện Tập\"}\r\n                  </Button>\r\n                </CardContent>\r\n\r\n                <div\r\n                  className={`absolute -top-8 -right-8 w-24 h-24 rounded-full opacity-10 ${\r\n                    isComplete ? \"bg-emerald-400\" : \"bg-[#F66868]\"\r\n                  }`}\r\n                ></div>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        // ... (No Results Found - không thay đổi)\r\n        <div className=\"flex flex-col items-center justify-center py-16 px-4\">\r\n          <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n            <Search className=\"h-16 w-16 text-[#f66868]/60 mx-auto mb-4\" />\r\n            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n              Không tìm thấy bài tập\r\n            </h3>\r\n            <p className=\"text-gray-600\">\r\n              Thử điều chỉnh từ khóa tìm kiếm hoặc bộ lọc của bạn\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Pagination (no changes) */}\r\n      {/* ... (Code Pagination không thay đổi) ... */}\r\n      {filteredItems.length > ITEMS_PER_PAGE && (\r\n        <div className=\"flex items-center justify-center gap-2 pt-4\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"lg\"\r\n            onClick={() => setCurrentPage((prev) => Math.max(1, prev - 1))}\r\n            disabled={currentPage === 1}\r\n            className=\"rounded-xl disabled:cursor-not-allowed\"\r\n          >\r\n            <ChevronLeft className=\"h-4 w-4 mr-1\" />\r\n            Trước\r\n          </Button>\r\n\r\n          <div className=\"flex items-center gap-1\">\r\n            {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n              <Button\r\n                key={page}\r\n                variant={currentPage === page ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                onClick={() => setCurrentPage(page)}\r\n                className={`w-10 h-10 rounded-xl transition-all duration-300 ${\r\n                  currentPage === page\r\n                    ? \"bg-[#F66868] text-white hover:bg-[#F66868]/90 shadow-md\"\r\n                    : \"border-2 border-rose-200 text-gray-700 hover:border-[#F66868] hover:bg-rose-50\"\r\n                }`}\r\n              >\r\n                {page}\r\n              </Button>\r\n            ))}\r\n          </div>\r\n\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() =>\r\n              setCurrentPage((prev) => Math.min(totalPages, prev + 1))\r\n            }\r\n            disabled={currentPage === totalPages}\r\n            className=\"rounded-xl disabled:cursor-not-allowed\"\r\n          >\r\n            Sau\r\n            <ChevronRight className=\"h-4 w-4 ml-1\" />\r\n          </Button>\r\n        </div>\r\n      )}\r\n\r\n      {/* --- 9. XÓA BỎ HOÀN TOÀN KHỐI CODE QUIZ UI Ở ĐÂY --- */}\r\n      {/* {phase === \"quiz\" && ... } <--- TOÀN BỘ KHỐI NÀY ĐÃ ĐƯỢC CHUYỂN SANG QUIZPLAYER.TSX */}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAOA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AAzBA;;;;;;;;;AA4CA,4CAA4C;AAC5C,MAAM,gBAAgE;IACpE;QAAE,OAAO;QAAe,OAAO;IAAW;IAC1C;QAAE,OAAO;QAAa,OAAO;IAAgB;CAC9C;AACD,iCAAiC;AAEjC,MAAM,iBAAiB;AACR,SAAS;IACtB,6BAA6B;IAC7B,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iPAAQ,EAAiB,EAAE;IACrE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iPAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iPAAQ,EAAgB;IAClD,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,4KAAY;IAE7B,qCAAqC;IACrC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iPAAQ,EAAsB;IAEtE,2CAA2C;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iPAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iPAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iPAAQ,EAC9C;IAEF,MAAM,qBAAqB;QACzB,IAAI,CAAC,MAAM;YACT,aAAa;YACb,SAAS;YACT;QACF;QAEA,aAAa,OAAO,6BAA6B;QACjD,IAAI;YACF,MAAM,WAAW,MAAM,MACrB,6DAAsC,qBAAqB,EAAE,KAAK,EAAE,EAAE;YAExE,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;YAC1D;YACA,MAAM,OAAoC,MAAM,SAAS,IAAI;YAC7D,MAAM,kBAAkB,KAAK,OAAO,CAAC,GAAG,CAAC,CAAC,OAAS,CAAC;oBAClD,GAAG,IAAI;oBACP,OAAO,OAAO,KAAK,KAAK;gBAC1B,CAAC;YACD,iBAAiB;QACnB,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,aAAa;QACf;IACF;IACA,sDAAsD;IACtD,IAAA,kPAAS,EAAC;QACR,IAAI,MAAM;YACR;QACF,OAAO;YACL,0BAA0B;YAC1B,aAAa;YACb,SAAS;QACX;IACF,GAAG;QAAC;KAAK;IAET,yFAAyF;IACzF,MAAM,gBAAgB,IAAA,gPAAO,EAAC;QAC5B,OAAO,cAAc,MAAM,CAAC,CAAC;YAC3B,MAAM,gBACJ,KAAK,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW,OACxD,KAAK,WAAW,IACf,KAAK,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,WAAW;YAEnE,MAAM,gBAAgB,CAAC,gBAAgB,KAAK,MAAM,KAAK;YAEvD,OAAO,iBAAiB;QAC1B;IACF,GAAG;QAAC;QAAe;QAAa;KAAa;IAE7C,MAAM,aAAa,KAAK,IAAI,CAAC,cAAc,MAAM,GAAG;IACpD,MAAM,aAAa,CAAC,cAAc,CAAC,IAAI;IACvC,MAAM,iBAAiB,cAAc,KAAK,CACxC,YACA,aAAa;IAGf,MAAM,qBAAqB,CAAC;QAC1B,eAAe;QACf,eAAe;IACjB;IAEA,MAAM,qBAAqB,CAAC;QAC1B,gBAAgB,iBAAiB,SAAS,OAAO;QACjD,eAAe;IACjB;IAEA,sDAAsD;IACtD,MAAM,mBAAmB,cAAc,MAAM,CAC3C,CAAC,OAAS,KAAK,MAAM,KAAK;IAG5B,MAAM,iBAAiB,iBAAiB,MAAM;IAE9C,MAAM,eAAe,IAAA,gPAAO,EAAC;QAC3B,IAAI,iBAAiB,MAAM,KAAK,GAAG;YACjC,OAAO;QACT;QACA,MAAM,aAAa,iBAAiB,MAAM,CACxC,CAAC,KAAK,OAAS,MAAM,KAAK,KAAK,EAC/B;QAEF,OAAO,aAAa,iBAAiB,MAAM;IAC7C,GAAG;QAAC;KAAiB;IAErB,mCAAmC;IAEnC,IAAI,WAAW;QACb,qBACE,8QAAC;YAAI,WAAU;sBACb,cAAA,8QAAC,4PAAO;gBAAC,WAAU;;;;;;;;;;;IAGzB;IAEA,IAAI,OAAO;QACT,kCAAkC;QAClC,qBACE,8QAAC;YAAI,WAAU;sBACb,cAAA,8QAAC;gBAAI,WAAU;;kCACb,8QAAC,iOAAC;wBAAC,WAAU;;;;;;kCACb,8QAAC;wBAAG,WAAU;kCAAuC;;;;;;kCAGrD,8QAAC;wBAAE,WAAU;kCAAiB;;;;;;;;;;;;;;;;;IAItC;IAEA,oDAAoD;IACpD,IAAI,cAAc;QAChB,qBACE,8QAAC,wMAAU;YACT,MAAM;YACN,QAAQ,CAAC;gBACP,gBAAgB,OAAO,6BAA6B;gBACpD,IAAI,eAAe;oBACjB,yDAAyD;oBACzD;gBACF;YACF;;;;;;IAGN;IAEA,wDAAwD;IACxD,qBACE,8QAAC;QAAI,WAAU;;0BAGb,8QAAC;gBAAI,WAAU;;kCACb,8QAAC;wBAAI,WAAU;kCACb,cAAA,8QAAC;4BAAI,WAAU;;8CACb,8QAAC;;sDACC,8QAAC;4CAAG,WAAU;sDAAyC;;;;;;sDAGvD,8QAAC;4CAAE,WAAU;sDAAoC;;;;;;;;;;;;8CAMnD,8QAAC;oCAAI,WAAU;;sDACb,8QAAC;4CAAI,WAAU;;8DACb,8QAAC,gPAAM;oDAAC,WAAU;;;;;;8DAClB,8QAAC;oDAAI,WAAU;8DAAsB;;;;;;8DACrC,8QAAC;oDAAI,WAAU;8DAAwB;;;;;;;;;;;;sDAEzC,8QAAC;4CAAI,WAAU;;8DACb,8QAAC,gPAAM;oDAAC,WAAU;;;;;;8DAClB,8QAAC;oDAAI,WAAU;8DACZ,aAAa,OAAO,CAAC;;;;;;8DAExB,8QAAC;oDAAI,WAAU;8DAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAO/C,8QAAC;wBAAI,WAAU;;;;;;kCACf,8QAAC;wBAAI,WAAU;;;;;;;;;;;;0BAKjB,8QAAC;gBAAI,WAAU;;kCAEb,8QAAC;wBAAI,WAAU;;0CACb,8QAAC,gPAAM;gCAAC,WAAU;;;;;;0CAClB,8QAAC,0KAAK;gCACJ,MAAK;gCACL,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;gCAClD,WAAU;;;;;;4BAEX,6BACC,8QAAC;gCACC,SAAS,IAAM,mBAAmB;gCAClC,WAAU;0CAEV,cAAA,8QAAC,iOAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAMnB,8QAAC;wBAAI,WAAU;kCACb,cAAA,8QAAC;4BAAI,WAAU;;8CACb,8QAAC;oCAAI,WAAU;;sDACb,8QAAC,gPAAM;4CAAC,WAAU;;;;;;wCAA2B;;;;;;;8CAI/C,8QAAC;oCAAI,WAAU;8CACZ,cAAc,GAAG,CAAC,CAAC,uBAClB,8QAAC,4KAAM;4CAEL,SAAQ;4CACR,MAAK;4CACL,SAAS,IAAM,mBAAmB,OAAO,KAAK;4CAC9C,WAAW,CAAC,uHAAuH,EACjI,iBAAiB,OAAO,KAAK,GACzB,OAAO,KAAK,KAAK,cACf,mJACA,wEACF,uGACJ;sDAED,OAAO,KAAK;2CAZR,OAAO,KAAK;;;;;;;;;;gCAiBtB,8BACC,8QAAC,4KAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,SAAS,IAAM,gBAAgB;oCAC/B,WAAU;;sDAEV,8QAAC,iOAAC;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;;;;;;;;;;;;kCAQtC,8QAAC;wBAAI,WAAU;;4BAAwB;4BAC5B;0CACT,8QAAC;gCAAK,WAAU;0CACb,cAAc,MAAM;;;;;;4BACf;4BAAI;;;;;;;;;;;;;YAMf,eAAe,MAAM,GAAG,kBACvB,8QAAC;gBAAI,WAAU;0BACZ,eAAe,GAAG,CAAC,CAAC;oBACnB,MAAM,aAAa,KAAK,MAAM,KAAK;oBACnC,MAAM,WACJ,MAAM,IAAI,AAAC,KAAK,KAAK,GAAG,MAAO,MAAM,aAAa,MAAM;oBAC1D,MAAM,kBAAkB,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG;oBAElD,qBACE,8QAAC,wKAAI;wBAEH,0CAA0C;wBAC1C,4EAA4E;wBAC5E,WAAW,CAAC,8FAA8F,EACxG,aACI,sDACA,2CACL;;;;;gBAKD,CAAC;;0CAGD,8QAAC,8KAAU;gCAAC,WAAU;0CACpB,cAAA,8QAAC;oCAAI,WAAU;;sDACb,8QAAC;4CAAI,WAAU;;8DACb,8QAAC,6KAAS;oDACR,WAAW,CAAC,yCAAyC,EACnD,aAAa,qBAAqB,gBAAgB,kBAAkB;sDACpE;8DAED,KAAK,KAAK;;;;;;8DAEb,8QAAC,mLAAe;oDAAC,WAAU;8DACxB,KAAK,WAAW,IACf;;;;;;;;;;;;sDAIN,8QAAC;4CACC,WAAW,CAAC,mEAAmE,EAC7E,aACI,oCACA,8BACJ;;8DAEF,8QAAC,uOAAG;oDACF,WAAW,CAAC,QAAQ,EAClB,aAAa,qBAAqB,qBAClC;;;;;;gDAEH,KAAK,KAAK;;;;;;;;;;;;;;;;;;0CAKjB,8QAAC,+KAAW;gCAAC,WAAU;;kDAErB,8QAAC;wCAAI,WAAU;;0DACb,8QAAC;gDAAI,WAAU;;kEACb,8QAAC;wDAAK,WAAU;kEAA4B;;;;;;kEAC5C,8QAAC;wDACC,WAAW,CAAC,UAAU,EACpB,aAAa,qBAAqB,kBAClC;;4DAED,KAAK,KAAK,CAAC,OAAO,CAAC;4DAAG;4DAAI;;;;;;;;;;;;;0DAG/B,8QAAC;gDACC,WAAW,CAAC,8CAA8C,EACxD,aAAa,mBAAmB,eAChC;0DAEF,cAAA,8QAAC;oDACC,WAAW,CAAC,yDAAyD,EACnE,aACI,mDACA,gDACJ;oDACF,OAAO;wDAAE,OAAO,GAAG,gBAAgB,CAAC,CAAC;oDAAC;8DAErC,kBAAkB,KAAK,kBAAkB,qBACxC,8QAAC;wDAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;kDAOvB,8QAAC,4KAAM;wCACL,SAAS,IAAM,gBAAgB;wCAC/B,WAAW,CAAC,0GAA0G,EACpH,aACI,wGACA,KAAK,MAAM,KAAK,gBAChB,oGACA,kGACJ;kDAED,aACG,oBACA,KAAK,MAAM,KAAK,gBAChB,yBACA;;;;;;;;;;;;0CAIR,8QAAC;gCACC,WAAW,CAAC,2DAA2D,EACrE,aAAa,mBAAmB,gBAChC;;;;;;;uBAvGC,KAAK,YAAY;;;;;gBA2G5B;;;;;uBAGF,0CAA0C;0BAC1C,8QAAC;gBAAI,WAAU;0BACb,cAAA,8QAAC;oBAAI,WAAU;;sCACb,8QAAC,gPAAM;4BAAC,WAAU;;;;;;sCAClB,8QAAC;4BAAG,WAAU;sCAAuC;;;;;;sCAGrD,8QAAC;4BAAE,WAAU;sCAAgB;;;;;;;;;;;;;;;;;YASlC,cAAc,MAAM,GAAG,gCACtB,8QAAC;gBAAI,WAAU;;kCACb,8QAAC,4KAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS,IAAM,eAAe,CAAC,OAAS,KAAK,GAAG,CAAC,GAAG,OAAO;wBAC3D,UAAU,gBAAgB;wBAC1B,WAAU;;0CAEV,8QAAC,mQAAW;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;kCAI1C,8QAAC;wBAAI,WAAU;kCACZ,MAAM,IAAI,CAAC;4BAAE,QAAQ;wBAAW,GAAG,CAAC,GAAG,IAAM,IAAI,GAAG,GAAG,CAAC,CAAC,qBACxD,8QAAC,4KAAM;gCAEL,SAAS,gBAAgB,OAAO,YAAY;gCAC5C,MAAK;gCACL,SAAS,IAAM,eAAe;gCAC9B,WAAW,CAAC,iDAAiD,EAC3D,gBAAgB,OACZ,4DACA,kFACJ;0CAED;+BAVI;;;;;;;;;;kCAeX,8QAAC,4KAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS,IACP,eAAe,CAAC,OAAS,KAAK,GAAG,CAAC,YAAY,OAAO;wBAEvD,UAAU,gBAAgB;wBAC1B,WAAU;;4BACX;0CAEC,8QAAC,sQAAY;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;AASpC","debugId":null}},
    {"offset": {"line": 2068, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        \"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",\n        className\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-[#F66868] h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  );\n}\n\nexport { Progress };\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD;IACpD,qBACE,8QAAC,4MAAsB;QACrB,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,8QAAC,iNAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE","debugId":null}},
    {"offset": {"line": 2106, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/tooltip.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction TooltipProvider({\r\n  delayDuration = 0,\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {\r\n  return (\r\n    <TooltipPrimitive.Provider\r\n      data-slot=\"tooltip-provider\"\r\n      delayDuration={delayDuration}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction Tooltip({\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Root>) {\r\n  return (\r\n    <TooltipProvider>\r\n      <TooltipPrimitive.Root data-slot=\"tooltip\" {...props} />\r\n    </TooltipProvider>\r\n  )\r\n}\r\n\r\nfunction TooltipTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {\r\n  return <TooltipPrimitive.Trigger data-slot=\"tooltip-trigger\" {...props} />\r\n}\r\n\r\nfunction TooltipContent({\r\n  className,\r\n  sideOffset = 0,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Content>) {\r\n  return (\r\n    <TooltipPrimitive.Portal>\r\n      <TooltipPrimitive.Content\r\n        data-slot=\"tooltip-content\"\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n        <TooltipPrimitive.Arrow className=\"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\" />\r\n      </TooltipPrimitive.Content>\r\n    </TooltipPrimitive.Portal>\r\n  )\r\n}\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,gBAAgB,EACvB,gBAAgB,CAAC,EACjB,GAAG,OACoD;IACvD,qBACE,8QAAC,+MAAyB;QACxB,aAAU;QACV,eAAe;QACd,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,QAAQ,EACf,GAAG,OACgD;IACnD,qBACE,8QAAC;kBACC,cAAA,8QAAC,2MAAqB;YAAC,aAAU;YAAW,GAAG,KAAK;;;;;;;;;;;AAG1D;AAEA,SAAS,eAAe,EACtB,GAAG,OACmD;IACtD,qBAAO,8QAAC,8MAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,aAAa,CAAC,EACd,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,8QAAC,6MAAuB;kBACtB,cAAA,8QAAC,8MAAwB;YACvB,aAAU;YACV,YAAY;YACZ,WAAW,IAAA,yJAAE,EACX,qaACA;YAED,GAAG,KAAK;;gBAER;8BACD,8QAAC,4MAAsB;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI1C","debugId":null}},
    {"offset": {"line": 2250, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/MarkdownRender/index.tsx"],"sourcesContent":["// components/MarkdownRenderer.tsx\r\nimport React from \"react\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport remarkGfm from \"remark-gfm\";\r\n\r\ninterface MarkdownRendererProps {\r\n  content: string;\r\n  className?: string;\r\n}\r\n\r\nexport default function MarkdownRenderer({\r\n  content,\r\n  className,\r\n}: MarkdownRendererProps) {\r\n  return (\r\n    <div className={`prose prose-rose max-w-none leading-relaxed ${className}`}>\r\n      <ReactMarkdown remarkPlugins={[remarkGfm]}>{content}</ReactMarkdown>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;AAElC;AACA;;;;AAOe,SAAS,iBAAiB,EACvC,OAAO,EACP,SAAS,EACa;IACtB,qBACE,8QAAC;QAAI,WAAW,CAAC,4CAA4C,EAAE,WAAW;kBACxE,cAAA,8QAAC,mOAAa;YAAC,eAAe;gBAAC,wLAAS;aAAC;sBAAG;;;;;;;;;;;AAGlD","debugId":null}},
    {"offset": {"line": 2284, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/VocabularyInfo/index.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Bookmark,\r\n  Check,\r\n  Share,\r\n  Video,\r\n  Image as ImageIcon,\r\n  Sparkles,\r\n  Camera,\r\n  Loader2,\r\n} from \"lucide-react\";\r\n// --- THÊM useCallback ---\r\nimport { useEffect, useState, useRef, useCallback } from \"react\";\r\n// ---\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\nimport MarkdownRenderer from \"../MarkdownRender\";\r\n\r\n// --- Cấu hình WebSocket ---\r\nconst WEBSOCKET_URL = \"ws://localhost:8001/ws/predict-stream/\";\r\n\r\n// --- THAY ĐỔI 1: CẬP NHẬT LÊN 20 FPS ---\r\n// 1000ms / 20 FPS = 50ms\r\nconst FRAME_INTERVAL_MS = 50;\r\n// ---\r\n\r\ninterface VocabularyInfoProps {\r\n  word: string;\r\n  partOfSpeech?: string;\r\n  definition?: string;\r\n  videoUrl?: string;\r\n  imageUrl?: string;\r\n}\r\n\r\ninterface SignPrediction {\r\n  label_text: string;\r\n  confidence: number;\r\n}\r\n\r\nexport default function VocabularyInfo({\r\n  word,\r\n  partOfSpeech,\r\n  definition,\r\n  videoUrl,\r\n  imageUrl,\r\n}: VocabularyInfoProps) {\r\n  const [bookmarked, setBookmarked] = useState(false);\r\n  const [isShare, setIsShare] = useState(false);\r\n  const [mediaMode, setMediaMode] = useState<\"video\" | \"image\">(\r\n    videoUrl ? \"video\" : \"image\"\r\n  );\r\n  const [showContext, setShowContext] = useState(false);\r\n  const [isLoadingContext, setIsLoadingContext] = useState(false);\r\n  const [contextText, setContextText] = useState(\"\");\r\n  const [sessionId, setSessionId] = useState<string | null>(null);\r\n  const [isCameraActive, setIsCameraActive] = useState(false);\r\n  const { user } = useUserStore();\r\n\r\n  const [prediction, setPrediction] = useState<SignPrediction | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [framesCollected, setFramesCollected] = useState(0);\r\n  const [framesNeeded, setFramesNeeded] = useState(30);\r\n\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const streamRef = useRef<MediaStream | null>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const wsRef = useRef<WebSocket | null>(null);\r\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // --- HÀM GỬI KHUNG HÌNH (GIỮ NGUYÊN) ---\r\n  const sendFrame = () => {\r\n    if (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\r\n      console.log(\"WebSocket not ready, state:\", wsRef.current?.readyState);\r\n      return;\r\n    }\r\n\r\n    if (!videoRef.current || !canvasRef.current) {\r\n      console.log(\"Video or canvas ref not ready\");\r\n      return;\r\n    }\r\n\r\n    const video = videoRef.current;\r\n\r\n    // Check if video is ready\r\n    if (\r\n      video.videoWidth === 0 ||\r\n      video.videoHeight === 0 ||\r\n      video.readyState < 2\r\n    ) {\r\n      console.log(\"Video not ready yet:\", {\r\n        width: video.videoWidth,\r\n        height: video.videoHeight,\r\n        readyState: video.readyState,\r\n      });\r\n      return;\r\n    }\r\n\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    if (!context) {\r\n      console.log(\"Canvas context not available\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n      const frameData = canvas.toDataURL(\"image/jpeg\", 0.8);\r\n\r\n      console.log(\"Sending frame, size:\", frameData.length);\r\n      wsRef.current.send(frameData);\r\n    } catch (err) {\r\n      console.error(\"Error sending frame:\", err);\r\n    }\r\n  };\r\n  // ---\r\n\r\n  // --- HÀM DỌN DẸP (GIỮ NGUYÊN) ---\r\n  const cleanupCamera = useCallback(() => {\r\n    console.log(\"Đang chạy dọn dẹp camera...\");\r\n\r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n    if (wsRef.current) {\r\n      wsRef.current.onclose = null;\r\n      wsRef.current.onerror = null;\r\n      wsRef.current.close();\r\n      wsRef.current = null;\r\n    }\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach((track) => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n\r\n    setIsCameraActive((isActive) => {\r\n      if (isActive) {\r\n        setPrediction(null);\r\n        setError(null);\r\n        setFramesCollected(0);\r\n      }\r\n      return false;\r\n    });\r\n  }, []);\r\n  // ---\r\n\r\n  // --- THAY ĐỔI 2: KÍCH HOẠT LẠI WEBSOCKET KHI MỞ CAMERA ---\r\n  const handleCameraAccess = useCallback(async () => {\r\n    if (isCameraActive) {\r\n      // --- Logic TẮT (GIỮ NGUYÊN) ---\r\n      console.log(\"Đang TẮT camera (do người dùng nhấp)...\");\r\n      cleanupCamera();\r\n    } else {\r\n      // --- Logic MỞ (ĐÃ KHÔI PHỤC) ---\r\n      console.log(\"Đang MỞ camera VÀ KẾT NỐI...\");\r\n      try {\r\n        // 1. Lấy stream video\r\n        const stream = await navigator.mediaDevices.getUserMedia({\r\n          video: true,\r\n        });\r\n        streamRef.current = stream; // LƯU stream vào ref\r\n\r\n        // 2. KẾT NỐI WEBSOCKET\r\n        wsRef.current = new WebSocket(WEBSOCKET_URL);\r\n\r\n        // 3. Định nghĩa các trình xử lý\r\n        wsRef.current.onopen = () => {\r\n          console.log(\"WebSocket đã kết nối!\");\r\n          setIsCameraActive(true); // <-- Kích hoạt re-render để hiển thị video\r\n          setError(null);\r\n          // BẮT ĐẦU GỬI KHUNG HÌNH (với 20 FPS)\r\n          intervalRef.current = setInterval(sendFrame, FRAME_INTERVAL_MS);\r\n        };\r\n\r\n        wsRef.current.onmessage = (event) => {\r\n          console.log(\"WebSocket message received:\", event.data);\r\n          try {\r\n            const data = JSON.parse(event.data);\r\n            console.log(\"Parsed data:\", data);\r\n\r\n            if (data.status === \"predicted\") {\r\n              setPrediction({\r\n                label_text: data.label_text,\r\n                confidence: data.confidence,\r\n              });\r\n              setFramesCollected(0);\r\n            } else if (data.status === \"collecting\") {\r\n              console.log(\r\n                `Collecting frames: ${data.frames_collected}/${data.frames_needed}`\r\n              );\r\n              setFramesCollected(data.frames_collected);\r\n              setFramesNeeded(data.frames_needed);\r\n            } else if (data.status === \"waiting\") {\r\n              console.log(\"Waiting:\", data.message);\r\n            } else if (data.status === \"error\") {\r\n              console.error(\"Backend error:\", data.message);\r\n              setError(data.message);\r\n            }\r\n          } catch (err) {\r\n            console.error(\"Failed to parse WebSocket message:\", err);\r\n          }\r\n        };\r\n\r\n        wsRef.current.onclose = () => {\r\n          console.log(\"WebSocket BỊ NGẮT (bất ngờ). Đang dọn dẹp.\");\r\n          cleanupCamera();\r\n          setError(\"Kết nối đã mất. Vui lòng thử lại.\");\r\n        };\r\n\r\n        wsRef.current.onerror = (err) => {\r\n          console.error(\"Lỗi WebSocket:\", err);\r\n          setError(\"Lỗi kết nối. Backend có đang chạy không?\");\r\n        };\r\n      } catch (err) {\r\n        console.error(\"Lỗi truy cập camera:\", err);\r\n        setError(\"Không thể truy cập camera. Vui lòng kiểm tra quyền.\");\r\n      }\r\n    }\r\n  }, [isCameraActive, cleanupCamera]);\r\n  // ---\r\n\r\n  // --- CÁC useEffect (GIỮ NGUYÊN) ---\r\n\r\n  // useEffect này CHỈ xử lý bookmark/share\r\n  useEffect(() => {\r\n    if (bookmarked || isShare) {\r\n      const timer = setTimeout(() => {\r\n        setBookmarked(false);\r\n        setIsShare(false);\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [bookmarked, isShare]);\r\n\r\n  // useEffect này CHỈ xử lý khi `word` thay đổi\r\n  useEffect(() => {\r\n    console.log(\"Từ đã thay đổi, dọn dẹp context...\");\r\n    setShowContext(false);\r\n    setContextText(\"\");\r\n    setSessionId(null);\r\n    console.log(\"Từ đã thay đổi, dọn dẹp camera...\");\r\n    cleanupCamera();\r\n  }, [word, cleanupCamera]); // <-- Sửa lại dependency (thêm cleanupCamera)\r\n\r\n  // useEffect này CHỈ dọn dẹp khi component unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log(\"Component unmount, đang dọn dẹp camera...\");\r\n      cleanupCamera();\r\n    };\r\n  }, [cleanupCamera]); // <-- Sửa lại dependency\r\n\r\n  // useEffect này XỬ LÝ MÀN HÌNH ĐEN (GIỮ NGUYÊN)\r\n  useEffect(() => {\r\n    if (isCameraActive && videoRef.current && streamRef.current) {\r\n      console.log(\"Đang gán stream vào video element...\");\r\n      videoRef.current.srcObject = streamRef.current;\r\n      videoRef.current.play().catch((err) => {\r\n        console.error(\"Video play() bị lỗi:\", err);\r\n      });\r\n    }\r\n  }, [isCameraActive]);\r\n  // ---\r\n\r\n  // Handle context toggle (GIỮ NGUYÊN)\r\n  const handleContextToggle = async () => {\r\n    // ... (Toàn bộ logic context của bạn không thay đổi) ...\r\n    if (!showContext) {\r\n      setIsLoadingContext(true);\r\n      setContextText(\"\");\r\n      const prompt = `Khi nào sử dụng từ này, trong trường hợp, hoàn cảnh nào: \"${word}\"`;\r\n      const API_URL = process.env.NEXT_PUBLIC_SERVER_URL;\r\n      try {\r\n        const response = await fetch(`${API_URL}/api/chat`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            message: prompt,\r\n            user_id: user?.id || \"guest-user\",\r\n            session_id: sessionId,\r\n          }),\r\n        });\r\n        if (!response.ok) {\r\n          throw new Error(\"Failed to fetch context from API\");\r\n        }\r\n        const data = await response.json();\r\n        setContextText(data.response);\r\n        setSessionId(data.session_id);\r\n        setShowContext(true);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch context:\", error);\r\n        setContextText(\"Lỗi: Không thể tải ngữ cảnh.\");\r\n        setShowContext(true);\r\n      } finally {\r\n        setIsLoadingContext(false);\r\n      }\r\n    } else {\r\n      setShowContext(false);\r\n    }\r\n  };\r\n\r\n  // --- PHẦN RETURN (JSX) (KHÔNG THAY ĐỔI) ---\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-lg border-2 border-[#FF978E] overflow-hidden\">\r\n      {/* Header Section with Actions */}\r\n      <div className=\"bg-gradient-to-r from-[#f66868] to-[#FF978E] p-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-baseline gap-3\">\r\n            <h1 className=\"text-3xl font-bold text-white drop-shadow-md\">\r\n              {word}\r\n            </h1>\r\n            {partOfSpeech && (\r\n              <div className=\"text-white/90 italic text-xl font-medium bg-white/20 px-3 py-1 rounded-full\">\r\n                {partOfSpeech}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <TooltipProvider>\r\n            <div className=\"flex gap-2\">\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <button\r\n                    onClick={() => {\r\n                      setIsShare(true);\r\n                      navigator.clipboard.writeText(window.location.href);\r\n                    }}\r\n                    className=\"p-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all duration-300 backdrop-blur-sm\"\r\n                  >\r\n                    {isShare ? (\r\n                      <Check className=\"w-6 h-6 text-white\" />\r\n                    ) : (\r\n                      <Share className=\"w-6 h-6 text-white\" />\r\n                    )}\r\n                  </button>\r\n                </TooltipTrigger>\r\n                <TooltipContent>\r\n                  {isShare ? \"Đã sao chép liên kết!\" : \"Chia sẻ\"}\r\n                </TooltipContent>\r\n              </Tooltip>\r\n\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <button\r\n                    onClick={() => setBookmarked(!bookmarked)}\r\n                    className=\"p-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all duration-300 backdrop-blur-sm\"\r\n                  >\r\n                    <Bookmark\r\n                      className={`w-6 h-6 ${\r\n                        bookmarked ? \"fill-white text-white\" : \"text-white\"\r\n                      }`}\r\n                    />\r\n                  </button>\r\n                </TooltipTrigger>\r\n                <TooltipContent>\r\n                  {bookmarked ? \"Đã lưu\" : \"Lưu từ\"}\r\n                </TooltipContent>\r\n              </Tooltip>\r\n            </div>\r\n          </TooltipProvider>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"p-6 space-y-6\">\r\n        {/* Definition Section */}\r\n        {definition && (\r\n          <div className=\"bg-rose-50 rounded-xl p-5 border border-rose-200\">\r\n            <h3 className=\"text-sm font-bold text-[#C73B3B] uppercase tracking-wide mb-3 flex items-center gap-2\">\r\n              <div className=\"w-1 h-5 bg-[#C73B3B] rounded-full\"></div>\r\n              Cách thực hiện\r\n            </h3>\r\n            <p className=\"text-gray-700 text-base\">{definition}</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Two Column Layout: Video/Image + Camera */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          {/* Left Column: Instructional Media */}\r\n          {(videoUrl || imageUrl) && (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-sm font-bold text-[#C73B3B] uppercase tracking-wide flex items-center gap-2\">\r\n                  <div className=\"w-1 h-5 bg-[#C73B3B] rounded-full\"></div>\r\n                  Hướng dẫn\r\n                </h3>\r\n\r\n                {/* Media Toggle */}\r\n                <div className=\"flex bg-rose-50 border border-rose-200 rounded-lg overflow-hidden\">\r\n                  {videoUrl && (\r\n                    <button\r\n                      onClick={() => setMediaMode(\"video\")}\r\n                      className={`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium transition-all cursor-pointer\r\n                        ${\r\n                          mediaMode === \"video\"\r\n                            ? \"bg-[#C73B3B] text-white shadow-sm\"\r\n                            : \"text-[#C73B3B] hover:bg-rose-100\"\r\n                        }`}\r\n                    >\r\n                      <Video className=\"w-3.5 h-3.5\" /> Video\r\n                    </button>\r\n                  )}\r\n                  {imageUrl && (\r\n                    <button\r\n                      onClick={() => setMediaMode(\"image\")}\r\n                      className={`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium transition-all cursor-pointer\r\n                        ${\r\n                          mediaMode === \"image\"\r\n                            ? \"bg-[#C73B3B] text-white shadow-sm\"\r\n                            : \"text-[#C73B3B] hover:bg-rose-100\"\r\n                        }`}\r\n                    >\r\n                      <ImageIcon className=\"w-3.5 h-3.5\" /> Hình ảnh\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Media Display */}\r\n              <div className=\"relative w-full rounded-xl overflow-hidden border-2 border-gray-200 shadow-md aspect-video bg-gray-100\">\r\n                {mediaMode === \"video\" && videoUrl ? (\r\n                  <video\r\n                    controls\r\n                    className=\"w-full h-full object-contain\"\r\n                    src={videoUrl}\r\n                  />\r\n                ) : (\r\n                  imageUrl && (\r\n                    <img\r\n                      src={imageUrl}\r\n                      alt={`${word} illustration`}\r\n                      className=\"w-full h-full object-contain p-4\"\r\n                      loading=\"lazy\"\r\n                    />\r\n                  )\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Right Column: Practice Camera */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-sm font-bold text-[#C73B3B] uppercase tracking-wide flex items-center gap-2\">\r\n                <div className=\"w-1 h-5 bg-[#C73B3B] rounded-full\"></div>\r\n                Luyện tập\r\n              </h3>\r\n\r\n              <TooltipProvider>\r\n                <Tooltip>\r\n                  <TooltipTrigger asChild>\r\n                    <button\r\n                      onClick={handleCameraAccess}\r\n                      className={`px-4 py-2 rounded-lg font-medium transition-all duration-300 transform flex items-center gap-2 text-sm\r\n                        ${\r\n                          isCameraActive\r\n                            ? \"bg-[#f66868] text-white shadow-lg scale-105\"\r\n                            : \"bg-rose-100 text-[#f66868] hover:bg-rose-200\"\r\n                        }`}\r\n                    >\r\n                      <Camera className=\"w-4 h-4\" />\r\n                      {isCameraActive ? \"Tắt camera\" : \"Bật camera\"}\r\n                    </button>\r\n                  </TooltipTrigger>\r\n                  <TooltipContent>\r\n                    {isCameraActive\r\n                      ? \"Dừng luyện tập\"\r\n                      : \"Bắt đầu luyện tập với camera\"}\r\n                  </TooltipContent>\r\n                </Tooltip>\r\n              </TooltipProvider>\r\n            </div>\r\n\r\n            {/* Camera Display */}\r\n            {isCameraActive ? (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"relative w-full rounded-xl overflow-hidden border-2 border-[#f66868] shadow-lg aspect-video bg-black\">\r\n                  <video\r\n                    ref={videoRef}\r\n                    autoPlay\r\n                    muted\r\n                    playsInline\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                  {/* Recording Indicator */}\r\n                  <div className=\"absolute top-3 right-3 flex items-center gap-2 bg-red-500 text-white px-3 py-1.5 rounded-full text-xs font-bold\">\r\n                    <div className=\"w-2 h-2 bg-white rounded-full animate-pulse\"></div>\r\n                    REC\r\n                  </div>\r\n                </div>\r\n\r\n                <canvas ref={canvasRef} style={{ display: \"none\" }} />\r\n\r\n                {/* Prediction Results */}\r\n                {prediction && (\r\n                  <div className=\"p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <p className=\"text-xs text-green-600 font-medium mb-1\">\r\n                          Nhận diện được:\r\n                        </p>\r\n                        <h4 className=\"text-2xl font-bold text-green-800\">\r\n                          {prediction.label_text}\r\n                        </h4>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-xs text-green-600 font-medium mb-1\">\r\n                          Độ chính xác:\r\n                        </p>\r\n                        <p className=\"text-3xl font-bold text-green-700\">\r\n                          {(prediction.confidence * 100).toFixed(0)}%\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Collection Progress */}\r\n                <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-xl\">\r\n                  {framesCollected > 0 ? (\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"flex justify-between text-sm text-blue-700 font-medium\">\r\n                        <span>Đang thu thập khung hình...</span>\r\n                        <span>\r\n                          {framesCollected}/{framesNeeded}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"w-full bg-blue-200 rounded-full h-2 overflow-hidden\">\r\n                        <div\r\n                          className=\"bg-blue-600 h-full transition-all duration-300 rounded-full\"\r\n                          style={{\r\n                            width: `${(framesCollected / framesNeeded) * 100}%`,\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <p className=\"text-blue-700 flex items-center justify-center gap-2 text-sm\">\r\n                      <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                      {prediction\r\n                        ? \"Sẵn sàng nhận diện tiếp...\"\r\n                        : \"Đang khởi động AI...\"}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {error && (\r\n                  <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n                    <p className=\"text-red-600 text-sm text-center\">{error}</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"w-full aspect-video rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 flex flex-col items-center justify-center text-center p-6\">\r\n                <Camera className=\"w-12 h-12 text-gray-400 mb-3\" />\r\n                <p className=\"text-gray-600 font-medium mb-1\">\r\n                  Camera chưa được bật\r\n                </p>\r\n                <p className=\"text-gray-400 text-sm\">\r\n                  Nhấn nút \"Bật camera\" để bắt đầu luyện tập\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Context Button */}\r\n        <div className=\"flex justify-center pt-4\">\r\n          <Button\r\n            size=\"lg\"\r\n            onClick={handleContextToggle}\r\n            disabled={isLoadingContext}\r\n            className=\"px-8 py-6 rounded-xl bg-gradient-to-r from-[#C73B3B] to-[#f66868] text-white font-bold hover:shadow-lg hover:scale-105 transition-all duration-300 text-base flex items-center gap-3\"\r\n          >\r\n            {isLoadingContext ? (\r\n              <>\r\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                Đang tải ngữ cảnh...\r\n              </>\r\n            ) : showContext ? (\r\n              <>\r\n                <Sparkles className=\"w-5 h-5\" />\r\n                Ẩn ngữ cảnh\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Sparkles className=\"w-5 h-5\" />\r\n                Xem ngữ cảnh sử dụng\r\n              </>\r\n            )}\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Context Section */}\r\n        {showContext && (\r\n          <div className=\"bg-gradient-to-br from-rose-50 to-orange-50 border-2 border-rose-200 rounded-xl p-6 shadow-inner\">\r\n            <h3 className=\"text-sm font-bold text-[#C73B3B] uppercase tracking-wide mb-4 flex items-center gap-2\">\r\n              <Sparkles className=\"w-4 h-4\" />\r\n              Ngữ cảnh sử dụng\r\n            </h3>\r\n            {isLoadingContext ? (\r\n              <div className=\"space-y-3\">\r\n                <div className=\"h-4 bg-rose-200 rounded animate-pulse\"></div>\r\n                <div className=\"h-4 bg-rose-200 rounded animate-pulse w-5/6\"></div>\r\n                <div className=\"h-4 bg-rose-200 rounded animate-pulse w-4/6\"></div>\r\n              </div>\r\n            ) : contextText ? (\r\n              <div className=\"prose prose-rose max-w-none\">\r\n                <MarkdownRenderer content={contextText} />\r\n              </div>\r\n            ) : (\r\n              <p className=\"italic text-gray-500 text-center py-4\">\r\n                Không có ngữ cảnh cho từ này.\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3324, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/lesson-player.tsx"],"sourcesContent":["\"use client\";\r\nimport { useRouter } from \"next/navigation\";\r\n// 1. Import useEffect, useCallback và additional icons\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport {\r\n  CheckCircle2,\r\n  XCircle,\r\n  Volume2,\r\n  RotateCcw,\r\n  ChevronRight,\r\n  ChevronLeft,\r\n  Loader2,\r\n  School,\r\n  Trophy, // Thêm icon cho màn hình kết quả\r\n} from \"lucide-react\";\r\nimport VocabularyInfo from \"@/components/VocabularyInfo\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\n\r\n// (Các interface Vocabulary, BackendVocabularyItem, Lesson không đổi)\r\ninterface Vocabulary {\r\n  title: string;\r\n  description: string;\r\n  videoUrl: string;\r\n  imageUrl?: string | null;\r\n  partOfSpeech?: string;\r\n}\r\n\r\ninterface BackendVocabularyItem {\r\n  id: number;\r\n  word: string;\r\n  description: string;\r\n  video_url: string;\r\n}\r\n\r\ninterface Question {\r\n  id: number;\r\n  question_text: string;\r\n  video: string;\r\n  type: \"mcq\" | \"true_false\";\r\n  options: {\r\n    id: number;\r\n    option_text: string;\r\n    is_correct: boolean;\r\n  }[];\r\n}\r\ninterface LessonQuizResponse {\r\n  quiz_id: number | null;\r\n  questions: Question[];\r\n}\r\ninterface Lesson {\r\n  id: number;\r\n  title: string;\r\n}\r\n\r\nexport default function LessonPlayer({ lesson }: { lesson: Lesson }) {\r\n  const [vocabularyList, setVocabularyList] = useState<Vocabulary[]>([]);\r\n  const [quizQuestions, setQuizQuestions] = useState<Question[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const { user } = useUserStore();\r\n  const router = useRouter();\r\n  // 1. THÊM \"summary\" VÀO STATE CỦA PHASE\r\n  const [phase, setPhase] = useState<\"introduction\" | \"quiz\" | \"summary\">(\r\n    \"introduction\"\r\n  );\r\n\r\n  const [currentVocabIndex, setCurrentVocabIndex] = useState(0);\r\n  const [currentQuizIndex, setCurrentQuizIndex] = useState(0);\r\n  const [quizAnswers, setQuizAnswers] = useState<(number | null)[]>([]);\r\n  const [showQuizResult, setShowQuizResult] = useState(false);\r\n  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n\r\n  // 2. THÊM STATE ĐỂ GIỮ ĐIỂM SỐ CUỐI CÙNG\r\n  const [quizPoint, setQuizPoint] = useState(0);\r\n  const [quizAttemptId, setQuizAttemptId] = useState<number | null>(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false); // Thêm state loading cho việc nộp bài\r\n  const fetchData = useCallback(async () => {\r\n    if (!lesson.id) {\r\n      setError(\"No lesson ID provided.\");\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setPhase(\"introduction\");\r\n    setCurrentVocabIndex(0);\r\n    setCurrentQuizIndex(0);\r\n    setSelectedAnswer(null);\r\n    setQuizPoint(0); // Reset điểm khi tải data mới\r\n\r\n    try {\r\n      const [vocabResponse, quizResponse] = await Promise.all([\r\n        fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/lessons/vocabulary?lesson_id=${lesson.id}`\r\n        ),\r\n        fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/lesson-quiz?lesson_id=${lesson.id}`\r\n        ),\r\n      ]);\r\n\r\n      if (!vocabResponse.ok) throw new Error(\"Failed to fetch vocabulary.\");\r\n      if (!quizResponse.ok) throw new Error(\"Failed to fetch quiz questions.\");\r\n\r\n      const vocabData: { vocabulary: BackendVocabularyItem[] } =\r\n        await vocabResponse.json();\r\n      const quizData: LessonQuizResponse = await quizResponse.json();\r\n      const mappedVocabulary: Vocabulary[] = vocabData.vocabulary.map(\r\n        (item) => ({\r\n          title: item.word,\r\n          description: item.description,\r\n          videoUrl: item.video_url,\r\n          imageUrl: null,\r\n        })\r\n      );\r\n      console.log(quizData);\r\n      const fetched_quiz_id = quizData.quiz_id;\r\n      console.log(fetched_quiz_id);\r\n      setQuizAttemptId(fetched_quiz_id); // Giả sử bạn đã đổi tên state này\r\n      setVocabularyList(mappedVocabulary);\r\n      setQuizQuestions(quizData.questions || []);\r\n      setQuizAnswers(new Array(quizData.questions?.length || 0).fill(null));\r\n    } catch (err: any) {\r\n      console.error(err);\r\n      setError(err.message || \"An unknown error occurred.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [lesson.id]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n  const currentVocab = vocabularyList[currentVocabIndex];\r\n  const currentQuestion = quizQuestions[currentQuizIndex];\r\n\r\n  // Logic tính điểm đúng/sai cho câu hỏi HIỆN TẠI\r\n  const correctAnswerIndex = currentQuestion\r\n    ? currentQuestion.options.findIndex((opt) => opt.is_correct)\r\n    : -1;\r\n  const isQuizCorrect = quizAnswers[currentQuizIndex] === correctAnswerIndex;\r\n\r\n  // Logic tính % thanh progress\r\n  const introProgress =\r\n    vocabularyList.length > 0\r\n      ? ((currentVocabIndex + 1) / vocabularyList.length) * 100\r\n      : 0;\r\n  const quizProgress =\r\n    quizQuestions.length > 0\r\n      ? ((currentQuizIndex + 1) / quizQuestions.length) * 100\r\n      : 0;\r\n\r\n  // 3. SỬA: Cập nhật thanh progress cho cả 3 giai đoạn\r\n  const currentProgress =\r\n    phase === \"introduction\"\r\n      ? introProgress\r\n      : phase === \"quiz\"\r\n      ? quizProgress\r\n      : 100; // 100% khi ở màn hình summary\r\n\r\n  const handleFinishIntroduction = () => {\r\n    if (quizQuestions.length > 0) {\r\n      setPhase(\"quiz\");\r\n      setCurrentQuizIndex(0);\r\n      setSelectedAnswer(null);\r\n      setShowQuizResult(false);\r\n    } else {\r\n      handleRestart();\r\n    }\r\n  };\r\n\r\n  // (handleQuizGeneration không đổi)\r\n  const handleQuizGeneration = async () => {\r\n    setIsGenerating(true);\r\n    setError(null);\r\n\r\n    const vocabularyPayload = vocabularyList.map((v) => ({\r\n      word: v.title,\r\n      description: v.description,\r\n      video: v.videoUrl,\r\n    }));\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_SERVER_URL}/api/generate-quiz`,\r\n        {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            lesson_id: lesson.id,\r\n            lesson_title: lesson.title,\r\n            user_id: user?.id,\r\n            vocabulary: vocabularyPayload,\r\n            session_id: null,\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const err = await response.json();\r\n        throw new Error(err.detail || \"Không thể tạo bài kiểm tra\");\r\n      }\r\n\r\n      const data = await response.json();\r\n      const agentResponse = JSON.parse(data.response);\r\n\r\n      if (agentResponse.action === \"create_quiz\") {\r\n        console.log(\"Quiz đã được tạo:\", agentResponse.payload);\r\n        await fetchData();\r\n        setPhase(\"quiz\");\r\n      } else {\r\n        // --- 💡 START FIX ---\r\n        // Get the payload message from the agent\r\n        const payloadMessage =\r\n          agentResponse.payload || \"Agent không thể tạo quiz\";\r\n\r\n        // Check if the payload message contains your special success string\r\n        if (String(payloadMessage).includes(\"[QuizID:\")) {\r\n          console.log(\r\n            \"Quiz generation handled (e.g., already exists):\",\r\n            payloadMessage\r\n          );\r\n\r\n          // This is not an error, so run the same success logic\r\n          await fetchData();\r\n          setPhase(\"quiz\");\r\n        } else {\r\n          // This is a REAL agent error\r\n          throw new Error(payloadMessage);\r\n        }\r\n        // --- 💡 END FIX ---\r\n      }\r\n    } catch (err: any) {\r\n      // This will now only catch true errors\r\n      setError(err.message);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleQuizAnswer = (optionIndex: number) => {\r\n    setSelectedAnswer(optionIndex);\r\n    const newAnswers = [...quizAnswers];\r\n    newAnswers[currentQuizIndex] = optionIndex;\r\n    setQuizAnswers(newAnswers);\r\n    setShowQuizResult(true);\r\n  };\r\n\r\n  // 4. SỬA: handleNextQuiz để tính điểm và chuyển sang \"summary\"\r\n  const handleNextQuiz = () => {\r\n    if (currentQuizIndex < quizQuestions.length - 1) {\r\n      // Vẫn còn câu hỏi\r\n      setCurrentQuizIndex(currentQuizIndex + 1);\r\n      setShowQuizResult(false);\r\n      setSelectedAnswer(null);\r\n    } else {\r\n      // Đây là câu hỏi cuối cùng -> Tính điểm và chuyển sang summary\r\n\r\n      // 1. Tính điểm\r\n      const pointPerQuestion =\r\n        quizQuestions.length > 0 ? 100 / quizQuestions.length : 0;\r\n\r\n      const correctAnswersCount = quizAnswers.filter(\r\n        (selectedOptionIndex, questionIndex) => {\r\n          const question = quizQuestions[questionIndex];\r\n          if (!question || selectedOptionIndex === null) return false;\r\n\r\n          const correctOptionIndex = question.options.findIndex(\r\n            (opt) => opt.is_correct\r\n          );\r\n          return selectedOptionIndex === correctOptionIndex;\r\n        }\r\n      ).length;\r\n\r\n      setQuizPoint(Math.round(correctAnswersCount * pointPerQuestion));\r\n\r\n      // 2. Chuyển phase\r\n      setPhase(\"summary\");\r\n    }\r\n  };\r\n  const handleCompleteQuiz = async () => {\r\n    // Kiểm tra các ID cần thiết\r\n    if (!quizAttemptId || !user?.id) {\r\n      console.error(\r\n        \"Thiếu ID lượt làm bài hoặc ID người dùng. Không thể nộp điểm.\"\r\n      );\r\n      setError(\"Lỗi: Không thể nộp điểm. Vui lòng tải lại.\");\r\n      return; // Không làm gì cả nếu thiếu ID\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n    console.log(\"Testing:\", quizAttemptId, user.id, quizPoint, lesson.id);\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_SERVER_URL}/api/quiz/submit`,\r\n        {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            quiz_id: quizAttemptId,\r\n            user_id: parseInt(user.id), // Đảm bảo user ID là số\r\n            score: quizPoint,\r\n            lesson_id: lesson.id,\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errData = await response.json();\r\n        throw new Error(errData.detail || \"Lỗi khi nộp bài\");\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log(\"Nộp bài thành công:\", result);\r\n      // Bạn có thể thêm logic ở đây, ví dụ: cập nhật state của user...\r\n      router.back();\r\n    } catch (err: any) {\r\n      console.error(\"Lỗi API nộp bài:\", err);\r\n      setError(err.message); // Hiển thị lỗi trên màn hình summary\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n  const handlePreviousQuiz = () => {\r\n    if (currentQuizIndex > 0) {\r\n      setCurrentQuizIndex(currentQuizIndex - 1);\r\n      setShowQuizResult(false);\r\n      setSelectedAnswer(null);\r\n    }\r\n  };\r\n\r\n  const handleNextVocab = () => {\r\n    if (currentVocabIndex < vocabularyList.length - 1) {\r\n      setCurrentVocabIndex(currentVocabIndex + 1);\r\n    }\r\n  };\r\n\r\n  const handlePreviousVocab = () => {\r\n    if (currentVocabIndex > 0) {\r\n      setCurrentVocabIndex(currentVocabIndex - 1);\r\n    }\r\n  };\r\n\r\n  // 5. SỬA: handleRestart để reset cả điểm\r\n  const handleRestart = () => {\r\n    setPhase(\"introduction\");\r\n    setCurrentVocabIndex(0);\r\n    setCurrentQuizIndex(0);\r\n    setQuizAnswers(new Array(quizQuestions.length).fill(null));\r\n    setShowQuizResult(false);\r\n    setSelectedAnswer(null);\r\n    setQuizPoint(0); // <-- RESET ĐIỂM\r\n  };\r\n\r\n  // (Phần JSX cho loading, error, no-vocabulary không đổi)\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] text-gray-500\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-[#f66868]\" />\r\n        <p className=\"mt-3 text-lg\">Đang tải bài học...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !isGenerating) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] text-red-600 bg-red-50 p-6 rounded-lg\">\r\n        <XCircle className=\"w-8 h-8\" />\r\n        <p className=\"mt-3 text-lg font-semibold\">Lỗi khi tải bài học</p>\r\n        <p className=\"text-sm\">{error}</p>\r\n        <Button onClick={fetchData} className=\"mt-4\">\r\n          Thử lại\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (vocabularyList.length === 0) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] text-gray-500\">\r\n        <p className=\"text-lg\">Không tìm thấy từ vựng nào cho bài học này.</p>\r\n      </div>\r\n    );\r\n  }\r\n  // --- 1. Define state variables (This is the \"inline\" fix) ---\r\n\r\n  return (\r\n    <div className=\"space-y-8 w-[80%] mx-auto px-4 py-8\">\r\n      {/* (Header không đổi) */}\r\n      <div className=\"text-center\">\r\n        <h2 className=\"text-4xl font-extrabold mb-3 bg-gradient-to-r from-[#f66868] to-rose-400 bg-clip-text text-transparent\">\r\n          {phase === \"introduction\"\r\n            ? \"Học Từ Vựng Kí Hiệu\"\r\n            : phase === \"quiz\"\r\n            ? \"Kiểm Tra Kiến Thức\"\r\n            : \"Tổng Kết Kết Quả\"}\r\n        </h2>\r\n        {/* 6. SỬA: Ẩn đếm số câu/từ vựng khi ở màn hình summary */}\r\n        {phase !== \"summary\" && (\r\n          <p className=\"text-muted-foreground text-sm\">\r\n            {phase === \"introduction\"\r\n              ? `Từ vựng ${currentVocabIndex + 1} / ${vocabularyList.length}`\r\n              : `Câu hỏi ${currentQuizIndex + 1} / ${quizQuestions.length}`}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* (Progress và Tip box không đổi) */}\r\n      <div className=\"space-y-1\">\r\n        <div className=\"flex justify-between text-sm font-medium\">\r\n          <span className=\"text-foreground\">Tiến độ</span>\r\n          <span className=\"text-[#f66868]\">{Math.round(currentProgress)}%</span>\r\n        </div>\r\n        <Progress\r\n          value={currentProgress}\r\n          className=\"h-2 bg-rose-100 [&>div]:bg-[#f66868]\"\r\n        />\r\n      </div>\r\n      {phase == \"introduction\" && (\r\n        <div className=\"w-full flex justify-center\">\r\n          <div className=\"mt-1 w-fit rounded-xl border border-rose-200 bg-gradient-to-r from-rose-50 to-rose-100 p-4 text-center shadow-sm flex flex-row gap-x-4 items-center\">\r\n            <div className=\"text-xl\">💡</div>\r\n            <div className=\"flex flex-col gap-y-1\">\r\n              <p className=\"text-rose-700 font-medium text-lg\">\r\n                Mẹo nhỏ: Hãy bật camera để tự kiểm tra bản thân nhé!\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* === PHASE: INTRODUCTION === */}\r\n      {phase === \"introduction\" && currentVocab && (\r\n        <VocabularyInfo\r\n          word={currentVocab.title}\r\n          partOfSpeech={currentVocab.partOfSpeech}\r\n          definition={currentVocab.description}\r\n          videoUrl={currentVocab.videoUrl}\r\n          imageUrl={currentVocab.imageUrl || undefined}\r\n        />\r\n      )}\r\n\r\n      {/* === PHASE: QUIZ === */}\r\n      {phase === \"quiz\" && currentQuestion && (\r\n        <Card className=\"overflow-hidden border-2 shadow-sm hover:shadow-md transition-all scale-[0.98]\">\r\n          <CardHeader className=\"border-b-2 py-2 px-4\">\r\n            <div className=\"flex justify-between items-start\">\r\n              <div>\r\n                <CardTitle className=\"text-lg font-semibold text-foreground\">\r\n                  {currentQuestion.question_text}\r\n                </CardTitle>\r\n                {currentQuestion.video && (\r\n                  <CardDescription className=\"text-xs mt-0.5\">\r\n                    Xem video và chọn đáp án đúng\r\n                  </CardDescription>\r\n                )}\r\n              </div>\r\n              <Badge className=\"bg-[#f66868]/10 text-[#f66868] border border-[#f66868]/30 text-[11px] py-0.5 px-2\">\r\n                Kiểm Tra\r\n              </Badge>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent className=\"pt-4 space-y-4 px-4 pb-4\">\r\n            {currentQuestion.video && (\r\n              <div className=\"relative rounded-lg overflow-hidden aspect-video bg-rose-50 shadow-inner\">\r\n                <video\r\n                  key={currentQuestion.id}\r\n                  src={currentQuestion.video}\r\n                  className=\"w-full h-full object-cover\"\r\n                  autoPlay\r\n                  loop\r\n                  muted\r\n                />\r\n                <div className=\"absolute top-0 left-0 h-full w-48 bg-white z-10\"></div>\r\n                <div className=\"absolute top-0 right-0 h-full w-48 bg-white z-10\"></div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              {currentQuestion.options.map((option, index) => (\r\n                <button\r\n                  key={option.id}\r\n                  onClick={() => handleQuizAnswer(index)}\r\n                  disabled={showQuizResult}\r\n                  className={`group w-full rounded-lg overflow-hidden border transition-all duration-300 disabled:opacity-60 disabled:cursor-not-allowed ${\r\n                    // This is the new, cleaned-up logic:\r\n                    showQuizResult && selectedAnswer === index // A. Results are SHOWN and this was the user's answer\r\n                      ? option.is_correct\r\n                        ? \"border-green-500 ring-2 ring-green-500/50\" // A1. It was CORRECT (green)\r\n                        : \"border-red-500 ring-2 ring-red-500/50\" // A2. It was INCORRECT (red)\r\n                      : !showQuizResult && selectedAnswer === index // B. Results NOT shown, but this is selected\r\n                      ? \"border-[#f66868] ring-2 ring-[#f66868]/50\" // B1. Neutral \"selected\" state (pink)\r\n                      : \"border-gray-200 hover:border-[#f66868]/70\" // C. Idle / unselected state (gray)\r\n                  }`}\r\n                >\r\n                  {/* This text block now also changes color based on the state */}\r\n                  <div\r\n                    className={`p-3 bg-white border-t text-sm font-medium text-center transition-all duration-300 ${\r\n                      // Logic for text color\r\n                      showQuizResult && selectedAnswer === index\r\n                        ? option.is_correct\r\n                          ? \"text-green-700 font-bold\" // Correct answer, selected\r\n                          : \"text-red-700 font-bold\" // Incorrect answer, selected\r\n                        : !showQuizResult && selectedAnswer === index\r\n                        ? \"text-[#f66868] font-bold\" // Neutral \"selected\" state\r\n                        : \"text-gray-700 group-hover:text-[#f66868]\" // Idle state\r\n                    }`}\r\n                  >\r\n                    {/* FIX: Added \"flex items-center justify-center gap-2\"\r\n    This centers the content and adds space between the icon and text.\r\n  */}\r\n                    <div className=\"flex items-center justify-center gap-2\">\r\n                      {/* FIX: Wrapped the icon logic in a check.\r\n      This ensures icons ONLY show up for the answer the user selected,\r\n      once the results are shown.\r\n    */}\r\n                      {showQuizResult && selectedAnswer === index && (\r\n                        <>\r\n                          {option.is_correct ? (\r\n                            <CheckCircle2 className=\"w-5 h-5 text-green-600\" />\r\n                          ) : (\r\n                            <XCircle className=\"w-5 h-5 text-red-600\" />\r\n                          )}\r\n                        </>\r\n                      )}\r\n\r\n                      {/* This text now renders correctly with or without an icon */}\r\n                      <span>{option.option_text}</span>\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            {showQuizResult && (\r\n              <div\r\n                className={`p-3 rounded-md border text-sm ${\r\n                  isQuizCorrect\r\n                    ? \"bg-green-50 border-green-200 text-green-800\"\r\n                    : \"bg-red-50 border-red-200 text-red-800\"\r\n                }`}\r\n              >\r\n                <p className=\"font-semibold mb-0.5\">\r\n                  {isQuizCorrect ? \"Tuyệt vời!\" : \"Chưa đúng\"}\r\n                </p>\r\n                <p className=\"text-xs leading-snug\">\r\n                  {isQuizCorrect\r\n                    ? `Đúng rồi! Đây là kí hiệu cho \"${currentQuestion.options[correctAnswerIndex]?.option_text}\".`\r\n                    : `Đáp án đúng là \"${currentQuestion.options[correctAnswerIndex]?.option_text}\". Hãy thử lại nhé!`}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* 7. THÊM: Giao diện cho màn hình SUMMARY */}\r\n      {phase === \"summary\" && (\r\n        <Card className=\"overflow-hidden border-2 border-rose-100 shadow-sm text-center pb-0\">\r\n          <CardHeader className=\"bg-gradient-to-br from-rose-50 to-white py-6\">\r\n            <Trophy className=\"w-16 h-16 text-[#f66868] mx-auto\" />\r\n            <CardTitle className=\"text-3xl font-bold text-[#f66868] pt-2\">\r\n              Chúc Mừng Hoàn Thành!\r\n            </CardTitle>\r\n            <CardDescription className=\"text-lg text-gray-600\">\r\n              Bạn đã hoàn thành bài kiểm tra.\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6 p-6\">\r\n            <div className=\"text-7xl font-bold text-gray-800\">{quizPoint}</div>\r\n            <p className=\"text-xl text-gray-600 -mt-4\">/ 100 điểm</p>\r\n            <div className=\"w-full max-w-xs mx-auto\">\r\n              <Progress\r\n                value={quizPoint}\r\n                className=\"h-3 bg-rose-100 [&>div]:bg-[#f66868]\"\r\n              />\r\n            </div>\r\n            <p className=\"text-gray-500\">\r\n              Bạn đã trả lời đúng{\" \"}\r\n              <strong>\r\n                {Math.round((quizPoint / 100) * quizQuestions.length)} /{\" \"}\r\n                {quizQuestions.length}\r\n              </strong>{\" \"}\r\n              câu hỏi.\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* NAVIGATION */}\r\n      <div className=\"flex items-center justify-between\">\r\n        {/* 8. SỬA: Ẩn nút \"Quay Lại\" khi ở màn hình summary */}\r\n        {phase !== \"summary\" ? (\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={\r\n              phase === \"introduction\"\r\n                ? handlePreviousVocab\r\n                : handlePreviousQuiz\r\n            }\r\n            disabled={\r\n              phase === \"introduction\"\r\n                ? currentVocabIndex === 0\r\n                : currentQuizIndex === 0\r\n            }\r\n            className=\"flex items-center gap-2 border-rose-200 text-[#f66868] hover:bg-rose-50\"\r\n          >\r\n            <ChevronLeft className=\"h-4 w-4\" /> Quay Lại\r\n          </Button>\r\n        ) : (\r\n          <div></div> // Placeholder để giữ nút bên phải ở đúng vị trí\r\n        )}\r\n\r\n        {/* 9. SỬA: Ẩn thanh progress dots khi ở màn hình summary */}\r\n        {phase !== \"summary\" && (\r\n          <div className=\"flex items-center gap-2\">\r\n            {(phase === \"introduction\" ? vocabularyList : quizQuestions).map(\r\n              (_, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  className={`h-2 rounded-full transition-all ${\r\n                    (phase === \"introduction\"\r\n                      ? currentVocabIndex\r\n                      : currentQuizIndex) === idx\r\n                      ? \"w-8 bg-[#f66868]\"\r\n                      : \"w-2 bg-muted\"\r\n                  }`}\r\n                />\r\n              )\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* 10. SỬA: Cập nhật logic nút chính cho cả 3 phase */}\r\n        <div className=\"flex flex-row gap-x-1\">\r\n          <Button\r\n            onClick={\r\n              phase === \"introduction\"\r\n                ? currentVocabIndex === vocabularyList.length - 1\r\n                  ? handleFinishIntroduction\r\n                  : handleNextVocab\r\n                : phase === \"quiz\" // Thêm điều kiện check\r\n                ? currentQuizIndex === quizQuestions.length - 1\r\n                  ? handleNextQuiz // handleNextQuiz sẽ tự động chuyển sang summary\r\n                  : handleNextQuiz\r\n                : handleRestart // Nếu phase là \"summary\", nút này sẽ là \"Restart\"\r\n            }\r\n            disabled={(phase === \"quiz\" && !showQuizResult) || isGenerating}\r\n            className=\"flex items-center gap-2 bg-[#f66868] hover:bg-[#f66868]/90 text-white shadow-md\"\r\n          >\r\n            {phase === \"introduction\" ? (\r\n              currentVocabIndex === vocabularyList.length - 1 ? (\r\n                <>\r\n                  {quizQuestions.length > 0 ? \"Làm Kiểm Tra\" : \"Học lại\"}\r\n                  <ChevronRight className=\"h-4 w-4\" />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  Tiếp Tục <ChevronRight className=\"h-4 w-4\" />\r\n                </>\r\n              )\r\n            ) : phase === \"quiz\" ? ( // Thêm điều kiện check\r\n              currentQuizIndex === quizQuestions.length - 1 ? (\r\n                // Câu quiz cuối\r\n                <>\r\n                  Hoàn thành <ChevronRight className=\"h-4 w-4\" />\r\n                </>\r\n              ) : (\r\n                // Vẫn còn câu quiz\r\n                <>\r\n                  Tiếp Tục <ChevronRight className=\"h-4 w-4\" />\r\n                </>\r\n              )\r\n            ) : (\r\n              // Phase là \"summary\"\r\n              <>\r\n                <RotateCcw className=\"h-4 w-4\" /> Bắt Đầu Lại\r\n              </>\r\n            )}\r\n          </Button>\r\n          {phase === \"summary\" && (\r\n            <Button\r\n              className=\"flex items-center gap-2 bg-[#f66868] hover:bg-[#f66868]/90 text-white shadow-md\"\r\n              onClick={handleCompleteQuiz}\r\n            >\r\n              Hoàn thành\r\n            </Button>\r\n          )}\r\n          {/* Nút \"Tạo Quiz\" (Logic không đổi) */}\r\n          {phase === \"introduction\" && quizQuestions.length === 0 && (\r\n            <Button\r\n              onClick={handleQuizGeneration}\r\n              variant=\"outline\"\r\n              disabled={isGenerating}\r\n              className=\"flex items-center gap-2 border-rose-200 text-[#f66868] hover:bg-rose-50\"\r\n            >\r\n              {isGenerating ? (\r\n                <>\r\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                  Đang tạo...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <School className=\"h-4 w-4\" /> Tạo Quiz\r\n                </>\r\n              )}\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4285, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8QAAC,0MAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8QAAC,6MAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8QAAC,4MAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8QAAC,2MAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8QAAC,6MAAuB;QACtB,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,8QAAC;QAAa,aAAU;;0BACtB,8QAAC;;;;;0BACD,8QAAC,6MAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,yJAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,8QAAC,2MAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,8QAAC,yOAAK;;;;;0CACN,8QAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8QAAC;QACC,aAAU;QACV,WAAW,IAAA,yJAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8QAAC,2MAAqB;QACpB,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8QAAC,iNAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,yJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 4467, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/choice-modal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { BookOpen, Calendar, ArrowRight, Sparkles } from \"lucide-react\";\r\n\r\ninterface ChoiceModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onCreateSyllabus: () => void;\r\n  onSetupSchedule: () => void;\r\n}\r\n\r\nexport default function ChoiceModal({\r\n  isOpen,\r\n  onClose,\r\n  onCreateSyllabus,\r\n  onSetupSchedule,\r\n}: ChoiceModalProps) {\r\n  const [hoveredOption, setHoveredOption] = useState<string | null>(null);\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onClose}>\r\n      <DialogContent className=\"sm:max-w-[650px] w-full p-0 overflow-hidden\">\r\n        {/* Header with gradient */}\r\n        <div className=\"bg-gradient-to-r from-[#F66868] to-[#e25757] p-6 text-white\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-3xl font-bold flex items-center gap-3\">\r\n              <Sparkles className=\"w-8 h-8\" />\r\n              Điều chỉnh thông tin\r\n            </DialogTitle>\r\n            <DialogDescription className=\"text-white/90 text-base mt-2\">\r\n              Chọn hành động bạn muốn thực hiện\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n        </div>\r\n\r\n        {/* Options Grid */}\r\n        <div className=\"p-6 space-y-4\">\r\n          {/* Option 1: Create New Syllabus */}\r\n          <button\r\n            onClick={onCreateSyllabus}\r\n            onMouseEnter={() => setHoveredOption(\"syllabus\")}\r\n            onMouseLeave={() => setHoveredOption(null)}\r\n            className={`\r\n              w-full p-6 rounded-2xl border-2 transition-all duration-300\r\n              flex items-start gap-5 text-left group\r\n              ${\r\n                hoveredOption === \"syllabus\"\r\n                  ? \"border-[#F66868] bg-gradient-to-br from-red-50 to-orange-50 shadow-lg shadow-red-100 transform scale-[1.02]\"\r\n                  : \"border-gray-200 bg-white hover:border-[#F66868]/50 hover:shadow-md\"\r\n              }\r\n            `}\r\n          >\r\n            {/* Icon Section */}\r\n            <div\r\n              className={`\r\n              w-16 h-16 rounded-xl flex items-center justify-center flex-shrink-0\r\n              transition-all duration-300\r\n              ${\r\n                hoveredOption === \"syllabus\"\r\n                  ? \"bg-gradient-to-br from-[#F66868] to-[#e25757] shadow-lg\"\r\n                  : \"bg-red-100 group-hover:bg-[#F66868]\"\r\n              }\r\n            `}\r\n            >\r\n              <BookOpen\r\n                className={`w-8 h-8 transition-colors duration-300 ${\r\n                  hoveredOption === \"syllabus\"\r\n                    ? \"text-white\"\r\n                    : \"text-[#F66868] group-hover:text-white\"\r\n                }`}\r\n              />\r\n            </div>\r\n\r\n            {/* Content Section */}\r\n            <div className=\"flex-1 min-w-0\">\r\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2 flex items-center gap-2\">\r\n                Tạo giáo trình mới\r\n                <ArrowRight\r\n                  className={`w-5 h-5 transition-all duration-300 ${\r\n                    hoveredOption === \"syllabus\"\r\n                      ? \"text-[#F66868] translate-x-1\"\r\n                      : \"text-transparent\"\r\n                  }`}\r\n                />\r\n              </h3>\r\n              <p className=\"text-gray-600 leading-relaxed mb-3\">\r\n                Tạo một giáo trình học tập hoàn toàn mới được cá nhân hóa dựa\r\n                trên mục tiêu và trình độ của bạn\r\n              </p>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                <span className=\"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium\">\r\n                  ✨ AI-Powered\r\n                </span>\r\n                <span className=\"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium\">\r\n                  🎯 Cá nhân hóa\r\n                </span>\r\n                <span className=\"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium\">\r\n                  📚 Học tập linh hoạt\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </button>\r\n\r\n          {/* Option 2: Setup Schedule */}\r\n          <button\r\n            onClick={onSetupSchedule}\r\n            onMouseEnter={() => setHoveredOption(\"schedule\")}\r\n            onMouseLeave={() => setHoveredOption(null)}\r\n            className={`\r\n              w-full p-6 rounded-2xl border-2 transition-all duration-300\r\n              flex items-start gap-5 text-left group\r\n              ${\r\n                hoveredOption === \"schedule\"\r\n                  ? \"border-[#F66868] bg-gradient-to-br from-blue-50 to-indigo-50 shadow-lg shadow-blue-100 transform scale-[1.02]\"\r\n                  : \"border-gray-200 bg-white hover:border-[#F66868]/50 hover:shadow-md\"\r\n              }\r\n            `}\r\n          >\r\n            {/* Icon Section */}\r\n            <div\r\n              className={`\r\n              w-16 h-16 rounded-xl flex items-center justify-center flex-shrink-0\r\n              transition-all duration-300\r\n              ${\r\n                hoveredOption === \"schedule\"\r\n                  ? \"bg-gradient-to-br from-blue-500 to-indigo-600 shadow-lg\"\r\n                  : \"bg-blue-100 group-hover:bg-blue-500\"\r\n              }\r\n            `}\r\n            >\r\n              <Calendar\r\n                className={`w-8 h-8 transition-colors duration-300 ${\r\n                  hoveredOption === \"schedule\"\r\n                    ? \"text-white\"\r\n                    : \"text-blue-600 group-hover:text-white\"\r\n                }`}\r\n              />\r\n            </div>\r\n\r\n            {/* Content Section */}\r\n            <div className=\"flex-1 min-w-0\">\r\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2 flex items-center gap-2\">\r\n                Thiết lập lịch học\r\n                <ArrowRight\r\n                  className={`w-5 h-5 transition-all duration-300 ${\r\n                    hoveredOption === \"schedule\"\r\n                      ? \"text-blue-600 translate-x-1\"\r\n                      : \"text-transparent\"\r\n                  }`}\r\n                />\r\n              </h3>\r\n              <p className=\"text-gray-600 leading-relaxed mb-3\">\r\n                Cập nhật thông tin học tập và lên lịch cho các khóa học hiện có\r\n                của bạn\r\n              </p>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                <span className=\"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium\">\r\n                  ⏰ Quản lý thời gian\r\n                </span>\r\n                <span className=\"px-3 py-1 bg-pink-100 text-pink-700 rounded-full text-xs font-medium\">\r\n                  📅 Lịch học linh hoạt\r\n                </span>\r\n                <span className=\"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium\">\r\n                  🎓 Tối ưu học tập\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </button>\r\n\r\n          {/* Cancel Button */}\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={onClose}\r\n            className=\"w-full h-12 text-base font-semibold border-2 hover:bg-gray-50 mt-4\"\r\n          >\r\n            Hủy\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Footer Info */}\r\n        <div className=\"bg-gray-50 px-6 py-4 border-t\">\r\n          <p className=\"text-sm text-gray-600 text-center\">\r\n            💡 <strong>Gợi ý:</strong> Nếu bạn muốn học một chủ đề mới, hãy tạo\r\n            giáo trình mới. Nếu muốn điều chỉnh thời gian học, chọn thiết lập\r\n            lịch.\r\n          </p>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\n// Example usage component\r\nfunction ExampleUsage() {\r\n  const [isChoiceModalOpen, setIsChoiceModalOpen] = useState(false);\r\n  const [isCurriculumModalOpen, setIsCurriculumModalOpen] = useState(false);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-pink-50 to-white p-8\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <Button\r\n          onClick={() => setIsChoiceModalOpen(true)}\r\n          className=\"bg-[#F66868] hover:bg-[#e25757] text-white px-6 py-3 text-lg\"\r\n        >\r\n          Điều Chỉnh Thông Tin\r\n        </Button>\r\n\r\n        <ChoiceModal\r\n          isOpen={isChoiceModalOpen}\r\n          onClose={() => setIsChoiceModalOpen(false)}\r\n          onCreateSyllabus={() => {\r\n            setIsChoiceModalOpen(false);\r\n            setIsCurriculumModalOpen(true);\r\n            // Or call your existing curriculum modal\r\n          }}\r\n          onSetupSchedule={() => {\r\n            setIsChoiceModalOpen(false);\r\n            alert(\"Opening schedule setup...\");\r\n            // Open your schedule setup modal here\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4843, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/progress-sidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport {\r\n  CheckCircle2,\r\n  Lock,\r\n  Circle,\r\n  SquarePen,\r\n  GraduationCap,\r\n  Sparkles,\r\n  BookOpen,\r\n  Trophy,\r\n} from \"lucide-react\";\r\nimport { SyllabusInfo } from \"../../map/page\";\r\nimport { useState } from \"react\";\r\nimport ChoiceModal from \"./choice-modal\";\r\n\r\ntype LessonStatus = \"complete\" | \"in-progress\" | \"not_start\";\r\n\r\ninterface Lesson {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  vocabulary_count: number;\r\n  lesson_status: LessonStatus;\r\n  level: \"Cơ bản\";\r\n}\r\n\r\n// 2. DELETE the hardcoded 'lessons' array.\r\n// const lessons: Lesson[] = [ ... ]; // <-- DELETE THIS\r\n\r\n// 3. UPDATE the props to accept the 'lessons' array\r\ninterface ProgressSidebarProps {\r\n  lessons: Lesson[]; // <-- ADD THIS\r\n  syllabus: SyllabusInfo | undefined;\r\n  selectedLessonId?: number;\r\n  onSelectLesson?: (id: number) => void;\r\n}\r\n\r\nexport default function ProgressSidebar({\r\n  lessons, // <-- 4. ACCEPT the 'lessons' prop\r\n  syllabus,\r\n  selectedLessonId,\r\n  onSelectLesson,\r\n}: ProgressSidebarProps) {\r\n  const [isChoiceModalOpen, setIsChoiceModalOpen] = useState(false);\r\n\r\n  // 5. CALCULATE progress dynamically from the 'lessons' prop\r\n  const totalLessons = lessons.length;\r\n  const completedCount = lessons.filter(\r\n    (l) => l.lesson_status === \"complete\"\r\n  ).length;\r\n  console.log(lessons);\r\n  // More accurate vocabulary calculation\r\n  const totalVocabulary = lessons.reduce(\r\n    (acc, lesson) => acc + (lesson.vocabulary_count || 0),\r\n    0\r\n  );\r\n\r\n  const vocabularyComplete = lessons.reduce(\r\n    (acc, lesson) =>\r\n      acc + (lesson.lesson_status === \"complete\" ? lesson.vocabulary_count : 0),\r\n    0\r\n  );\r\n  const completionPercentage =\r\n    totalLessons > 0 ? (completedCount / totalLessons) * 100 : 0;\r\n\r\n  const vocabPercentage =\r\n    totalVocabulary > 0 ? (vocabularyComplete / totalVocabulary) * 100 : 0;\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Progress Overview Card */}\r\n      <Card className=\"border border-[#F66868]/30 bg-gradient-to-br from-rose-50 to-white rounded-2xl shadow-sm py-6\">\r\n        {/* Decorative background elements */}\r\n        <div className=\"absolute top-0 right-0 w-32 h-32 bg-[#F66868]/10 rounded-full blur-3xl -mr-16 -mt-16\"></div>\r\n        <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-pink-300/20 rounded-full blur-2xl -ml-12 -mb-12\"></div>\r\n\r\n        <CardHeader className=\"relative z-10\">\r\n          <div className=\"flex items-start justify-between gap-3\">\r\n            <div className=\"flex-1\">\r\n              <div className=\"flex flex-row justify-between\">\r\n                <div className=\"flex items-center gap-2 mb-3\">\r\n                  <div className=\"p-2 bg-[#F66868]/10 rounded-xl\">\r\n                    <GraduationCap className=\"h-5 w-5 text-[#F66868]\" />\r\n                  </div>\r\n                  <span className=\"text-xs font-bold text-[#F66868]/70 uppercase tracking-wider\">\r\n                    Giáo trình của bạn\r\n                  </span>\r\n                </div>\r\n                {syllabus && Number(syllabus.id) > 11 && (\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant=\"default\"\r\n                    className=\"bg-[#F66868] text-white transition-all duration-300 rounded-sm shadow-sm hover:bg-[#F66868]/60 hover:text-white\"\r\n                    onClick={() => setIsChoiceModalOpen(true)}\r\n                  >\r\n                    <SquarePen className=\"h-4 w-4 mr-1\" />\r\n                    Điều chỉnh\r\n                  </Button>\r\n                )}\r\n              </div>\r\n              <CardTitle className=\"text-2xl font-bold text-[#F66868]\">\r\n                {syllabus?.title || \"Chọn giáo trình\"}\r\n              </CardTitle>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"space-y-5 relative z-10\">\r\n          {/* Syllabus Description */}\r\n          {syllabus?.description && (\r\n            <div className=\"bg-white/60 backdrop-blur-sm rounded-2xl p-4 border border-rose-100\">\r\n              <p className=\"text-sm text-gray-700 leading-relaxed\">\r\n                {syllabus.description}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Stats Grid */}\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            {/* Lessons Stat */}\r\n            <div className=\"bg-white rounded-2xl p-4 shadow-sm border border-rose-100 hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-center gap-2 mb-2\">\r\n                <div className=\"p-2 bg-[#F66868]/10 rounded-lg\">\r\n                  <BookOpen className=\"h-4 w-4 text-[#F66868]\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">\r\n                {completedCount}\r\n                <span className=\"text-lg text-gray-400\">/{totalLessons}</span>\r\n              </div>\r\n              <div className=\"text-xs text-gray-600 mt-1 font-medium\">\r\n                Bài học\r\n              </div>\r\n            </div>\r\n\r\n            {/* Vocabulary Stat */}\r\n            <div className=\"bg-white rounded-2xl p-4 shadow-sm border border-emerald-100 hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-center gap-2 mb-2\">\r\n                <div className=\"p-2 bg-emerald-100 rounded-lg\">\r\n                  <Sparkles className=\"h-4 w-4 text-emerald-600\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">\r\n                {vocabularyComplete}\r\n                <span className=\"text-lg text-gray-400\">\r\n                  /{totalVocabulary}\r\n                </span>\r\n              </div>\r\n              <div className=\"text-xs text-gray-600 mt-1 font-medium\">\r\n                Từ vựng\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Vocabulary Progress */}\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center justify-between text-sm\">\r\n              <span className=\"text-gray-600 font-semibold\">\r\n                Tiến độ từ vựng\r\n              </span>\r\n              <span className=\"font-bold text-emerald-600 text-base\">\r\n                {Math.round(vocabPercentage)}%\r\n              </span>\r\n            </div>\r\n            <div className=\"relative h-3 bg-emerald-100 rounded-full overflow-hidden shadow-inner\">\r\n              <div\r\n                className=\"h-full bg-gradient-to-r from-emerald-500 via-green-500 to-emerald-500 transition-all duration-700 ease-out rounded-full relative\"\r\n                style={{ width: `${vocabPercentage}%` }}\r\n              >\r\n                <div className=\"absolute inset-0 bg-white/30 animate-pulse\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Achievement Badge */}\r\n          {completionPercentage === 100 && (\r\n            <div className=\"relative overflow-hidden rounded-2xl bg-white/70 backdrop-blur-md border border-[#F66868]/40 p-5 text-center shadow-sm\">\r\n              <div className=\"absolute inset-0 bg-gradient-to-r from-[#F66868]/20 via-[#F66868]/15 to-[#F66868]/25 animate-pulse\"></div>\r\n              <div className=\"relative z-10\">\r\n                <Trophy className=\"h-10 w-10 text-[#F66868] mx-auto mb-2 drop-shadow-sm\" />\r\n                <p className=\"text-[#F66868] font-bold text-base\">\r\n                  Hoàn thành xuất sắc! 🎉\r\n                </p>\r\n                <p className=\"text-[#F66868]/80 text-sm mt-1\">\r\n                  Bạn đã chinh phục giáo trình này\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Lesson List */}\r\n      <div className=\"space-y-2 max-h-[600px] overflow-y-auto pr-2\">\r\n        {lessons.map((lesson) => (\r\n          <div\r\n            key={lesson.id}\r\n            onClick={() => onSelectLesson?.(lesson.id)}\r\n            className={`p-3 rounded-xl border text-sm transition-all cursor-pointer backdrop-blur-sm\r\n    \r\n    ${\r\n      lesson.lesson_status === \"complete\"\r\n        ? \"border-green-400 bg-green-50 hover:bg-green-100\"\r\n        : \"hover:bg-rose-50 hover:border-[#F66868] \"\r\n    }          \r\n    ${\r\n      selectedLessonId === lesson.id\r\n        ? \"border-[#F66868] bg-[#F66868]/10 shadow-[0_0_8px_#F66868]/30\"\r\n        : \"\"\r\n    }\r\n    \r\n  `}\r\n          >\r\n            <div className=\"flex gap-3 items-center\">\r\n              <div className=\"flex-shrink-0 mt-0.5\">\r\n                {lesson.lesson_status === \"complete\" && (\r\n                  <CheckCircle2 className=\"h-5 w-5 text-green-500\" />\r\n                )}\r\n                {lesson.lesson_status === \"in-progress\" && (\r\n                  <Circle className=\"h-5 w-5 text-[#F66868] fill-[#F66868]/40 animate-pulse\" />\r\n                )}\r\n                {lesson.lesson_status === \"not_start\" && (\r\n                  <Circle className=\"h-5 w-5 text-gray-300\" />\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"flex w-full flex-row justify-between items-center\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p\r\n                    className={`text-sm font-medium truncate ${\r\n                      lesson.lesson_status === \"complete\"\r\n                        ? \"text-green-700\"\r\n                        : \"text-gray-900\"\r\n                    }`}\r\n                  >\r\n                    {lesson.title}\r\n                  </p>\r\n                  <p\r\n                    className={`text-xs mt-1 ${\r\n                      lesson.lesson_status === \"complete\"\r\n                        ? \"text-green-600/70\"\r\n                        : \"text-gray-500\"\r\n                    }`}\r\n                  >\r\n                    {lesson.vocabulary_count} từ vựng\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <ChoiceModal\r\n        isOpen={isChoiceModalOpen}\r\n        onClose={() => setIsChoiceModalOpen(false)}\r\n        onCreateSyllabus={() => {\r\n          setIsChoiceModalOpen(false);\r\n        }}\r\n        onSetupSchedule={() => {\r\n          setIsChoiceModalOpen(false);\r\n          // Open your schedule setup modal or navigate to schedule page\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5374, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/lesson-tab.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Play,\r\n  CheckCircle2,\r\n  BookOpen,\r\n  Sparkles,\r\n  TrendingUp,\r\n} from \"lucide-react\";\r\nimport LessonPlayer from \"./lesson-player\";\r\nimport ProgressSidebar from \"./progress-sidebar\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\nimport { SyllabusInfo } from \"../../map/page\";\r\n\r\ntype LessonStatus = \"complete\" | \"in-progress\" | \"not_start\";\r\n\r\ninterface Lesson {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  vocabularyCount: number;\r\n  lesson_status: LessonStatus;\r\n  level: \"Cơ bản\";\r\n}\r\n\r\nexport default function LessonTab({\r\n  syllabus,\r\n}: {\r\n  syllabus: SyllabusInfo | undefined;\r\n}) {\r\n  const { user } = useUserStore();\r\n  const [lessons, setLessons] = useState<Lesson[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [selectedLesson, setSelectedLesson] = useState<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!syllabus?.id || !user?.id) {\r\n      setLessons([]);\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchLessons = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        const res = await fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/syllabuses/${syllabus.id}/lessons?user_id=${user.id}`\r\n        );\r\n        if (!res.ok) throw new Error(\"Failed to fetch lessons\");\r\n        const data: { lessons: Lesson[] } = await res.json();\r\n        setLessons(data.lessons || []);\r\n      } catch (e) {\r\n        console.error(e);\r\n        setLessons([]);\r\n      } finally {\r\n        setIsLoading(false);\r\n        setSelectedLesson(null);\r\n      }\r\n    };\r\n\r\n    fetchLessons();\r\n  }, [syllabus?.id, user?.id]);\r\n\r\n  const lessonToPlay = lessons.find((l) => l.id === selectedLesson);\r\n\r\n  if (selectedLesson && lessonToPlay) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={() => setSelectedLesson(null)}\r\n          className=\"mb-4 border-2 border-[#f66868] text-[#f66868] hover:text-white hover:bg-[#f66868] transition-all duration-300 font-semibold shadow-sm\"\r\n        >\r\n          ← Quay Lại Danh Sách\r\n        </Button>\r\n        <LessonPlayer lesson={lessonToPlay} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-20\">\r\n        <div className=\"relative\">\r\n          <div className=\"w-16 h-16 border-4 border-rose-200 border-t-[#f66868] rounded-full animate-spin\"></div>\r\n          <Sparkles className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-6 w-6 text-[#f66868]\" />\r\n        </div>\r\n        <p className=\"mt-6 text-gray-600 font-medium text-lg\">\r\n          Đang tải bài học...\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (lessons.length === 0) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-20 px-4\">\r\n        <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n          <BookOpen className=\"h-16 w-16 text-[#f66868]/60 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n            Chưa có bài học\r\n          </h3>\r\n          <p className=\"text-gray-600\">\r\n            Không tìm thấy bài học nào cho chủ đề này.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const completed = lessons.filter(\r\n    (l) => l.lesson_status === \"complete\"\r\n  ).length;\r\n  const progress = (completed / lessons.length) * 100;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n      <div className=\"lg:col-span-2 space-y-8\">\r\n        {/* Progress Header */}\r\n        <div className=\"relative overflow-hidden rounded-3xl bg-gradient-to-br from-[#f66868] via-[#ff7b7b] to-[#ff8f8f] p-8 text-white shadow-xl\">\r\n          <div className=\"relative z-10\">\r\n            <div className=\"flex justify-between items-start\">\r\n              <div>\r\n                <h2 className=\"text-4xl font-bold mb-3\">Bài Học</h2>\r\n                <p className=\"text-white/90 text-lg font-medium\">\r\n                  Học bài theo cách lộ trình của bạn\r\n                </p>\r\n              </div>\r\n              <div className=\"bg-white/20 rounded-2xl px-6 py-4 text-center border border-white/30\">\r\n                <div className=\"text-3xl font-bold\">\r\n                  {completed}/{lessons.length}\r\n                </div>\r\n                <div className=\"text-sm text-white/90 mt-1\">Hoàn thành</div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            <div className=\"mt-6\">\r\n              <div className=\"flex justify-between mb-2\">\r\n                <span className=\"text-sm font-semibold text-white/90\">\r\n                  Tiến độ học tập\r\n                </span>\r\n                <span className=\"text-sm font-bold\">\r\n                  {Math.round(progress)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"h-3 bg-white/20 rounded-full overflow-hidden\">\r\n                <div\r\n                  className=\"h-full bg-white rounded-full transition-all duration-1000 ease-out\"\r\n                  style={{ width: `${progress}%` }}\r\n                ></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Lessons Grid */}\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          {lessons.map((lesson, index) => {\r\n            const isComplete = lesson.lesson_status === \"complete\";\r\n            const isPlayable =\r\n              lesson.lesson_status === \"in-progress\" ||\r\n              lesson.lesson_status === \"not_start\";\r\n\r\n            return (\r\n              <Card\r\n                key={lesson.id}\r\n                onClick={() => setSelectedLesson(lesson.id)}\r\n                className={`group relative overflow-hidden rounded-3xl border-2 transition-all duration-500 hover:scale-[1.02] cursor-pointer \r\n                  ${\r\n                    isComplete\r\n                      ? \"border-emerald-200 hover:border-emerald-400 hover:shadow-[0_8px_30px_rgb(16,185,129,0.15)]\"\r\n                      : \"border-rose-100 hover:border-[#F66868] hover:shadow-[0_8px_30px_rgba(246,104,104,0.15)]\"\r\n                  }`}\r\n              >\r\n                {/* Hover Overlay */}\r\n                <div\r\n                  className={`absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ${\r\n                    isComplete\r\n                      ? \"bg-gradient-to-br from-emerald-50/50 to-green-50/50\"\r\n                      : \"bg-gradient-to-br from-rose-50/50 to-pink-50/50\"\r\n                  }`}\r\n                />\r\n\r\n                <CardHeader className=\"pt-6 pb-4 relative z-10\">\r\n                  <div className=\"flex justify-between items-start gap-4\">\r\n                    <div className=\"flex-1\">\r\n                      <div\r\n                        className={`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold mb-3 ${\r\n                          isComplete\r\n                            ? \"bg-emerald-100 text-emerald-700\"\r\n                            : \"bg-rose-100 text-[#f66868]\"\r\n                        }`}\r\n                      >\r\n                        <span>Bài {index + 1}</span>\r\n                        {lesson.lesson_status === \"in-progress\" && (\r\n                          <TrendingUp className=\"h-3 w-3\" />\r\n                        )}\r\n                      </div>\r\n\r\n                      <CardTitle\r\n                        className={`text-xl font-bold leading-snug transition-colors ${\r\n                          isComplete\r\n                            ? \"text-emerald-600 group-hover:text-emerald-700\"\r\n                            : \"text-gray-800 group-hover:text-[#f66868]\"\r\n                        }`}\r\n                      >\r\n                        {lesson.title}\r\n                      </CardTitle>\r\n\r\n                      <p className=\"text-sm text-gray-600 mt-2 line-clamp-2\">\r\n                        {lesson.description}\r\n                      </p>\r\n                    </div>\r\n\r\n                    {isComplete && (\r\n                      <CheckCircle2 className=\"h-8 w-8 text-emerald-500 drop-shadow-sm\" />\r\n                    )}\r\n                  </div>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"space-y-4 pb-6 relative z-10\">\r\n                  <Button\r\n                    className={`w-full h-12 rounded-xl text-sm font-bold shadow-md hover:shadow-xl transition-all duration-300\r\n                      ${\r\n                        isComplete\r\n                          ? \"bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white\"\r\n                          : isPlayable\r\n                          ? \"bg-gradient-to-r from-[#F66868] to-[#ff7b7b] hover:from-[#f55555] hover:to-[#F66868] text-white\"\r\n                          : \"bg-gray-100 text-gray-500 cursor-not-allowed\"\r\n                      }`}\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      setSelectedLesson(lesson.id);\r\n                    }}\r\n                  >\r\n                    {isComplete && (\r\n                      <>\r\n                        <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n                        Ôn Tập\r\n                      </>\r\n                    )}\r\n                    {lesson.lesson_status === \"in-progress\" && (\r\n                      <>\r\n                        <Play className=\"h-4 w-4 mr-2\" />\r\n                        Tiếp Tục\r\n                      </>\r\n                    )}\r\n                    {lesson.lesson_status === \"not_start\" && (\r\n                      <>\r\n                        <Play className=\"h-4 w-4 mr-2\" />\r\n                        Bắt Đầu\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                </CardContent>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"lg:col-span-1\">\r\n        <div className=\"sticky top-24\">\r\n          <ProgressSidebar\r\n            syllabus={syllabus}\r\n            lessons={lessons}\r\n            selectedLessonId={selectedLesson ?? undefined}\r\n            onSelectLesson={setSelectedLesson}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5883, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport RequireLogin from \"@/components/RequireLogin\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { User, useUserStore } from \"@/store/useUserStore\";\r\nimport { BookOpen, Hand, Zap } from \"lucide-react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport PracticeTab from \"./components/practice-tab\";\r\nimport LessonTab from \"./components/lesson-tab\";\r\nimport { removeBrackets } from \"@/lib/utils\";\r\nimport { SyllabusInfo } from \"../map/page\"; // (Assuming this path is correct)\r\n\r\nconst tempUser: User = {\r\n  id: \"1\",\r\n  name: \"Khanh An\",\r\n  email: \"iamyasou00@gmail.com\",\r\n  avatar: \"/avatar.png\",\r\n};\r\n\r\n// --- 1. CHANGE COMPONENT SIGNATURE ---\r\n// Accept 'params' which contains the { id: \"2\" } from the URL\r\nexport default function StudyPage({ params }: { params: { id: string } }) {\r\n  const { user, setUser } = useUserStore();\r\n  const [activeTab, setActiveTab] = useState(\"lessons\");\r\n  const [syllabuses, setSyllabuses] = useState<SyllabusInfo[]>([]);\r\n  const [selectedSyllabusId, setSelectedSyllabusId] = useState<string | null>(\r\n    null\r\n  );\r\n  const [isLoadingSyllabus, setIsLoadingSyllabus] = useState(true);\r\n  const [isChoiceModalOpen, setIsChoiceModalOpen] = useState(false);\r\n\r\n  // This effect fetches data and sets the selected ID\r\n  useEffect(() => {\r\n    if (!user?.id) return;\r\n\r\n    const fetchSyllabuses = async () => {\r\n      try {\r\n        setIsLoadingSyllabus(true);\r\n        let url = `${process.env.NEXT_PUBLIC_SERVER_URL}/api/syllabuses?user_id=${user.id}`;\r\n\r\n        // 2. Only add the syllabus_id parameter IF it has a value\r\n        if (selectedSyllabusId) {\r\n          url += `&syllabus_id=${selectedSyllabusId}`;\r\n        }\r\n        const response = await fetch(url);\r\n        if (!response.ok) {\r\n          throw new Error(\"Failed to fetch syllabuses\");\r\n        }\r\n\r\n        const data: { syllabuses: SyllabusInfo[] } = await response.json();\r\n        const sortedSyllabuses = data.syllabuses.sort((a, b) => {\r\n          const isAIn2to11 = a.id >= 2 && a.id <= 11;\r\n          const isBIn2to11 = b.id >= 2 && b.id <= 11;\r\n\r\n          if (isAIn2to11 && !isBIn2to11) return 1; // a goes after b\r\n          if (!isAIn2to11 && isBIn2to11) return -1; // a goes before b\r\n          return a.id - b.id; // both in same group, sort ascending\r\n        });\r\n        // --- 3. FIX: SET ALL SYLLABUSES FOR THE DROPDOWN ---\r\n        // Do not filter the list, just set the full sorted list\r\n        setSyllabuses(sortedSyllabuses);\r\n\r\n        // --- 4. NEW SELECTION LOGIC (PRIORITIZED) ---\r\n\r\n        // Check if the ID from the URL is valid\r\n      } catch (error) {\r\n        console.error(\"Error fetching syllabuses:\", error);\r\n      } finally {\r\n        setIsLoadingSyllabus(false);\r\n      }\r\n    };\r\n\r\n    fetchSyllabuses();\r\n\r\n    // --- 5. ADD 'urlSyllabusId' TO DEPENDENCY ARRAY ---\r\n    // This ensures the component reacts if the URL ID changes\r\n  }, [user]);\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"flex flex-col justify-center items-center w-full h-screen\">\r\n        <RequireLogin />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-background to-secondary/20\">\r\n      {/* Header */}\r\n      <header className=\"sticky top-0 z-50 border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\r\n        <div className=\"container mx-auto px-4 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"flex h-10 w-10 items-center justify-center rounded-lg bg-[#f66868] text-primary-foreground\">\r\n                <Hand className=\"h-6 w-6\" />\r\n              </div>\r\n              <h1 className=\"text-2xl text-[#f66868] font-bold\">Học Kí Hiệu</h1>\r\n            </div>\r\n            <Tabs\r\n              value={activeTab}\r\n              onValueChange={setActiveTab}\r\n              className=\"w-fit text-3xl\"\r\n            >\r\n              <TabsList className=\"grid w-fit grid-cols-2 lg:inline-grid gap-4 mx-auto p-1.5 rounded-full shadow-inner h-fit bg-rose-50/70 border-2 border-rose-200/60\">\r\n                <TabsTrigger\r\n                  value=\"lessons\"\r\n                  className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-rose-600 rounded-full transition-all duration-300 hover:bg-[#F66868]/10 data-[state=active]:bg-[#F66868] data-[state=active]:text-white data-[state=active]:shadow-[0_0_8px_#F66868] cursor-pointer\"\r\n                >\r\n                  <BookOpen className=\"h-4 w-4\" />\r\n                  <span className=\"hidden sm:inline \">Bài Học</span>\r\n                </TabsTrigger>\r\n\r\n                <TabsTrigger\r\n                  value=\"practice\"\r\n                  className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-rose-600 rounded-full transition-all duration-300 hover:bg-[#F66868]/10 data-[state=active]:bg-[#F66868] data-[state=active]:text-white data-[state=active]:shadow-[0_0_8px_#F66868] cursor-pointer\"\r\n                >\r\n                  <Zap className=\"h-4 w-4\" />\r\n                  <span className=\"hidden sm:inline\">Luyện Tập</span>\r\n                </TabsTrigger>\r\n              </TabsList>\r\n            </Tabs>\r\n            {/* --- SYLLABUS PICKING UI --- */}\r\n            <div>\r\n              {isLoadingSyllabus ? (\r\n                <div className=\"h-10 w-[280px] animate-pulse rounded-full bg-gray-200\" />\r\n              ) : (\r\n                <Select\r\n                  // FIX 1: Safer 'value' prop.\r\n                  // This correctly handles `null`, `undefined`, or a value of `0`.\r\n                  value={selectedSyllabusId?.toString() ?? \"\"}\r\n                  // FIX 2: Ensure you set a Number in your state.\r\n                  // 'onValueChange' always returns a string.\r\n                  onValueChange={(value) =>\r\n                    setSelectedSyllabusId(Number(value))\r\n                  }\r\n\r\n                  // FIX 3: Removed redundant 'defaultValue'.\r\n                  // 'placeholder' in 'SelectValue' is the correct prop to use.\r\n                >\r\n                  <SelectTrigger\r\n                    className=\"w-[280px] gap-2 rounded-full border-2 \r\n               border-rose-200/60 bg-rose-50/70 text-rose-600 shadow-inner \r\n               hover:bg-rose-100 focus:ring-rose-500 text-left\"\r\n                  >\r\n                    <SelectValue placeholder=\"Chọn chủ đề\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {syllabuses.map((syllabus) => {\r\n                      // FIX 4: Your requested logic.\r\n                      // Check if the ID is outside the standard range (2-11).\r\n                      const isPersonalized =\r\n                        syllabus.id < 2 || syllabus.id > 11;\r\n\r\n                      return (\r\n                        <SelectItem\r\n                          key={syllabus.id}\r\n                          value={syllabus.id.toString()}\r\n                          disabled={syllabus.status === \"locked\"}\r\n                          // FIX 1: Simplified styling.\r\n                          // Use 'flex' and 'items-center'. 'ml-auto' on the child\r\n                          // is cleaner than 'justify-between' on the parent.\r\n                          className=\"flex justify-between\"\r\n                        >\r\n                          <div>{removeBrackets(syllabus.title)}</div>\r\n                          {isPersonalized && (\r\n                            <div className=\"px-2.5 py-0.5 rounded-full text-xs font-medium bg-[#f66868]/10 text-rose-600 border border-red-500/50\">\r\n                              Cá nhân hoá\r\n                            </div>\r\n                          )}\r\n                        </SelectItem>\r\n                      );\r\n                    })}\r\n                  </SelectContent>\r\n                </Select>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"container mx-auto px-4 py-8\">\r\n        <Tabs\r\n          value={activeTab}\r\n          onValueChange={setActiveTab}\r\n          className=\"w-full text-3xl\"\r\n        >\r\n          <TabsContent value=\"lessons\" className=\"space-y-6\">\r\n            <LessonTab\r\n              syllabus={syllabuses.find(\r\n                (syllabus) => syllabus.id === Number(selectedSyllabusId)\r\n              )}\r\n            />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"practice\" className=\"space-y-6\">\r\n            <PracticeTab syllabusId={selectedSyllabusId} />\r\n          </TabsContent>\r\n        </Tabs>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}