{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/RequireLogin/index.tsx"],"sourcesContent":["import Image from \"next/image\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function RequireLogin() {\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-full bg-white p-8\">\r\n      <div></div>\r\n      <Image\r\n        src=\"/study_desk.svg\"\r\n        alt=\"Login required illustration\"\r\n        height={360}\r\n        width={360}\r\n        className=\"mb-10 2xl:hidden\"\r\n      />\r\n      <Image\r\n        src=\"/study_desk.svg\"\r\n        alt=\"Login required illustration\"\r\n        height={540}\r\n        width={540}\r\n        className=\"mb-10 hidden 2xl:flex\"\r\n      />\r\n      <h1 className=\"text-2xl xl:text-4xl font-bold text-gray-800 mb-2\">\r\n        Bạn chưa đăng nhập\r\n      </h1>\r\n      <p className=\"text-gray-600 mb-6 xl:text-xl\">\r\n        Hãy đăng nhập để sử dụng tất cả các tính năng.\r\n      </p>\r\n      <Link\r\n        href=\"/login\"\r\n        className=\"px-6 py-3 bg-[#F66868] text-white rounded-xl shadow-md hover:bg-[#F66868]/70 transition-all duration-300\"\r\n      >\r\n        Đăng nhập ngay\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,SAAS;IACtB,qBACE,6NAAC;QAAI,WAAU;;0BACb,6NAAC;;;;;0BACD,6NAAC,2KAAK;gBACJ,KAAI;gBACJ,KAAI;gBACJ,QAAQ;gBACR,OAAO;gBACP,WAAU;;;;;;0BAEZ,6NAAC,2KAAK;gBACJ,KAAI;gBACJ,KAAI;gBACJ,QAAQ;gBACR,OAAO;gBACP,WAAU;;;;;;0BAEZ,6NAAC;gBAAG,WAAU;0BAAoD;;;;;;0BAGlE,6NAAC;gBAAE,WAAU;0BAAgC;;;;;;0BAG7C,6NAAC,0MAAI;gBACH,MAAK;gBACL,WAAU;0BACX;;;;;;;;;;;;AAKP;KAhCwB","debugId":null}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\nexport function formatActor(name: string) {\r\n  if (name == \"teacher_agent\") return \"Mini Wave Teacher\";\r\n  else \"Agent\";\r\n}\r\n\r\nexport function removeBrackets(text: string): string {\r\n  // Remove anything inside parentheses (and the parentheses)\r\n  return text.replace(/\\s*\\(.*?\\)/g, \"\").trim();\r\n}\r\n/**\r\n * Formats an ISO time string into a \"time ago\" format.\r\n * @param timeString The ISO 8601 timestamp (e.g., \"2025-10-25T12:30:44.488876\")\r\n */\r\nexport function formatTime(timeString: string): string {\r\n  const time = new Date(timeString);\r\n  const now = new Date();\r\n\r\n  // Get the difference in seconds\r\n  const seconds = Math.floor((now.getTime() - time.getTime()) / 1000);\r\n\r\n  // Less than 5 seconds\r\n  if (seconds < 5) {\r\n    return \"just now\";\r\n  }\r\n\r\n  // Less than 1 minute\r\n  if (seconds < 60) {\r\n    return `${seconds} seconds ago`;\r\n  }\r\n\r\n  // Less than 1 hour\r\n  const minutes = Math.floor(seconds / 60);\r\n  if (minutes < 60) {\r\n    return `${minutes} minute${minutes > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  // Less than 1 day\r\n  const hours = Math.floor(minutes / 60);\r\n  if (hours < 24) {\r\n    return `${hours} hour${hours > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  // Less than 1 month\r\n  const days = Math.floor(hours / 24);\r\n  if (days < 30) {\r\n    return `${days} day${days > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  // Less than 1 year\r\n  const months = Math.floor(days / 30);\r\n  if (months < 12) {\r\n    return `${months} month${months > 1 ? \"s\" : \"\"} ago`;\r\n  }\r\n\r\n  // Years\r\n  const years = Math.floor(months / 12);\r\n  return `${years} year${years > 1 ? \"s\" : \"\"} ago`;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEO,SAAS;IAAG,IAAA,IAAA,OAAA,UAAA,QAAA,AAAG,SAAH,UAAA,OAAA,OAAA,GAAA,OAAA,MAAA;QAAG,OAAH,QAAA,SAAA,CAAA,KAAuB;;IACxC,OAAO,IAAA,yMAAO,EAAC,IAAA,gLAAI,EAAC;AACtB;AAEO,SAAS,YAAY,IAAY;IACtC,IAAI,QAAQ,iBAAiB,OAAO;SAC/B;AACP;AAEO,SAAS,eAAe,IAAY;IACzC,2DAA2D;IAC3D,OAAO,KAAK,OAAO,CAAC,eAAe,IAAI,IAAI;AAC7C;AAKO,SAAS,WAAW,UAAkB;IAC3C,MAAM,OAAO,IAAI,KAAK;IACtB,MAAM,MAAM,IAAI;IAEhB,gCAAgC;IAChC,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,IAAI,OAAO,KAAK,KAAK,OAAO,EAAE,IAAI;IAE9D,sBAAsB;IACtB,IAAI,UAAU,GAAG;QACf,OAAO;IACT;IAEA,qBAAqB;IACrB,IAAI,UAAU,IAAI;QAChB,OAAO,AAAC,GAAU,OAAR,SAAQ;IACpB;IAEA,mBAAmB;IACnB,MAAM,UAAU,KAAK,KAAK,CAAC,UAAU;IACrC,IAAI,UAAU,IAAI;QAChB,OAAO,AAAC,GAAmB,OAAjB,SAAQ,WAAgC,OAAvB,UAAU,IAAI,MAAM,IAAG;IACpD;IAEA,kBAAkB;IAClB,MAAM,QAAQ,KAAK,KAAK,CAAC,UAAU;IACnC,IAAI,QAAQ,IAAI;QACd,OAAO,AAAC,GAAe,OAAb,OAAM,SAA4B,OAArB,QAAQ,IAAI,MAAM,IAAG;IAC9C;IAEA,oBAAoB;IACpB,MAAM,OAAO,KAAK,KAAK,CAAC,QAAQ;IAChC,IAAI,OAAO,IAAI;QACb,OAAO,AAAC,GAAa,OAAX,MAAK,QAA0B,OAApB,OAAO,IAAI,MAAM,IAAG;IAC3C;IAEA,mBAAmB;IACnB,MAAM,SAAS,KAAK,KAAK,CAAC,OAAO;IACjC,IAAI,SAAS,IAAI;QACf,OAAO,AAAC,GAAiB,OAAf,QAAO,UAA8B,OAAtB,SAAS,IAAI,MAAM,IAAG;IACjD;IAEA,QAAQ;IACR,MAAM,QAAQ,KAAK,KAAK,CAAC,SAAS;IAClC,OAAO,AAAC,GAAe,OAAb,OAAM,SAA4B,OAArB,QAAQ,IAAI,MAAM,IAAG;AAC9C","debugId":null}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Tabs({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\r\n  return (\r\n    <TabsPrimitive.Root\r\n      data-slot=\"tabs\"\r\n      className={cn(\"flex flex-col gap-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsList({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\r\n  return (\r\n    <TabsPrimitive.List\r\n      data-slot=\"tabs-list\"\r\n      className={cn(\r\n        \"bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsTrigger({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\r\n  return (\r\n    <TabsPrimitive.Trigger\r\n      data-slot=\"tabs-trigger\"\r\n      className={cn(\r\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\r\n  return (\r\n    <TabsPrimitive.Content\r\n      data-slot=\"tabs-content\"\r\n      className={cn(\"flex-1 outline-none\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,KAGoC;QAHpC,EACZ,SAAS,EACT,GAAG,OAC6C,GAHpC;IAIZ,qBACE,6NAAC,2MAAkB;QACjB,aAAU;QACV,WAAW,IAAA,4JAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,SAAS,KAGgC;QAHhC,EAChB,SAAS,EACT,GAAG,OAC6C,GAHhC;IAIhB,qBACE,6NAAC,2MAAkB;QACjB,aAAU;QACV,WAAW,IAAA,4JAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,KAGgC;QAHhC,EACnB,SAAS,EACT,GAAG,OACgD,GAHhC;IAInB,qBACE,6NAAC,8MAAqB;QACpB,aAAU;QACV,WAAW,IAAA,4JAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,KAGgC;QAHhC,EACnB,SAAS,EACT,GAAG,OACgD,GAHhC;IAInB,qBACE,6NAAC,8MAAqB;QACpB,aAAU;QACV,WAAW,IAAA,4JAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;MAXS","debugId":null}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Select({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\r\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\r\n}\r\n\r\nfunction SelectGroup({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\r\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\r\n}\r\n\r\nfunction SelectValue({\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\r\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\r\n}\r\n\r\nfunction SelectTrigger({\r\n  className,\r\n  size = \"default\",\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\r\n  size?: \"sm\" | \"default\"\r\n}) {\r\n  return (\r\n    <SelectPrimitive.Trigger\r\n      data-slot=\"select-trigger\"\r\n      data-size={size}\r\n      className={cn(\r\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <SelectPrimitive.Icon asChild>\r\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\r\n      </SelectPrimitive.Icon>\r\n    </SelectPrimitive.Trigger>\r\n  )\r\n}\r\n\r\nfunction SelectContent({\r\n  className,\r\n  children,\r\n  position = \"popper\",\r\n  align = \"center\",\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\r\n  return (\r\n    <SelectPrimitive.Portal>\r\n      <SelectPrimitive.Content\r\n        data-slot=\"select-content\"\r\n        className={cn(\r\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md\",\r\n          position === \"popper\" &&\r\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n          className\r\n        )}\r\n        position={position}\r\n        align={align}\r\n        {...props}\r\n      >\r\n        <SelectScrollUpButton />\r\n        <SelectPrimitive.Viewport\r\n          className={cn(\r\n            \"p-1\",\r\n            position === \"popper\" &&\r\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\r\n          )}\r\n        >\r\n          {children}\r\n        </SelectPrimitive.Viewport>\r\n        <SelectScrollDownButton />\r\n      </SelectPrimitive.Content>\r\n    </SelectPrimitive.Portal>\r\n  )\r\n}\r\n\r\nfunction SelectLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\r\n  return (\r\n    <SelectPrimitive.Label\r\n      data-slot=\"select-label\"\r\n      className={cn(\"text-muted-foreground px-2 py-1.5 text-xs\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectItem({\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\r\n  return (\r\n    <SelectPrimitive.Item\r\n      data-slot=\"select-item\"\r\n      className={cn(\r\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\r\n        <SelectPrimitive.ItemIndicator>\r\n          <CheckIcon className=\"size-4\" />\r\n        </SelectPrimitive.ItemIndicator>\r\n      </span>\r\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n    </SelectPrimitive.Item>\r\n  )\r\n}\r\n\r\nfunction SelectSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\r\n  return (\r\n    <SelectPrimitive.Separator\r\n      data-slot=\"select-separator\"\r\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SelectScrollUpButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollUpButton\r\n      data-slot=\"select-scroll-up-button\"\r\n      className={cn(\r\n        \"flex cursor-default items-center justify-center py-1\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronUpIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollUpButton>\r\n  )\r\n}\r\n\r\nfunction SelectScrollDownButton({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\r\n  return (\r\n    <SelectPrimitive.ScrollDownButton\r\n      data-slot=\"select-scroll-down-button\"\r\n      className={cn(\r\n        \"flex cursor-default items-center justify-center py-1\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <ChevronDownIcon className=\"size-4\" />\r\n    </SelectPrimitive.ScrollDownButton>\r\n  )\r\n}\r\n\r\nexport {\r\n  Select,\r\n  SelectContent,\r\n  SelectGroup,\r\n  SelectItem,\r\n  SelectLabel,\r\n  SelectScrollDownButton,\r\n  SelectScrollUpButton,\r\n  SelectSeparator,\r\n  SelectTrigger,\r\n  SelectValue,\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 509, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-0 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  );\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACZ,qBACE,6NAAC;QACC,aAAU;QACV,WAAW,IAAA,4JAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,6NAAC;QACC,aAAU;QACV,WAAW,IAAA,4JAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACjB,qBACE,6NAAC;QACC,aAAU;QACV,WAAW,IAAA,4JAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACvB,qBACE,6NAAC;QACC,aAAU;QACV,WAAW,IAAA,4JAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,6NAAC;QACC,aAAU;QACV,WAAW,IAAA,4JAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACnB,qBACE,6NAAC;QACC,aAAU;QACV,WAAW,IAAA,4JAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,6NAAC;QACC,aAAU;QACV,WAAW,IAAA,4JAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS","debugId":null}},
    {"offset": {"line": 636, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-[#C73B3B] text-primary-foreground hover:bg-[#C33D3D]/80 transition-all duration-500 cursor-pointer\",\r\n        destructive:\r\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n        \"icon-sm\": \"size-8\",\r\n        \"icon-lg\": \"size-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n);\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean;\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\";\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0MAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,KASb;QATa,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF,GATa;IAUd,MAAM,OAAO,UAAU,2MAAI,GAAG;IAE9B,qBACE,6NAAC;QACC,aAAU;QACV,WAAW,IAAA,4JAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS","debugId":null}},
    {"offset": {"line": 702, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\r\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,KAA4D;QAA5D,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC,GAA5D;IACb,qBACE,6NAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,4JAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 734, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,0MAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,KAM6C;QAN7C,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD,GAN7C;IAOb,MAAM,OAAO,UAAU,2MAAI,GAAG;IAE9B,qBACE,6NAAC;QACC,aAAU;QACV,WAAW,IAAA,4JAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAhBS","debugId":null}},
    {"offset": {"line": 787, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/quiz-player.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  CardTitle,\r\n  CardDescription,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, XCircle, CheckCircle2, Trophy } from \"lucide-react\";\r\nimport { PracticeItem } from \"./practice-tab\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\n\r\n// --- Types for Question API ---\r\ninterface Option {\r\n  id: number;\r\n  option_text: string;\r\n  is_correct: boolean;\r\n}\r\n\r\ninterface Question {\r\n  id: number;\r\n  question_text: string;\r\n  video: string;\r\n  type: \"mcq\" | \"true_false\";\r\n  options: Option[];\r\n}\r\n\r\ninterface LessonQuizResponse {\r\n  quiz_id: number | null;\r\n  questions: Question[];\r\n}\r\n\r\ninterface QuizPlayerProps {\r\n  quiz: PracticeItem;\r\n  onBack: (shouldRefetch: boolean) => void; // <-- SỬA 1: Thêm tham số boolean\r\n}\r\n\r\nexport default function QuizPlayer({ quiz, onBack }: QuizPlayerProps) {\r\n  // --- State cho việc tải câu hỏi ---\r\n  const [questions, setQuestions] = useState<Question[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // --- State cho quá trình làm quiz ---\r\n  const [phase, setPhase] = useState<\"quiz\" | \"results\">(\"quiz\");\r\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\r\n  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);\r\n  const [showQuizResult, setShowQuizResult] = useState(false);\r\n  const [isQuizCorrect, setIsQuizCorrect] = useState(false);\r\n  const [score, setScore] = useState(0);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const { user } = useUserStore();\r\n\r\n  // --- 1. Tải câu hỏi ---\r\n  useEffect(() => {\r\n    if (!quiz.lesson_id) {\r\n      setIsLoading(false);\r\n      setError(\"Bài quiz này không liên kết với bài học nào.\");\r\n      return;\r\n    }\r\n\r\n    const fetchQuestions = async () => {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      try {\r\n        const res = await fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/lesson-quiz?lesson_id=${quiz.lesson_id}`\r\n        );\r\n        if (!res.ok) throw new Error(\"Không thể tải câu hỏi.\");\r\n        const data: LessonQuizResponse = await res.json();\r\n        if (!data.questions || data.questions.length === 0) {\r\n          throw new Error(\"Bài quiz này chưa có câu hỏi.\");\r\n        }\r\n        setQuestions(data.questions);\r\n      } catch (e: any) {\r\n        setError(e.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchQuestions();\r\n  }, [quiz.lesson_id]);\r\n\r\n  // --- 2. Logic xử lý quiz ---\r\n  if (questions.length === 0 && !isLoading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-16 px-4\">\r\n        <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n          <XCircle className=\"h-16 w-16 text-red-500 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n            Đã xảy ra lỗi\r\n          </h3>\r\n          <p className=\"text-gray-600\">{error || \"Không có câu hỏi.\"}</p>\r\n          <Button\r\n            onClick={() => onBack(false)} // <-- SỬA 2: Gửi 'false'\r\n            variant=\"outline\"\r\n            className=\"mt-4\"\r\n          >\r\n            Quay lại\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-32\">\r\n        <Loader2 className=\"h-12 w-12 animate-spin text-[#F66868]\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const currentQuestion = questions[currentQuestionIndex];\r\n  const correctAnswerIndex =\r\n    currentQuestion?.options.findIndex((opt) => opt.is_correct) ?? -1;\r\n\r\n  const handleQuizAnswer = (selectedIndex: number) => {\r\n    if (showQuizResult) return;\r\n    const correctOption = currentQuestion.options.find((opt) => opt.is_correct);\r\n    const selectedOption = currentQuestion.options[selectedIndex];\r\n    const isCorrect = correctOption?.id === selectedOption?.id;\r\n\r\n    setSelectedAnswer(selectedIndex);\r\n    setIsQuizCorrect(isCorrect);\r\n    setShowQuizResult(true);\r\n\r\n    if (isCorrect) {\r\n      setScore((prevScore) => prevScore + 100 / questions.length);\r\n    }\r\n  };\r\n\r\n  const handleNextQuestion = () => {\r\n    if (!showQuizResult) return;\r\n    setShowQuizResult(false);\r\n    setSelectedAnswer(null);\r\n    if (currentQuestionIndex < questions.length - 1) {\r\n      setCurrentQuestionIndex((prev) => prev + 1);\r\n    }\r\n  };\r\n\r\n  const handleQuizEnd = async () => {\r\n    if (!quiz.user_quiz_id || !user?.id) {\r\n      console.error(\r\n        \"Thiếu ID lượt làm bài (user_quiz_id) hoặc ID người dùng. Không thể nộp điểm.\"\r\n      );\r\n      setError(\"Lỗi: Không thể nộp điểm. Vui lòng tải lại.\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n    const finalScore = Math.round(score);\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_SERVER_URL}/api/quiz/submit`,\r\n        {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            quiz_id: quiz.user_quiz_id,\r\n            user_id: parseInt(user.id),\r\n            score: finalScore,\r\n            lesson_id: quiz.lesson_id,\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errData = await response.json();\r\n        throw new Error(errData.detail || \"Lỗi khi nộp bài\");\r\n      }\r\n\r\n      await response.json();\r\n      setPhase(\"results\");\r\n    } catch (err: any) {\r\n      console.error(\"Lỗi API nộp bài:\", err);\r\n      setError(err.message);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // --- 3. Render các trạng thái ---\r\n\r\n  if (error && !isSubmitting) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-16 px-4\">\r\n        <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n          <XCircle className=\"h-16 w-16 text-red-500 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n            Đã xảy ra lỗi\r\n          </h3>\r\n          <p className=\"text-gray-600\">{error}</p>\r\n          <Button\r\n            onClick={() => onBack(false)} // <-- SỬA 3: Gửi 'false'\r\n            variant=\"outline\"\r\n            className=\"mt-4\"\r\n          >\r\n            Quay lại\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- Màn hình KẾT QUẢ ---\r\n  if (phase === \"results\") {\r\n    return (\r\n      <div className=\"max-w-3xl mx-auto p-4 py-12\">\r\n        <Card className=\"overflow-hidden rounded-3xl shadow-xl\">\r\n          <CardHeader className=\"text-center bg-gradient-to-br from-[#f66868] to-[#ff8f8f] text-white p-8\">\r\n            <Trophy className=\"h-20 w-20 mx-auto\" />\r\n            <CardTitle className=\"text-4xl font-bold mt-4\">\r\n              Hoàn thành!\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent className=\"p-8 text-center\">\r\n            <div className=\"text-7xl font-bold text-[#F66868]\">\r\n              {score.toFixed(0)}\r\n              <span className=\"text-4xl text-gray-500 ml-2\">điểm</span>\r\n            </div>\r\n            <p className=\"text-lg text-gray-600 mt-4\">\r\n              Cảm ơn bạn đã hoàn thành bài luyện tập.\r\n            </p>\r\n            <Button\r\n              onClick={() => onBack(true)} // <-- SỬA 4: Gửi 'true'\r\n              className=\"w-full h-12 rounded-xl font-bold transition-all duration-300 shadow-md hover:shadow-lg mt-10 bg-[#F66868] hover:bg-[#F66868]/90\"\r\n            >\r\n              Quay về trang Luyện tập\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- Màn hình LÀM QUIZ ---\r\n  return (\r\n    <div className=\"space-y-6 max-w-3xl mx-auto\">\r\n      <Button\r\n        variant=\"outline\"\r\n        onClick={() => onBack(false)} // <-- SỬA 5: Gửi 'false'\r\n        className=\"border-2 border-[#f66868] text-[#f66868] hover:text-white hover:bg-[#f66868] transition-all duration-300 font-semibold shadow-sm\"\r\n      >\r\n        ← Quay Lại Danh Sách\r\n      </Button>\r\n\r\n      {/* Progress Bar */}\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex justify-between text-sm font-medium text-gray-600\">\r\n          <span>{quiz.title}</span>\r\n          <span>\r\n            Câu {currentQuestionIndex + 1} / {questions.length}\r\n          </span>\r\n        </div>\r\n        <div className=\"h-3 rounded-full bg-rose-100 overflow-hidden\">\r\n          <div\r\n            className=\"h-full bg-gradient-to-r from-[#F66868] to-[#ff7b7b] transition-all duration-500\"\r\n            style={{\r\n              width: `${\r\n                ((currentQuestionIndex + 1) / questions.length) * 100\r\n              }%`,\r\n            }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* UI Làm Quiz */}\r\n      <Card className=\"overflow-hidden border-2 shadow-sm\">\r\n        {/* ... (Phần còn lại của CardHeader và CardContent không đổi) ... */}\r\n        <CardHeader className=\"border-b-2 py-2 px-4\">\r\n          <div className=\"flex justify-between items-start\">\r\n            <div>\r\n              <CardTitle className=\"text-lg font-semibold text-foreground\">\r\n                {currentQuestion.question_text}\r\n              </CardTitle>\r\n              {currentQuestion.video && (\r\n                <CardDescription className=\"text-xs mt-0.5\">\r\n                  Xem video và chọn đáp án đúng\r\n                </CardDescription>\r\n              )}\r\n            </div>\r\n            <Badge className=\"bg-[#f66868]/10 text-[#f66868] border border-[#f66868]/30 text-[11px] py-0.5 px-2\">\r\n              Kiểm Tra\r\n            </Badge>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"pt-4 space-y-4 px-4 pb-4\">\r\n          {currentQuestion.video && (\r\n            <div className=\"relative rounded-lg overflow-hidden aspect-video bg-rose-50 shadow-inner\">\r\n              <video\r\n                key={currentQuestion.id}\r\n                src={currentQuestion.video}\r\n                className=\"w-full h-full object-cover\"\r\n                autoPlay\r\n                loop\r\n                muted\r\n              />\r\n              <div className=\"absolute top-0 left-0 h-full w-48 bg-white z-10\"></div>\r\n              <div className=\"absolute top-0 right-0 h-full w-48 bg-white z-10\"></div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            {currentQuestion.options.map((option, index) => (\r\n              <button\r\n                key={option.id}\r\n                onClick={() => handleQuizAnswer(index)}\r\n                disabled={showQuizResult}\r\n                className={`group w-full rounded-lg overflow-hidden border transition-all duration-300 disabled:opacity-60 disabled:cursor-not-allowed ${\r\n                  showQuizResult && selectedAnswer === index\r\n                    ? option.is_correct\r\n                      ? \"border-green-500 ring-2 ring-green-500/50\"\r\n                      : \"border-red-500 ring-2 ring-red-500/50\"\r\n                    : !showQuizResult && selectedAnswer === index\r\n                    ? \"border-[#f66868] ring-2 ring-[#f66868]/50\"\r\n                    : \"border-gray-200 hover:border-[#f66868]/70\"\r\n                }`}\r\n              >\r\n                <div\r\n                  className={`p-3 bg-white border-t text-sm font-medium text-center transition-all duration-300 ${\r\n                    showQuizResult && selectedAnswer === index\r\n                      ? option.is_correct\r\n                        ? \"text-green-700 font-bold\"\r\n                        : \"text-red-700 font-bold\"\r\n                      : !showQuizResult && selectedAnswer === index\r\n                      ? \"text-[#f66868] font-bold\"\r\n                      : \"text-gray-700 group-hover:text-[#f66868]\"\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center justify-center gap-2\">\r\n                    {showQuizResult && selectedAnswer === index && (\r\n                      <>\r\n                        {option.is_correct ? (\r\n                          <CheckCircle2 className=\"w-5 h-5 text-green-600\" />\r\n                        ) : (\r\n                          <XCircle className=\"w-5 h-5 text-red-600\" />\r\n                        )}\r\n                      </>\r\n                    )}\r\n                    <span>{option.option_text}</span>\r\n                  </div>\r\n                </div>\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {showQuizResult && (\r\n            <div\r\n              className={`p-3 rounded-md border text-sm ${\r\n                isQuizCorrect\r\n                  ? \"bg-green-50 border-green-200 text-green-800\"\r\n                  : \"bg-red-50 border-red-200 text-red-800\"\r\n              }`}\r\n            >\r\n              <p className=\"font-semibold mb-0.5\">\r\n                {isQuizCorrect ? \"Tuyệt vời!\" : \"Chưa đúng\"}\r\n              </p>\r\n              <p className=\"text-xs leading-snug\">\r\n                {isQuizCorrect\r\n                  ? `Đúng rồi! Đây là kí hiệu cho \"${currentQuestion.options[correctAnswerIndex]?.option_text}\".`\r\n                  : `Đáp án đúng là \"${currentQuestion.options[correctAnswerIndex]?.option_text}\". Hãy thử lại nhé!`}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {error && isSubmitting && (\r\n            <p className=\"text-sm text-red-600 text-center\">{error}</p>\r\n          )}\r\n\r\n          {showQuizResult && (\r\n            <Button\r\n              onClick={\r\n                currentQuestionIndex === questions.length - 1\r\n                  ? handleQuizEnd\r\n                  : handleNextQuestion\r\n              }\r\n              disabled={isSubmitting}\r\n              className={`w-full h-12 rounded-xl font-bold transition-all duration-300 shadow-md hover:shadow-lg ${\r\n                isQuizCorrect\r\n                  ? \"bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white\"\r\n                  : \"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white\"\r\n              }`}\r\n            >\r\n              {currentQuestionIndex === questions.length - 1 ? (\r\n                isSubmitting ? (\r\n                  <Loader2 className=\"animate-spin\" />\r\n                ) : (\r\n                  \"Hoàn thành Quiz\"\r\n                )\r\n              ) : (\r\n                \"Câu tiếp theo\"\r\n              )}\r\n            </Button>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1418, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/practice-tab.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useMemo, useEffect } from \"react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  Zap,\r\n  Search,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Target,\r\n  Trophy,\r\n  Filter,\r\n  X,\r\n  Loader2,\r\n} from \"lucide-react\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\nimport QuizPlayer from \"./quiz-player\";\r\n\r\n// 1. Define the type for the API response data\r\ntype PracticeItemStatus = \"in_progress\" | \"completed\";\r\n\r\n// --- 2. EXPORT TYPE ĐỂ QUIZPLAYER CÓ THỂ SỬ DỤNG ---\r\nexport interface PracticeItem {\r\n  quiz_id: number;\r\n  title: string;\r\n  description: string | null;\r\n  lesson_id: number;\r\n  total_points: number;\r\n  user_quiz_id: number;\r\n  score: number;\r\n  status: PracticeItemStatus;\r\n  started_at: string;\r\n  submitted_at: string | null;\r\n}\r\n\r\n// ... (const statusOptions, ITEMS_PER_PAGE)\r\nconst statusOptions: { value: PracticeItemStatus; label: string }[] = [\r\n  { value: \"in_progress\", label: \"Đang làm\" },\r\n  { value: \"completed\", label: \"Đã hoàn thành\" },\r\n];\r\n// ------------------------------\r\n\r\nconst ITEMS_PER_PAGE = 4;\r\nexport default function PracticeTab() {\r\n  // --- State for API data ---\r\n  const [practiceItems, setPracticeItems] = useState<PracticeItem[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const { user } = useUserStore();\r\n\r\n  // --- 3. THÊM STATE ĐỂ CHỌN QUIZ ---\r\n  const [selectedQuiz, setSelectedQuiz] = useState<PracticeItem | null>(null);\r\n\r\n  // --- State for filters and pagination ---\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [selectStatus, setSelectStatus] = useState<PracticeItemStatus | null>(\r\n    null\r\n  );\r\n  const fetchPracticeItems = async () => {\r\n    if (!user) {\r\n      setIsLoading(false);\r\n      setError(\"Không tìm thấy thông tin người dùng. Vui lòng đăng nhập lại.\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true); // Luôn đặt loading khi fetch\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_SERVER_URL}/api/quizzes?user_id=${user.id}`\r\n      );\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const data: { quizzes: PracticeItem[] } = await response.json();\r\n      const transformedData = data.quizzes.map((item) => ({\r\n        ...item,\r\n        score: Number(item.score),\r\n      }));\r\n      setPracticeItems(transformedData);\r\n    } catch (err: any) {\r\n      setError(err.message || \"Failed to fetch practice items.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  // ... (useEffect fetchPracticeItems - không thay đổi)\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchPracticeItems();\r\n    } else {\r\n      // Xử lý nếu không có user\r\n      setIsLoading(false);\r\n      setError(\"Không tìm thấy thông tin người dùng. Vui lòng đăng nhập lại.\");\r\n    }\r\n  }, [user]);\r\n\r\n  // ... (filteredItems, totalPages, startIndex, paginatedItems, handlers - không thay đổi)\r\n  const filteredItems = useMemo(() => {\r\n    return practiceItems.filter((item) => {\r\n      const matchesSearch =\r\n        item.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        (item.description &&\r\n          item.description.toLowerCase().includes(searchQuery.toLowerCase()));\r\n\r\n      const matchesStatus = !selectStatus || item.status === selectStatus;\r\n\r\n      return matchesSearch && matchesStatus;\r\n    });\r\n  }, [practiceItems, searchQuery, selectStatus]);\r\n\r\n  const totalPages = Math.ceil(filteredItems.length / ITEMS_PER_PAGE);\r\n  const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;\r\n  const paginatedItems = filteredItems.slice(\r\n    startIndex,\r\n    startIndex + ITEMS_PER_PAGE\r\n  );\r\n\r\n  const handleSearchChange = (value: string) => {\r\n    setSearchQuery(value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleStatusFilter = (status: PracticeItemStatus) => {\r\n    setSelectStatus(selectStatus === status ? null : status);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  // ... (averageScore, totalCompleted - không thay đổi)\r\n  const completedQuizzes = practiceItems.filter(\r\n    (item) => item.status === \"completed\"\r\n  );\r\n\r\n  const totalCompleted = completedQuizzes.length;\r\n\r\n  const averageScore = useMemo(() => {\r\n    if (completedQuizzes.length === 0) {\r\n      return 0;\r\n    }\r\n    const totalScore = completedQuizzes.reduce(\r\n      (acc, item) => acc + item.score,\r\n      0\r\n    );\r\n    return totalScore / completedQuizzes.length;\r\n  }, [completedQuizzes]);\r\n\r\n  // --- 4. CẬP NHẬT RENDER LOGIC ---\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-32\">\r\n        <Loader2 className=\"h-12 w-12 animate-spin text-[#F66868]\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    // ... (error UI - không thay đổi)\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-16 px-4\">\r\n        <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n          <X className=\"h-16 w-16 text-red-500 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n            Đã xảy ra lỗi\r\n          </h3>\r\n          <p className=\"text-gray-600\">{error}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- 5. LOGIC RENDER MỚI (giống hệt LessonTab) ---\r\n  if (selectedQuiz) {\r\n    return (\r\n      <QuizPlayer\r\n        quiz={selectedQuiz}\r\n        onBack={(shouldRefetch: boolean) => {\r\n          setSelectedQuiz(null); // 1. Luôn quay lại danh sách\r\n          if (shouldRefetch) {\r\n            // 2. Chỉ fetch lại nếu được yêu cầu (quiz đã hoàn thành)\r\n            fetchPracticeItems();\r\n          }\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  // --- 6. Đây là UI danh sách quiz (return mặc định) ---\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* --- HEADER: Updated Stats Grid --- */}\r\n      {/* ... (Code header không thay đổi) ... */}\r\n      <div className=\"relative overflow-hidden rounded-3xl bg-gradient-to-br from-[#f66868] via-[#ff7b7b] to-[#ff8f8f] p-8 text-white shadow-xl hover:scale-105 transition-all duration-500 cursor-pointer\">\r\n        <div className=\"relative z-10\">\r\n          <div className=\"flex flex-col md:flex-row md:items-end md:justify-between gap-6\">\r\n            <div>\r\n              <h2 className=\"text-4xl font-bold mb-3 tracking-tight\">\r\n                Luyện Tập\r\n              </h2>\r\n              <p className=\"text-white/90 text-lg font-medium\">\r\n                Cải thiện kỹ năng với các bài tập tương tác thú vị\r\n              </p>\r\n            </div>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"bg-white/20 backdrop-blur-sm rounded-2xl px-4 py-3 text-center border border-white/30\">\r\n                <Target className=\"h-5 w-5 mx-auto mb-1\" />\r\n                <div className=\"text-2xl font-bold\">{totalCompleted}</div>\r\n                <div className=\"text-xs text-white/90\">Hoàn thành</div>\r\n              </div>\r\n              <div className=\"bg-white/20 backdrop-blur-sm rounded-2xl px-4 py-3 text-center border border-white/30\">\r\n                <Trophy className=\"h-5 w-5 mx-auto mb-1\" />\r\n                <div className=\"text-2xl font-bold\">\r\n                  {averageScore.toFixed(0)}\r\n                </div>\r\n                <div className=\"text-xs text-white/90\">Điểm TB</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Decorative Elements */}\r\n        <div className=\"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-32 -mt-32\"></div>\r\n        <div className=\"absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full blur-3xl -ml-24 -mb-24\"></div>\r\n      </div>\r\n\r\n      {/* Search and Filters */}\r\n      {/* ... (Code search/filter không thay đổi) ... */}\r\n      <div className=\"space-y-4\">\r\n        {/* Search Bar (no change) */}\r\n        <div className=\"relative\">\r\n          <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n          <Input\r\n            type=\"text\"\r\n            placeholder=\"Tìm kiếm bài tập theo tên hoặc mô tả...\"\r\n            value={searchQuery}\r\n            onChange={(e) => handleSearchChange(e.target.value)}\r\n            className=\"pl-12 pr-12 h-14 rounded-2xl border-2 border-rose-100 focus:border-[#F66868] text-base shadow-sm\"\r\n          />\r\n          {searchQuery && (\r\n            <button\r\n              onClick={() => handleSearchChange(\"\")}\r\n              className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors\"\r\n            >\r\n              <X className=\"h-5 w-5\" />\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* --- CHANGED: Status Filters --- */}\r\n        <div className=\"bg-gradient-to-r from-rose-50/50 to-pink-50/50 rounded-2xl p-5 border-2 border-rose-100/60 shadow-sm\">\r\n          <div className=\"flex items-center gap-3 flex-wrap\">\r\n            <div className=\"flex items-center gap-2.5 text-sm font-bold text-gray-800 bg-white px-4 py-2 rounded-xl shadow-sm border border-rose-100\">\r\n              <Filter className=\"h-4 w-4 text-[#F66868]\" />\r\n              Trạng thái:\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2 flex-wrap\">\r\n              {statusOptions.map((status) => (\r\n                <Button\r\n                  key={status.value}\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => handleStatusFilter(status.value)}\r\n                  className={`rounded-xl font-semibold transition-all duration-300 border-2 shadow-sm hover:scale-105 hover:shadow-md cursor-pointer ${\r\n                    selectStatus === status.value\r\n                      ? status.value === \"completed\"\r\n                        ? \"bg-gradient-to-r from-emerald-500 to-green-500 text-white border-emerald-400 hover:from-emerald-600 hover:to-green-600 ring-2 ring-emerald-200\"\r\n                        : \"bg-[#F66868] text-white hover:bg-[#F66868]/80 ring-2 ring-[#F66868]\"\r\n                      : \"border-rose-200 bg-white text-gray-700 hover:border-[#F66868] hover:bg-rose-50 hover:text-[#F66868]\"\r\n                  }`}\r\n                >\r\n                  {status.label}\r\n                </Button>\r\n              ))}\r\n            </div>\r\n\r\n            {selectStatus && (\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => setSelectStatus(null)}\r\n                className=\"ml-auto text-gray-500 hover:text-[#F66868] hover:bg-rose-50 rounded-xl font-semibold transition-all duration-300 border-2 border-transparent hover:border-rose-200 cursor-pointer\"\r\n              >\r\n                <X className=\"h-4 w-4 mr-1\" />\r\n                Xóa bộ lọc\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Results count (no change) */}\r\n        <div className=\"text-sm text-gray-600\">\r\n          Tìm thấy{\" \"}\r\n          <span className=\"font-bold text-[#F66868]\">\r\n            {filteredItems.length}\r\n          </span>{\" \"}\r\n          bài tập\r\n        </div>\r\n      </div>\r\n\r\n      {/* 7. Cards Grid (Updated with API data) */}\r\n      {paginatedItems.length > 0 ? (\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          {paginatedItems.map((item) => {\r\n            const isComplete = item.status === \"completed\";\r\n            const progress =\r\n              100 > 0 ? (item.score / 100) * 100 : isComplete ? 100 : 0;\r\n            const clampedProgress = Math.min(100, Math.max(0, progress));\r\n\r\n            return (\r\n              <Card\r\n                key={item.user_quiz_id}\r\n                // --- 7. THAY ĐỔI NHỎ: BỎ CLICK Ở ĐÂY ---\r\n                // onClick={() => setSelectedQuiz(item)} // Chúng ta sẽ đặt click vào Button\r\n                className={`group overflow-hidden border-2 rounded-3xl bg-gradient-to-br transition-all duration-500 py-6 ${\r\n                  isComplete\r\n                    ? \"from-emerald-50 to-green-50/50 border-emerald-200\"\r\n                    : \"from-white to-rose-50/40 border-rose-100\"\r\n                }\r\n                // --- Xóa hover effect ở card ngoài ---\r\n                // hover:scale-[1.02] cursor-pointer \r\n                // hover:border-emerald-400 hover:shadow-[0_8px_30px_rgb(16,185,129,0.15)]\r\n                // hover:border-[#F66868] hover:shadow-[0_8px_30px_rgba(246,104,104,0.15)]\r\n                `}\r\n              >\r\n                {/* ... (CardHeader, CardContent - không thay đổi) ... */}\r\n                <CardHeader className=\"pb-4\">\r\n                  <div className=\"flex items-start justify-between gap-3\">\r\n                    <div className=\"flex-1\">\r\n                      <CardTitle\r\n                        className={`text-xl font-bold mb-2 transition-colors ${\r\n                          isComplete ? \"text-emerald-600\" : \"text-gray-900\" // Xóa group-hover\r\n                        }`}\r\n                      >\r\n                        {item.title}\r\n                      </CardTitle>\r\n                      <CardDescription className=\"text-sm text-gray-600 leading-relaxed\">\r\n                        {item.description ||\r\n                          \"Hoàn thành bài tập này để củng cố kiến thức của bạn.\"}\r\n                      </CardDescription>\r\n                    </div>\r\n\r\n                    <div\r\n                      className={`flex items-center gap-1.5 px-3 py-2 rounded-xl font-bold shadow-sm ${\r\n                        isComplete\r\n                          ? \"bg-emerald-100 text-emerald-700\"\r\n                          : \"bg-rose-100 text-[#F66868]\"\r\n                      }`}\r\n                    >\r\n                      <Zap\r\n                        className={`h-4 w-4 ${\r\n                          isComplete ? \"fill-emerald-400\" : \"fill-[#F66868]/40\"\r\n                        }`}\r\n                      />\r\n                      {item.score}\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"space-y-4\">\r\n                  {/* Progress (using score and total_points) */}\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex items-center justify-between text-sm\">\r\n                      <span className=\"text-gray-600 font-medium\">Điểm</span>\r\n                      <span\r\n                        className={`font-bold ${\r\n                          isComplete ? \"text-emerald-600\" : \"text-[#F66868]\"\r\n                        }`}\r\n                      >\r\n                        {item.score.toFixed(0)} / {100}\r\n                      </span>\r\n                    </div>\r\n                    <div\r\n                      className={`h-3 rounded-full overflow-hidden shadow-inner ${\r\n                        isComplete ? \"bg-emerald-100\" : \"bg-rose-100\"\r\n                      }`}\r\n                    >\r\n                      <div\r\n                        className={`h-full transition-all duration-700 rounded-full relative ${\r\n                          isComplete\r\n                            ? \"bg-gradient-to-r from-emerald-500 to-green-500\"\r\n                            : \"bg-gradient-to-r from-[#F66868] to-[#ff7b7b]\"\r\n                        }`}\r\n                        style={{ width: `${clampedProgress}%` }}\r\n                      >\r\n                        {clampedProgress > 0 && clampedProgress < 100 && (\r\n                          <div className=\"absolute inset-0 bg-white/30 animate-pulse\"></div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* --- 8. ĐẶT ONCLICK VÀO ĐÂY --- */}\r\n                  <Button\r\n                    onClick={() => setSelectedQuiz(item)} // <--- THAY ĐỔI QUAN TRỌNG\r\n                    className={`w-full h-12 rounded-xl font-bold transition-all duration-300 shadow-md hover:shadow-lg hover:scale-[1.03] ${\r\n                      isComplete\r\n                        ? \"bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white\"\r\n                        : item.status === \"in_progress\"\r\n                        ? \"bg-gradient-to-r from-[#F66868] to-[#ff7b7b] hover:from-[#f55555] hover:to-[#F66868] text-white\"\r\n                        : \"bg-gradient-to-r from-rose-100 to-pink-100 text-rose-700 hover:from-rose-200 hover:to-pink-200\"\r\n                    }`}\r\n                  >\r\n                    {isComplete\r\n                      ? \"🎉 Ôn Luyện Lại\"\r\n                      : item.status === \"in_progress\"\r\n                      ? \"Tiếp Tục Luyện Tập →\"\r\n                      : \"Bắt Đầu Luyện Tập\"}\r\n                  </Button>\r\n                </CardContent>\r\n\r\n                <div\r\n                  className={`absolute -top-8 -right-8 w-24 h-24 rounded-full opacity-10 ${\r\n                    isComplete ? \"bg-emerald-400\" : \"bg-[#F66868]\"\r\n                  }`}\r\n                ></div>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        // ... (No Results Found - không thay đổi)\r\n        <div className=\"flex flex-col items-center justify-center py-16 px-4\">\r\n          <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n            <Search className=\"h-16 w-16 text-[#f66868]/60 mx-auto mb-4\" />\r\n            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n              Không tìm thấy bài tập\r\n            </h3>\r\n            <p className=\"text-gray-600\">\r\n              Thử điều chỉnh từ khóa tìm kiếm hoặc bộ lọc của bạn\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Pagination (no changes) */}\r\n      {/* ... (Code Pagination không thay đổi) ... */}\r\n      {filteredItems.length > ITEMS_PER_PAGE && (\r\n        <div className=\"flex items-center justify-center gap-2 pt-4\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"lg\"\r\n            onClick={() => setCurrentPage((prev) => Math.max(1, prev - 1))}\r\n            disabled={currentPage === 1}\r\n            className=\"rounded-xl disabled:cursor-not-allowed\"\r\n          >\r\n            <ChevronLeft className=\"h-4 w-4 mr-1\" />\r\n            Trước\r\n          </Button>\r\n\r\n          <div className=\"flex items-center gap-1\">\r\n            {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n              <Button\r\n                key={page}\r\n                variant={currentPage === page ? \"default\" : \"outline\"}\r\n                size=\"sm\"\r\n                onClick={() => setCurrentPage(page)}\r\n                className={`w-10 h-10 rounded-xl transition-all duration-300 ${\r\n                  currentPage === page\r\n                    ? \"bg-[#F66868] text-white hover:bg-[#F66868]/90 shadow-md\"\r\n                    : \"border-2 border-rose-200 text-gray-700 hover:border-[#F66868] hover:bg-rose-50\"\r\n                }`}\r\n              >\r\n                {page}\r\n              </Button>\r\n            ))}\r\n          </div>\r\n\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={() =>\r\n              setCurrentPage((prev) => Math.min(totalPages, prev + 1))\r\n            }\r\n            disabled={currentPage === totalPages}\r\n            className=\"rounded-xl disabled:cursor-not-allowed\"\r\n          >\r\n            Sau\r\n            <ChevronRight className=\"h-4 w-4 ml-1\" />\r\n          </Button>\r\n        </div>\r\n      )}\r\n\r\n      {/* --- 9. XÓA BỎ HOÀN TOÀN KHỐI CODE QUIZ UI Ở ĐÂY --- */}\r\n      {/* {phase === \"quiz\" && ... } <--- TOÀN BỘ KHỐI NÀY ĐÃ ĐƯỢC CHUYỂN SANG QUIZPLAYER.TSX */}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2216, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/progress.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Progress({\n  className,\n  value,\n  ...props\n}: React.ComponentProps<typeof ProgressPrimitive.Root>) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        \"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",\n        className\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className=\"bg-[#F66868] h-full w-full flex-1 transition-all\"\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  );\n}\n\nexport { Progress };\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,KAIoC;QAJpC,EAChB,SAAS,EACT,KAAK,EACL,GAAG,OACiD,GAJpC;IAKhB,qBACE,6NAAC,+MAAsB;QACrB,aAAU;QACV,WAAW,IAAA,4JAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,6NAAC,oNAA2B;YAC1B,aAAU;YACV,WAAU;YACV,OAAO;gBAAE,WAAW,AAAC,eAAiC,OAAnB,MAAM,CAAC,SAAS,CAAC,GAAE;YAAI;;;;;;;;;;;AAIlE;KArBS","debugId":null}},
    {"offset": {"line": 2261, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/tooltip.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction TooltipProvider({\r\n  delayDuration = 0,\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {\r\n  return (\r\n    <TooltipPrimitive.Provider\r\n      data-slot=\"tooltip-provider\"\r\n      delayDuration={delayDuration}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction Tooltip({\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Root>) {\r\n  return (\r\n    <TooltipProvider>\r\n      <TooltipPrimitive.Root data-slot=\"tooltip\" {...props} />\r\n    </TooltipProvider>\r\n  )\r\n}\r\n\r\nfunction TooltipTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {\r\n  return <TooltipPrimitive.Trigger data-slot=\"tooltip-trigger\" {...props} />\r\n}\r\n\r\nfunction TooltipContent({\r\n  className,\r\n  sideOffset = 0,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Content>) {\r\n  return (\r\n    <TooltipPrimitive.Portal>\r\n      <TooltipPrimitive.Content\r\n        data-slot=\"tooltip-content\"\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n        <TooltipPrimitive.Arrow className=\"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\" />\r\n      </TooltipPrimitive.Content>\r\n    </TooltipPrimitive.Portal>\r\n  )\r\n}\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,gBAAgB,KAGgC;QAHhC,EACvB,gBAAgB,CAAC,EACjB,GAAG,OACoD,GAHhC;IAIvB,qBACE,6NAAC,kNAAyB;QACxB,aAAU;QACV,eAAe;QACd,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,QAAQ,KAEoC;QAFpC,EACf,GAAG,OACgD,GAFpC;IAGf,qBACE,6NAAC;kBACC,cAAA,6NAAC,8MAAqB;YAAC,aAAU;YAAW,GAAG,KAAK;;;;;;;;;;;AAG1D;MARS;AAUT,SAAS,eAAe,KAEgC;QAFhC,EACtB,GAAG,OACmD,GAFhC;IAGtB,qBAAO,6NAAC,iNAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;MAJS;AAMT,SAAS,eAAe,KAKgC;QALhC,EACtB,SAAS,EACT,aAAa,CAAC,EACd,QAAQ,EACR,GAAG,OACmD,GALhC;IAMtB,qBACE,6NAAC,gNAAuB;kBACtB,cAAA,6NAAC,iNAAwB;YACvB,aAAU;YACV,YAAY;YACZ,WAAW,IAAA,4JAAE,EACX,qaACA;YAED,GAAG,KAAK;;gBAER;8BACD,6NAAC,+MAAsB;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI1C;MAtBS","debugId":null}},
    {"offset": {"line": 2364, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/MarkdownRender/index.tsx"],"sourcesContent":["// components/MarkdownRenderer.tsx\r\nimport React from \"react\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport remarkGfm from \"remark-gfm\";\r\n\r\ninterface MarkdownRendererProps {\r\n  content: string;\r\n  className?: string;\r\n}\r\n\r\nexport default function MarkdownRenderer({\r\n  content,\r\n  className,\r\n}: MarkdownRendererProps) {\r\n  return (\r\n    <div className={`prose prose-rose max-w-none leading-relaxed ${className}`}>\r\n      <ReactMarkdown remarkPlugins={[remarkGfm]}>{content}</ReactMarkdown>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;AAElC;AACA;;;;AAOe,SAAS,iBAAiB,KAGjB;QAHiB,EACvC,OAAO,EACP,SAAS,EACa,GAHiB;IAIvC,qBACE,6NAAC;QAAI,WAAW,AAAC,+CAAwD,OAAV;kBAC7D,cAAA,6NAAC,sOAAa;YAAC,eAAe;gBAAC,2LAAS;aAAC;sBAAG;;;;;;;;;;;AAGlD;KATwB","debugId":null}},
    {"offset": {"line": 2405, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/VocabularyInfo/index.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Bookmark,\r\n  Check,\r\n  Share,\r\n  Video,\r\n  Image as ImageIcon,\r\n  Sparkles,\r\n  Camera,\r\n  Loader2,\r\n} from \"lucide-react\";\r\n// --- THÊM useCallback ---\r\nimport { useEffect, useState, useRef, useCallback } from \"react\";\r\n// ---\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\nimport MarkdownRenderer from \"../MarkdownRender\";\r\n\r\n// --- Cấu hình WebSocket ---\r\nconst WEBSOCKET_URL = \"ws://localhost:8001/ws/predict-stream/\";\r\n\r\n// --- THAY ĐỔI 1: CẬP NHẬT LÊN 20 FPS ---\r\n// 1000ms / 20 FPS = 50ms\r\nconst FRAME_INTERVAL_MS = 50;\r\n// ---\r\n\r\ninterface VocabularyInfoProps {\r\n  word: string;\r\n  partOfSpeech?: string;\r\n  definition?: string;\r\n  videoUrl?: string;\r\n  imageUrl?: string;\r\n}\r\n\r\ninterface SignPrediction {\r\n  label_text: string;\r\n  confidence: number;\r\n}\r\n\r\nexport default function VocabularyInfo({\r\n  word,\r\n  partOfSpeech,\r\n  definition,\r\n  videoUrl,\r\n  imageUrl,\r\n}: VocabularyInfoProps) {\r\n  const [bookmarked, setBookmarked] = useState(false);\r\n  const [isShare, setIsShare] = useState(false);\r\n  const [mediaMode, setMediaMode] = useState<\"video\" | \"image\">(\r\n    videoUrl ? \"video\" : \"image\"\r\n  );\r\n  const [showContext, setShowContext] = useState(false);\r\n  const [isLoadingContext, setIsLoadingContext] = useState(false);\r\n  const [contextText, setContextText] = useState(\"\");\r\n  const [sessionId, setSessionId] = useState<string | null>(null);\r\n  const [isCameraActive, setIsCameraActive] = useState(false);\r\n  const { user } = useUserStore();\r\n\r\n  const [prediction, setPrediction] = useState<SignPrediction | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [framesCollected, setFramesCollected] = useState(0);\r\n  const [framesNeeded, setFramesNeeded] = useState(30);\r\n\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const streamRef = useRef<MediaStream | null>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const wsRef = useRef<WebSocket | null>(null);\r\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // --- HÀM GỬI KHUNG HÌNH (GIỮ NGUYÊN) ---\r\n  const sendFrame = () => {\r\n    if (!wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {\r\n      console.log(\"WebSocket not ready, state:\", wsRef.current?.readyState);\r\n      return;\r\n    }\r\n\r\n    if (!videoRef.current || !canvasRef.current) {\r\n      console.log(\"Video or canvas ref not ready\");\r\n      return;\r\n    }\r\n\r\n    const video = videoRef.current;\r\n\r\n    // Check if video is ready\r\n    if (\r\n      video.videoWidth === 0 ||\r\n      video.videoHeight === 0 ||\r\n      video.readyState < 2\r\n    ) {\r\n      console.log(\"Video not ready yet:\", {\r\n        width: video.videoWidth,\r\n        height: video.videoHeight,\r\n        readyState: video.readyState,\r\n      });\r\n      return;\r\n    }\r\n\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    if (!context) {\r\n      console.log(\"Canvas context not available\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n      const frameData = canvas.toDataURL(\"image/jpeg\", 0.8);\r\n\r\n      console.log(\"Sending frame, size:\", frameData.length);\r\n      wsRef.current.send(frameData);\r\n    } catch (err) {\r\n      console.error(\"Error sending frame:\", err);\r\n    }\r\n  };\r\n  // ---\r\n\r\n  // --- HÀM DỌN DẸP (GIỮ NGUYÊN) ---\r\n  const cleanupCamera = useCallback(() => {\r\n    console.log(\"Đang chạy dọn dẹp camera...\");\r\n\r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n    if (wsRef.current) {\r\n      wsRef.current.onclose = null;\r\n      wsRef.current.onerror = null;\r\n      wsRef.current.close();\r\n      wsRef.current = null;\r\n    }\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach((track) => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n\r\n    setIsCameraActive((isActive) => {\r\n      if (isActive) {\r\n        setPrediction(null);\r\n        setError(null);\r\n        setFramesCollected(0);\r\n      }\r\n      return false;\r\n    });\r\n  }, []);\r\n  // ---\r\n\r\n  // --- THAY ĐỔI 2: KÍCH HOẠT LẠI WEBSOCKET KHI MỞ CAMERA ---\r\n  const handleCameraAccess = useCallback(async () => {\r\n    if (isCameraActive) {\r\n      // --- Logic TẮT (GIỮ NGUYÊN) ---\r\n      console.log(\"Đang TẮT camera (do người dùng nhấp)...\");\r\n      cleanupCamera();\r\n    } else {\r\n      // --- Logic MỞ (ĐÃ KHÔI PHỤC) ---\r\n      console.log(\"Đang MỞ camera VÀ KẾT NỐI...\");\r\n      try {\r\n        // 1. Lấy stream video\r\n        const stream = await navigator.mediaDevices.getUserMedia({\r\n          video: true,\r\n        });\r\n        streamRef.current = stream; // LƯU stream vào ref\r\n\r\n        // 2. KẾT NỐI WEBSOCKET\r\n        wsRef.current = new WebSocket(WEBSOCKET_URL);\r\n\r\n        // 3. Định nghĩa các trình xử lý\r\n        wsRef.current.onopen = () => {\r\n          console.log(\"WebSocket đã kết nối!\");\r\n          setIsCameraActive(true); // <-- Kích hoạt re-render để hiển thị video\r\n          setError(null);\r\n          // BẮT ĐẦU GỬI KHUNG HÌNH (với 20 FPS)\r\n          intervalRef.current = setInterval(sendFrame, FRAME_INTERVAL_MS);\r\n        };\r\n\r\n        wsRef.current.onmessage = (event) => {\r\n          console.log(\"WebSocket message received:\", event.data);\r\n          try {\r\n            const data = JSON.parse(event.data);\r\n            console.log(\"Parsed data:\", data);\r\n\r\n            if (data.status === \"predicted\") {\r\n              setPrediction({\r\n                label_text: data.label_text,\r\n                confidence: data.confidence,\r\n              });\r\n              setFramesCollected(0);\r\n            } else if (data.status === \"collecting\") {\r\n              console.log(\r\n                `Collecting frames: ${data.frames_collected}/${data.frames_needed}`\r\n              );\r\n              setFramesCollected(data.frames_collected);\r\n              setFramesNeeded(data.frames_needed);\r\n            } else if (data.status === \"waiting\") {\r\n              console.log(\"Waiting:\", data.message);\r\n            } else if (data.status === \"error\") {\r\n              console.error(\"Backend error:\", data.message);\r\n              setError(data.message);\r\n            }\r\n          } catch (err) {\r\n            console.error(\"Failed to parse WebSocket message:\", err);\r\n          }\r\n        };\r\n\r\n        wsRef.current.onclose = () => {\r\n          console.log(\"WebSocket BỊ NGẮT (bất ngờ). Đang dọn dẹp.\");\r\n          cleanupCamera();\r\n          setError(\"Kết nối đã mất. Vui lòng thử lại.\");\r\n        };\r\n\r\n        wsRef.current.onerror = (err) => {\r\n          console.error(\"Lỗi WebSocket:\", err);\r\n          setError(\"Lỗi kết nối. Backend có đang chạy không?\");\r\n        };\r\n      } catch (err) {\r\n        console.error(\"Lỗi truy cập camera:\", err);\r\n        setError(\"Không thể truy cập camera. Vui lòng kiểm tra quyền.\");\r\n      }\r\n    }\r\n  }, [isCameraActive, cleanupCamera]);\r\n  // ---\r\n\r\n  // --- CÁC useEffect (GIỮ NGUYÊN) ---\r\n\r\n  // useEffect này CHỈ xử lý bookmark/share\r\n  useEffect(() => {\r\n    if (bookmarked || isShare) {\r\n      const timer = setTimeout(() => {\r\n        setBookmarked(false);\r\n        setIsShare(false);\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [bookmarked, isShare]);\r\n\r\n  // useEffect này CHỈ xử lý khi `word` thay đổi\r\n  useEffect(() => {\r\n    console.log(\"Từ đã thay đổi, dọn dẹp context...\");\r\n    setShowContext(false);\r\n    setContextText(\"\");\r\n    setSessionId(null);\r\n    console.log(\"Từ đã thay đổi, dọn dẹp camera...\");\r\n    cleanupCamera();\r\n  }, [word, cleanupCamera]); // <-- Sửa lại dependency (thêm cleanupCamera)\r\n\r\n  // useEffect này CHỈ dọn dẹp khi component unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      console.log(\"Component unmount, đang dọn dẹp camera...\");\r\n      cleanupCamera();\r\n    };\r\n  }, [cleanupCamera]); // <-- Sửa lại dependency\r\n\r\n  // useEffect này XỬ LÝ MÀN HÌNH ĐEN (GIỮ NGUYÊN)\r\n  useEffect(() => {\r\n    if (isCameraActive && videoRef.current && streamRef.current) {\r\n      console.log(\"Đang gán stream vào video element...\");\r\n      videoRef.current.srcObject = streamRef.current;\r\n      videoRef.current.play().catch((err) => {\r\n        console.error(\"Video play() bị lỗi:\", err);\r\n      });\r\n    }\r\n  }, [isCameraActive]);\r\n  // ---\r\n\r\n  // Handle context toggle (GIỮ NGUYÊN)\r\n  const handleContextToggle = async () => {\r\n    // ... (Toàn bộ logic context của bạn không thay đổi) ...\r\n    if (!showContext) {\r\n      setIsLoadingContext(true);\r\n      setContextText(\"\");\r\n      const prompt = `Khi nào sử dụng từ này, trong trường hợp, hoàn cảnh nào: \"${word}\"`;\r\n      const API_URL = process.env.NEXT_PUBLIC_SERVER_URL;\r\n      try {\r\n        const response = await fetch(`${API_URL}/api/chat`, {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            message: prompt,\r\n            user_id: user?.id || \"guest-user\",\r\n            session_id: sessionId,\r\n          }),\r\n        });\r\n        if (!response.ok) {\r\n          throw new Error(\"Failed to fetch context from API\");\r\n        }\r\n        const data = await response.json();\r\n        setContextText(data.response);\r\n        setSessionId(data.session_id);\r\n        setShowContext(true);\r\n      } catch (error) {\r\n        console.error(\"Failed to fetch context:\", error);\r\n        setContextText(\"Lỗi: Không thể tải ngữ cảnh.\");\r\n        setShowContext(true);\r\n      } finally {\r\n        setIsLoadingContext(false);\r\n      }\r\n    } else {\r\n      setShowContext(false);\r\n    }\r\n  };\r\n\r\n  // --- PHẦN RETURN (JSX) (KHÔNG THAY ĐỔI) ---\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-lg border-2 border-[#FF978E] overflow-hidden\">\r\n      {/* Header Section with Actions */}\r\n      <div className=\"bg-gradient-to-r from-[#f66868] to-[#FF978E] p-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-baseline gap-3\">\r\n            <h1 className=\"text-3xl font-bold text-white drop-shadow-md\">\r\n              {word}\r\n            </h1>\r\n            {partOfSpeech && (\r\n              <div className=\"text-white/90 italic text-xl font-medium bg-white/20 px-3 py-1 rounded-full\">\r\n                {partOfSpeech}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <TooltipProvider>\r\n            <div className=\"flex gap-2\">\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <button\r\n                    onClick={() => {\r\n                      setIsShare(true);\r\n                      navigator.clipboard.writeText(window.location.href);\r\n                    }}\r\n                    className=\"p-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all duration-300 backdrop-blur-sm\"\r\n                  >\r\n                    {isShare ? (\r\n                      <Check className=\"w-6 h-6 text-white\" />\r\n                    ) : (\r\n                      <Share className=\"w-6 h-6 text-white\" />\r\n                    )}\r\n                  </button>\r\n                </TooltipTrigger>\r\n                <TooltipContent>\r\n                  {isShare ? \"Đã sao chép liên kết!\" : \"Chia sẻ\"}\r\n                </TooltipContent>\r\n              </Tooltip>\r\n\r\n              <Tooltip>\r\n                <TooltipTrigger asChild>\r\n                  <button\r\n                    onClick={() => setBookmarked(!bookmarked)}\r\n                    className=\"p-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all duration-300 backdrop-blur-sm\"\r\n                  >\r\n                    <Bookmark\r\n                      className={`w-6 h-6 ${\r\n                        bookmarked ? \"fill-white text-white\" : \"text-white\"\r\n                      }`}\r\n                    />\r\n                  </button>\r\n                </TooltipTrigger>\r\n                <TooltipContent>\r\n                  {bookmarked ? \"Đã lưu\" : \"Lưu từ\"}\r\n                </TooltipContent>\r\n              </Tooltip>\r\n            </div>\r\n          </TooltipProvider>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"p-6 space-y-6\">\r\n        {/* Definition Section */}\r\n        {definition && (\r\n          <div className=\"bg-rose-50 rounded-xl p-5 border border-rose-200\">\r\n            <h3 className=\"text-sm font-bold text-[#C73B3B] uppercase tracking-wide mb-3 flex items-center gap-2\">\r\n              <div className=\"w-1 h-5 bg-[#C73B3B] rounded-full\"></div>\r\n              Cách thực hiện\r\n            </h3>\r\n            <p className=\"text-gray-700 text-base\">{definition}</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Two Column Layout: Video/Image + Camera */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          {/* Left Column: Instructional Media */}\r\n          {(videoUrl || imageUrl) && (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-sm font-bold text-[#C73B3B] uppercase tracking-wide flex items-center gap-2\">\r\n                  <div className=\"w-1 h-5 bg-[#C73B3B] rounded-full\"></div>\r\n                  Hướng dẫn\r\n                </h3>\r\n\r\n                {/* Media Toggle */}\r\n                <div className=\"flex bg-rose-50 border border-rose-200 rounded-lg overflow-hidden\">\r\n                  {videoUrl && (\r\n                    <button\r\n                      onClick={() => setMediaMode(\"video\")}\r\n                      className={`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium transition-all cursor-pointer\r\n                        ${\r\n                          mediaMode === \"video\"\r\n                            ? \"bg-[#C73B3B] text-white shadow-sm\"\r\n                            : \"text-[#C73B3B] hover:bg-rose-100\"\r\n                        }`}\r\n                    >\r\n                      <Video className=\"w-3.5 h-3.5\" /> Video\r\n                    </button>\r\n                  )}\r\n                  {imageUrl && (\r\n                    <button\r\n                      onClick={() => setMediaMode(\"image\")}\r\n                      className={`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium transition-all cursor-pointer\r\n                        ${\r\n                          mediaMode === \"image\"\r\n                            ? \"bg-[#C73B3B] text-white shadow-sm\"\r\n                            : \"text-[#C73B3B] hover:bg-rose-100\"\r\n                        }`}\r\n                    >\r\n                      <ImageIcon className=\"w-3.5 h-3.5\" /> Hình ảnh\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Media Display */}\r\n              <div className=\"relative w-full rounded-xl overflow-hidden border-2 border-gray-200 shadow-md aspect-video bg-gray-100\">\r\n                {mediaMode === \"video\" && videoUrl ? (\r\n                  <video\r\n                    controls\r\n                    className=\"w-full h-full object-contain\"\r\n                    src={videoUrl}\r\n                  />\r\n                ) : (\r\n                  imageUrl && (\r\n                    <img\r\n                      src={imageUrl}\r\n                      alt={`${word} illustration`}\r\n                      className=\"w-full h-full object-contain p-4\"\r\n                      loading=\"lazy\"\r\n                    />\r\n                  )\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Right Column: Practice Camera */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-sm font-bold text-[#C73B3B] uppercase tracking-wide flex items-center gap-2\">\r\n                <div className=\"w-1 h-5 bg-[#C73B3B] rounded-full\"></div>\r\n                Luyện tập\r\n              </h3>\r\n\r\n              <TooltipProvider>\r\n                <Tooltip>\r\n                  <TooltipTrigger asChild>\r\n                    <button\r\n                      onClick={handleCameraAccess}\r\n                      className={`px-4 py-2 rounded-lg font-medium transition-all duration-300 transform flex items-center gap-2 text-sm\r\n                        ${\r\n                          isCameraActive\r\n                            ? \"bg-[#f66868] text-white shadow-lg scale-105\"\r\n                            : \"bg-rose-100 text-[#f66868] hover:bg-rose-200\"\r\n                        }`}\r\n                    >\r\n                      <Camera className=\"w-4 h-4\" />\r\n                      {isCameraActive ? \"Tắt camera\" : \"Bật camera\"}\r\n                    </button>\r\n                  </TooltipTrigger>\r\n                  <TooltipContent>\r\n                    {isCameraActive\r\n                      ? \"Dừng luyện tập\"\r\n                      : \"Bắt đầu luyện tập với camera\"}\r\n                  </TooltipContent>\r\n                </Tooltip>\r\n              </TooltipProvider>\r\n            </div>\r\n\r\n            {/* Camera Display */}\r\n            {isCameraActive ? (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"relative w-full rounded-xl overflow-hidden border-2 border-[#f66868] shadow-lg aspect-video bg-black\">\r\n                  <video\r\n                    ref={videoRef}\r\n                    autoPlay\r\n                    muted\r\n                    playsInline\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                  {/* Recording Indicator */}\r\n                  <div className=\"absolute top-3 right-3 flex items-center gap-2 bg-red-500 text-white px-3 py-1.5 rounded-full text-xs font-bold\">\r\n                    <div className=\"w-2 h-2 bg-white rounded-full animate-pulse\"></div>\r\n                    REC\r\n                  </div>\r\n                </div>\r\n\r\n                <canvas ref={canvasRef} style={{ display: \"none\" }} />\r\n\r\n                {/* Prediction Results */}\r\n                {prediction && (\r\n                  <div className=\"p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <p className=\"text-xs text-green-600 font-medium mb-1\">\r\n                          Nhận diện được:\r\n                        </p>\r\n                        <h4 className=\"text-2xl font-bold text-green-800\">\r\n                          {prediction.label_text}\r\n                        </h4>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <p className=\"text-xs text-green-600 font-medium mb-1\">\r\n                          Độ chính xác:\r\n                        </p>\r\n                        <p className=\"text-3xl font-bold text-green-700\">\r\n                          {(prediction.confidence * 100).toFixed(0)}%\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Collection Progress */}\r\n                <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-xl\">\r\n                  {framesCollected > 0 ? (\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"flex justify-between text-sm text-blue-700 font-medium\">\r\n                        <span>Đang thu thập khung hình...</span>\r\n                        <span>\r\n                          {framesCollected}/{framesNeeded}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"w-full bg-blue-200 rounded-full h-2 overflow-hidden\">\r\n                        <div\r\n                          className=\"bg-blue-600 h-full transition-all duration-300 rounded-full\"\r\n                          style={{\r\n                            width: `${(framesCollected / framesNeeded) * 100}%`,\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <p className=\"text-blue-700 flex items-center justify-center gap-2 text-sm\">\r\n                      <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                      {prediction\r\n                        ? \"Sẵn sàng nhận diện tiếp...\"\r\n                        : \"Đang khởi động AI...\"}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {error && (\r\n                  <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n                    <p className=\"text-red-600 text-sm text-center\">{error}</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"w-full aspect-video rounded-xl border-2 border-dashed border-gray-300 bg-gray-50 flex flex-col items-center justify-center text-center p-6\">\r\n                <Camera className=\"w-12 h-12 text-gray-400 mb-3\" />\r\n                <p className=\"text-gray-600 font-medium mb-1\">\r\n                  Camera chưa được bật\r\n                </p>\r\n                <p className=\"text-gray-400 text-sm\">\r\n                  Nhấn nút \"Bật camera\" để bắt đầu luyện tập\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Context Button */}\r\n        <div className=\"flex justify-center pt-4\">\r\n          <Button\r\n            size=\"lg\"\r\n            onClick={handleContextToggle}\r\n            disabled={isLoadingContext}\r\n            className=\"px-8 py-6 rounded-xl bg-gradient-to-r from-[#C73B3B] to-[#f66868] text-white font-bold hover:shadow-lg hover:scale-105 transition-all duration-300 text-base flex items-center gap-3\"\r\n          >\r\n            {isLoadingContext ? (\r\n              <>\r\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                Đang tải ngữ cảnh...\r\n              </>\r\n            ) : showContext ? (\r\n              <>\r\n                <Sparkles className=\"w-5 h-5\" />\r\n                Ẩn ngữ cảnh\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Sparkles className=\"w-5 h-5\" />\r\n                Xem ngữ cảnh sử dụng\r\n              </>\r\n            )}\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Context Section */}\r\n        {showContext && (\r\n          <div className=\"bg-gradient-to-br from-rose-50 to-orange-50 border-2 border-rose-200 rounded-xl p-6 shadow-inner\">\r\n            <h3 className=\"text-sm font-bold text-[#C73B3B] uppercase tracking-wide mb-4 flex items-center gap-2\">\r\n              <Sparkles className=\"w-4 h-4\" />\r\n              Ngữ cảnh sử dụng\r\n            </h3>\r\n            {isLoadingContext ? (\r\n              <div className=\"space-y-3\">\r\n                <div className=\"h-4 bg-rose-200 rounded animate-pulse\"></div>\r\n                <div className=\"h-4 bg-rose-200 rounded animate-pulse w-5/6\"></div>\r\n                <div className=\"h-4 bg-rose-200 rounded animate-pulse w-4/6\"></div>\r\n              </div>\r\n            ) : contextText ? (\r\n              <div className=\"prose prose-rose max-w-none\">\r\n                <MarkdownRenderer content={contextText} />\r\n              </div>\r\n            ) : (\r\n              <p className=\"italic text-gray-500 text-center py-4\">\r\n                Không có ngữ cảnh cho từ này.\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAwRsB;;AAtRtB;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA,2BAA2B;AAC3B;AACA,MAAM;AACN;AAMA;AACA;;;AAvBA;;;;;;;AAyBA,6BAA6B;AAC7B,MAAM,gBAAgB;AAEtB,0CAA0C;AAC1C,yBAAyB;AACzB,MAAM,oBAAoB;AAgBX,SAAS,eAAe,KAMjB;QANiB,EACrC,IAAI,EACJ,YAAY,EACZ,UAAU,EACV,QAAQ,EACR,QAAQ,EACY,GANiB;;IAOrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yMAAQ,EAAC;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yMAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yMAAQ,EACxC,WAAW,UAAU;IAEvB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yMAAQ,EAAC;IAC/C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yMAAQ,EAAC;IACzD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yMAAQ,EAAC;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yMAAQ,EAAgB;IAC1D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yMAAQ,EAAC;IACrD,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,+KAAY;IAE7B,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yMAAQ,EAAwB;IACpE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yMAAQ,EAAgB;IAClD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yMAAQ,EAAC;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yMAAQ,EAAC;IAEjD,MAAM,WAAW,IAAA,uMAAM,EAAmB;IAC1C,MAAM,YAAY,IAAA,uMAAM,EAAqB;IAC7C,MAAM,YAAY,IAAA,uMAAM,EAAoB;IAC5C,MAAM,QAAQ,IAAA,uMAAM,EAAmB;IACvC,MAAM,cAAc,IAAA,uMAAM,EAAwB;IAElD,0CAA0C;IAC1C,MAAM,YAAY;QAChB,IAAI,CAAC,MAAM,OAAO,IAAI,MAAM,OAAO,CAAC,UAAU,KAAK,UAAU,IAAI,EAAE;gBACtB;YAA3C,QAAQ,GAAG,CAAC,gCAA+B,iBAAA,MAAM,OAAO,cAAb,qCAAA,eAAe,UAAU;YACpE;QACF;QAEA,IAAI,CAAC,SAAS,OAAO,IAAI,CAAC,UAAU,OAAO,EAAE;YAC3C,QAAQ,GAAG,CAAC;YACZ;QACF;QAEA,MAAM,QAAQ,SAAS,OAAO;QAE9B,0BAA0B;QAC1B,IACE,MAAM,UAAU,KAAK,KACrB,MAAM,WAAW,KAAK,KACtB,MAAM,UAAU,GAAG,GACnB;YACA,QAAQ,GAAG,CAAC,wBAAwB;gBAClC,OAAO,MAAM,UAAU;gBACvB,QAAQ,MAAM,WAAW;gBACzB,YAAY,MAAM,UAAU;YAC9B;YACA;QACF;QAEA,MAAM,SAAS,UAAU,OAAO;QAChC,MAAM,UAAU,OAAO,UAAU,CAAC;QAClC,IAAI,CAAC,SAAS;YACZ,QAAQ,GAAG,CAAC;YACZ;QACF;QAEA,IAAI;YACF,OAAO,KAAK,GAAG,MAAM,UAAU;YAC/B,OAAO,MAAM,GAAG,MAAM,WAAW;YACjC,QAAQ,SAAS,CAAC,OAAO,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;YAC1D,MAAM,YAAY,OAAO,SAAS,CAAC,cAAc;YAEjD,QAAQ,GAAG,CAAC,wBAAwB,UAAU,MAAM;YACpD,MAAM,OAAO,CAAC,IAAI,CAAC;QACrB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,wBAAwB;QACxC;IACF;IACA,MAAM;IAEN,mCAAmC;IACnC,MAAM,gBAAgB,IAAA,4MAAW;qDAAC;YAChC,QAAQ,GAAG,CAAC;YAEZ,IAAI,YAAY,OAAO,EAAE;gBACvB,cAAc,YAAY,OAAO;gBACjC,YAAY,OAAO,GAAG;YACxB;YACA,IAAI,MAAM,OAAO,EAAE;gBACjB,MAAM,OAAO,CAAC,OAAO,GAAG;gBACxB,MAAM,OAAO,CAAC,OAAO,GAAG;gBACxB,MAAM,OAAO,CAAC,KAAK;gBACnB,MAAM,OAAO,GAAG;YAClB;YACA,IAAI,UAAU,OAAO,EAAE;gBACrB,UAAU,OAAO,CAAC,SAAS,GAAG,OAAO;iEAAC,CAAC,QAAU,MAAM,IAAI;;gBAC3D,UAAU,OAAO,GAAG;YACtB;YAEA;6DAAkB,CAAC;oBACjB,IAAI,UAAU;wBACZ,cAAc;wBACd,SAAS;wBACT,mBAAmB;oBACrB;oBACA,OAAO;gBACT;;QACF;oDAAG,EAAE;IACL,MAAM;IAEN,4DAA4D;IAC5D,MAAM,qBAAqB,IAAA,4MAAW;0DAAC;YACrC,IAAI,gBAAgB;gBAClB,iCAAiC;gBACjC,QAAQ,GAAG,CAAC;gBACZ;YACF,OAAO;gBACL,kCAAkC;gBAClC,QAAQ,GAAG,CAAC;gBACZ,IAAI;oBACF,sBAAsB;oBACtB,MAAM,SAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;wBACvD,OAAO;oBACT;oBACA,UAAU,OAAO,GAAG,QAAQ,qBAAqB;oBAEjD,uBAAuB;oBACvB,MAAM,OAAO,GAAG,IAAI,UAAU;oBAE9B,gCAAgC;oBAChC,MAAM,OAAO,CAAC,MAAM;0EAAG;4BACrB,QAAQ,GAAG,CAAC;4BACZ,kBAAkB,OAAO,4CAA4C;4BACrE,SAAS;4BACT,sCAAsC;4BACtC,YAAY,OAAO,GAAG,YAAY,WAAW;wBAC/C;;oBAEA,MAAM,OAAO,CAAC,SAAS;0EAAG,CAAC;4BACzB,QAAQ,GAAG,CAAC,+BAA+B,MAAM,IAAI;4BACrD,IAAI;gCACF,MAAM,OAAO,KAAK,KAAK,CAAC,MAAM,IAAI;gCAClC,QAAQ,GAAG,CAAC,gBAAgB;gCAE5B,IAAI,KAAK,MAAM,KAAK,aAAa;oCAC/B,cAAc;wCACZ,YAAY,KAAK,UAAU;wCAC3B,YAAY,KAAK,UAAU;oCAC7B;oCACA,mBAAmB;gCACrB,OAAO,IAAI,KAAK,MAAM,KAAK,cAAc;oCACvC,QAAQ,GAAG,CACT,AAAC,sBAA8C,OAAzB,KAAK,gBAAgB,EAAC,KAAsB,OAAnB,KAAK,aAAa;oCAEnE,mBAAmB,KAAK,gBAAgB;oCACxC,gBAAgB,KAAK,aAAa;gCACpC,OAAO,IAAI,KAAK,MAAM,KAAK,WAAW;oCACpC,QAAQ,GAAG,CAAC,YAAY,KAAK,OAAO;gCACtC,OAAO,IAAI,KAAK,MAAM,KAAK,SAAS;oCAClC,QAAQ,KAAK,CAAC,kBAAkB,KAAK,OAAO;oCAC5C,SAAS,KAAK,OAAO;gCACvB;4BACF,EAAE,OAAO,KAAK;gCACZ,QAAQ,KAAK,CAAC,sCAAsC;4BACtD;wBACF;;oBAEA,MAAM,OAAO,CAAC,OAAO;0EAAG;4BACtB,QAAQ,GAAG,CAAC;4BACZ;4BACA,SAAS;wBACX;;oBAEA,MAAM,OAAO,CAAC,OAAO;0EAAG,CAAC;4BACvB,QAAQ,KAAK,CAAC,kBAAkB;4BAChC,SAAS;wBACX;;gBACF,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,wBAAwB;oBACtC,SAAS;gBACX;YACF;QACF;yDAAG;QAAC;QAAgB;KAAc;IAClC,MAAM;IAEN,qCAAqC;IAErC,yCAAyC;IACzC,IAAA,0MAAS;oCAAC;YACR,IAAI,cAAc,SAAS;gBACzB,MAAM,QAAQ;sDAAW;wBACvB,cAAc;wBACd,WAAW;oBACb;qDAAG;gBACH;gDAAO,IAAM,aAAa;;YAC5B;QACF;mCAAG;QAAC;QAAY;KAAQ;IAExB,8CAA8C;IAC9C,IAAA,0MAAS;oCAAC;YACR,QAAQ,GAAG,CAAC;YACZ,eAAe;YACf,eAAe;YACf,aAAa;YACb,QAAQ,GAAG,CAAC;YACZ;QACF;mCAAG;QAAC;QAAM;KAAc,GAAG,8CAA8C;IAEzE,kDAAkD;IAClD,IAAA,0MAAS;oCAAC;YACR;4CAAO;oBACL,QAAQ,GAAG,CAAC;oBACZ;gBACF;;QACF;mCAAG;QAAC;KAAc,GAAG,yBAAyB;IAE9C,gDAAgD;IAChD,IAAA,0MAAS;oCAAC;YACR,IAAI,kBAAkB,SAAS,OAAO,IAAI,UAAU,OAAO,EAAE;gBAC3D,QAAQ,GAAG,CAAC;gBACZ,SAAS,OAAO,CAAC,SAAS,GAAG,UAAU,OAAO;gBAC9C,SAAS,OAAO,CAAC,IAAI,GAAG,KAAK;gDAAC,CAAC;wBAC7B,QAAQ,KAAK,CAAC,wBAAwB;oBACxC;;YACF;QACF;mCAAG;QAAC;KAAe;IACnB,MAAM;IAEN,qCAAqC;IACrC,MAAM,sBAAsB;QAC1B,yDAAyD;QACzD,IAAI,CAAC,aAAa;YAChB,oBAAoB;YACpB,eAAe;YACf,MAAM,SAAS,AAAC,6DAAiE,OAAL,MAAK;YACjF,MAAM;YACN,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,AAAC,GAAU,OAAR,SAAQ,cAAY;oBAClD,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBACnB,SAAS;wBACT,SAAS,CAAA,iBAAA,2BAAA,KAAM,EAAE,KAAI;wBACrB,YAAY;oBACd;gBACF;gBACA,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,MAAM,IAAI,MAAM;gBAClB;gBACA,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,eAAe,KAAK,QAAQ;gBAC5B,aAAa,KAAK,UAAU;gBAC5B,eAAe;YACjB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,4BAA4B;gBAC1C,eAAe;gBACf,eAAe;YACjB,SAAU;gBACR,oBAAoB;YACtB;QACF,OAAO;YACL,eAAe;QACjB;IACF;IAEA,6CAA6C;IAC7C,qBACE,6NAAC;QAAI,WAAU;;0BAEb,6NAAC;gBAAI,WAAU;0BACb,cAAA,6NAAC;oBAAI,WAAU;;sCACb,6NAAC;4BAAI,WAAU;;8CACb,6NAAC;oCAAG,WAAU;8CACX;;;;;;gCAEF,8BACC,6NAAC;oCAAI,WAAU;8CACZ;;;;;;;;;;;;sCAMP,6NAAC,yLAAe;sCACd,cAAA,6NAAC;gCAAI,WAAU;;kDACb,6NAAC,iLAAO;;0DACN,6NAAC,wLAAc;gDAAC,OAAO;0DACrB,cAAA,6NAAC;oDACC,SAAS;wDACP,WAAW;wDACX,UAAU,SAAS,CAAC,SAAS,CAAC,OAAO,QAAQ,CAAC,IAAI;oDACpD;oDACA,WAAU;8DAET,wBACC,6NAAC,gPAAK;wDAAC,WAAU;;;;;6EAEjB,6NAAC,gPAAK;wDAAC,WAAU;;;;;;;;;;;;;;;;0DAIvB,6NAAC,wLAAc;0DACZ,UAAU,0BAA0B;;;;;;;;;;;;kDAIzC,6NAAC,iLAAO;;0DACN,6NAAC,wLAAc;gDAAC,OAAO;0DACrB,cAAA,6NAAC;oDACC,SAAS,IAAM,cAAc,CAAC;oDAC9B,WAAU;8DAEV,cAAA,6NAAC,yPAAQ;wDACP,WAAW,AAAC,WAEX,OADC,aAAa,0BAA0B;;;;;;;;;;;;;;;;0DAK/C,6NAAC,wLAAc;0DACZ,aAAa,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQrC,6NAAC;gBAAI,WAAU;;oBAEZ,4BACC,6NAAC;wBAAI,WAAU;;0CACb,6NAAC;gCAAG,WAAU;;kDACZ,6NAAC;wCAAI,WAAU;;;;;;oCAA0C;;;;;;;0CAG3D,6NAAC;gCAAE,WAAU;0CAA2B;;;;;;;;;;;;kCAK5C,6NAAC;wBAAI,WAAU;;4BAEZ,CAAC,YAAY,QAAQ,mBACpB,6NAAC;gCAAI,WAAU;;kDACb,6NAAC;wCAAI,WAAU;;0DACb,6NAAC;gDAAG,WAAU;;kEACZ,6NAAC;wDAAI,WAAU;;;;;;oDAA0C;;;;;;;0DAK3D,6NAAC;gDAAI,WAAU;;oDACZ,0BACC,6NAAC;wDACC,SAAS,IAAM,aAAa;wDAC5B,WAAW,AAAC,oHAKT,OAHC,cAAc,UACV,sCACA;;0EAGR,6NAAC,gPAAK;gEAAC,WAAU;;;;;;4DAAgB;;;;;;;oDAGpC,0BACC,6NAAC;wDACC,SAAS,IAAM,aAAa;wDAC5B,WAAW,AAAC,oHAKT,OAHC,cAAc,UACV,sCACA;;0EAGR,6NAAC,gPAAS;gEAAC,WAAU;;;;;;4DAAgB;;;;;;;;;;;;;;;;;;;kDAO7C,6NAAC;wCAAI,WAAU;kDACZ,cAAc,WAAW,yBACxB,6NAAC;4CACC,QAAQ;4CACR,WAAU;4CACV,KAAK;;;;;mDAGP,0BACE,6NAAC;4CACC,KAAK;4CACL,KAAK,AAAC,GAAO,OAAL,MAAK;4CACb,WAAU;4CACV,SAAQ;;;;;;;;;;;;;;;;;0CASpB,6NAAC;gCAAI,WAAU;;kDACb,6NAAC;wCAAI,WAAU;;0DACb,6NAAC;gDAAG,WAAU;;kEACZ,6NAAC;wDAAI,WAAU;;;;;;oDAA0C;;;;;;;0DAI3D,6NAAC,yLAAe;0DACd,cAAA,6NAAC,iLAAO;;sEACN,6NAAC,wLAAc;4DAAC,OAAO;sEACrB,cAAA,6NAAC;gEACC,SAAS;gEACT,WAAW,AAAC,mIAKT,OAHC,iBACI,gDACA;;kFAGR,6NAAC,mPAAM;wEAAC,WAAU;;;;;;oEACjB,iBAAiB,eAAe;;;;;;;;;;;;sEAGrC,6NAAC,wLAAc;sEACZ,iBACG,mBACA;;;;;;;;;;;;;;;;;;;;;;;oCAOX,+BACC,6NAAC;wCAAI,WAAU;;0DACb,6NAAC;gDAAI,WAAU;;kEACb,6NAAC;wDACC,KAAK;wDACL,QAAQ;wDACR,KAAK;wDACL,WAAW;wDACX,WAAU;;;;;;kEAGZ,6NAAC;wDAAI,WAAU;;0EACb,6NAAC;gEAAI,WAAU;;;;;;4DAAoD;;;;;;;;;;;;;0DAKvE,6NAAC;gDAAO,KAAK;gDAAW,OAAO;oDAAE,SAAS;gDAAO;;;;;;4CAGhD,4BACC,6NAAC;gDAAI,WAAU;0DACb,cAAA,6NAAC;oDAAI,WAAU;;sEACb,6NAAC;;8EACC,6NAAC;oEAAE,WAAU;8EAA0C;;;;;;8EAGvD,6NAAC;oEAAG,WAAU;8EACX,WAAW,UAAU;;;;;;;;;;;;sEAG1B,6NAAC;4DAAI,WAAU;;8EACb,6NAAC;oEAAE,WAAU;8EAA0C;;;;;;8EAGvD,6NAAC;oEAAE,WAAU;;wEACV,CAAC,WAAW,UAAU,GAAG,GAAG,EAAE,OAAO,CAAC;wEAAG;;;;;;;;;;;;;;;;;;;;;;;;0DAQpD,6NAAC;gDAAI,WAAU;0DACZ,kBAAkB,kBACjB,6NAAC;oDAAI,WAAU;;sEACb,6NAAC;4DAAI,WAAU;;8EACb,6NAAC;8EAAK;;;;;;8EACN,6NAAC;;wEACE;wEAAgB;wEAAE;;;;;;;;;;;;;sEAGvB,6NAAC;4DAAI,WAAU;sEACb,cAAA,6NAAC;gEACC,WAAU;gEACV,OAAO;oEACL,OAAO,AAAC,GAAyC,OAAvC,AAAC,kBAAkB,eAAgB,KAAI;gEACnD;;;;;;;;;;;;;;;;yEAKN,6NAAC;oDAAE,WAAU;;sEACX,6NAAC,+PAAO;4DAAC,WAAU;;;;;;wDAClB,aACG,+BACA;;;;;;;;;;;;4CAKT,uBACC,6NAAC;gDAAI,WAAU;0DACb,cAAA,6NAAC;oDAAE,WAAU;8DAAoC;;;;;;;;;;;;;;;;6DAKvD,6NAAC;wCAAI,WAAU;;0DACb,6NAAC,mPAAM;gDAAC,WAAU;;;;;;0DAClB,6NAAC;gDAAE,WAAU;0DAAiC;;;;;;0DAG9C,6NAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;;;;;;;kCAS7C,6NAAC;wBAAI,WAAU;kCACb,cAAA,6NAAC,+KAAM;4BACL,MAAK;4BACL,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET,iCACC;;kDACE,6NAAC,+PAAO;wCAAC,WAAU;;;;;;oCAAyB;;+CAG5C,4BACF;;kDACE,6NAAC,yPAAQ;wCAAC,WAAU;;;;;;oCAAY;;6DAIlC;;kDACE,6NAAC,yPAAQ;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;oBAQvC,6BACC,6NAAC;wBAAI,WAAU;;0CACb,6NAAC;gCAAG,WAAU;;kDACZ,6NAAC,yPAAQ;wCAAC,WAAU;;;;;;oCAAY;;;;;;;4BAGjC,iCACC,6NAAC;gCAAI,WAAU;;kDACb,6NAAC;wCAAI,WAAU;;;;;;kDACf,6NAAC;wCAAI,WAAU;;;;;;kDACf,6NAAC;wCAAI,WAAU;;;;;;;;;;;uCAEf,4BACF,6NAAC;gCAAI,WAAU;0CACb,cAAA,6NAAC,2LAAgB;oCAAC,SAAS;;;;;;;;;;qDAG7B,6NAAC;gCAAE,WAAU;0CAAwC;;;;;;;;;;;;;;;;;;;;;;;;AASnE;GAvkBwB;;QAiBL,+KAAY;;;KAjBP","debugId":null}},
    {"offset": {"line": 3490, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/lesson-player.tsx"],"sourcesContent":["\"use client\";\r\nimport { useRouter } from \"next/navigation\";\r\n// 1. Import useEffect, useCallback và additional icons\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport {\r\n  CheckCircle2,\r\n  XCircle,\r\n  Volume2,\r\n  RotateCcw,\r\n  ChevronRight,\r\n  ChevronLeft,\r\n  Loader2,\r\n  School,\r\n  Trophy, // Thêm icon cho màn hình kết quả\r\n} from \"lucide-react\";\r\nimport VocabularyInfo from \"@/components/VocabularyInfo\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\n\r\n// (Các interface Vocabulary, BackendVocabularyItem, Lesson không đổi)\r\ninterface Vocabulary {\r\n  title: string;\r\n  description: string;\r\n  videoUrl: string;\r\n  imageUrl?: string | null;\r\n  partOfSpeech?: string;\r\n}\r\n\r\ninterface BackendVocabularyItem {\r\n  id: number;\r\n  word: string;\r\n  description: string;\r\n  video_url: string;\r\n}\r\n\r\ninterface Question {\r\n  id: number;\r\n  question_text: string;\r\n  video: string;\r\n  type: \"mcq\" | \"true_false\";\r\n  options: {\r\n    id: number;\r\n    option_text: string;\r\n    is_correct: boolean;\r\n  }[];\r\n}\r\ninterface LessonQuizResponse {\r\n  quiz_id: number | null;\r\n  questions: Question[];\r\n}\r\ninterface Lesson {\r\n  id: number;\r\n  title: string;\r\n}\r\n\r\nexport default function LessonPlayer({ lesson }: { lesson: Lesson }) {\r\n  const [vocabularyList, setVocabularyList] = useState<Vocabulary[]>([]);\r\n  const [quizQuestions, setQuizQuestions] = useState<Question[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const { user } = useUserStore();\r\n  const router = useRouter();\r\n  // 1. THÊM \"summary\" VÀO STATE CỦA PHASE\r\n  const [phase, setPhase] = useState<\"introduction\" | \"quiz\" | \"summary\">(\r\n    \"introduction\"\r\n  );\r\n\r\n  const [currentVocabIndex, setCurrentVocabIndex] = useState(0);\r\n  const [currentQuizIndex, setCurrentQuizIndex] = useState(0);\r\n  const [quizAnswers, setQuizAnswers] = useState<(number | null)[]>([]);\r\n  const [showQuizResult, setShowQuizResult] = useState(false);\r\n  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n\r\n  // 2. THÊM STATE ĐỂ GIỮ ĐIỂM SỐ CUỐI CÙNG\r\n  const [quizPoint, setQuizPoint] = useState(0);\r\n  const [quizAttemptId, setQuizAttemptId] = useState<number | null>(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false); // Thêm state loading cho việc nộp bài\r\n  const fetchData = useCallback(async () => {\r\n    if (!lesson.id) {\r\n      setError(\"No lesson ID provided.\");\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setPhase(\"introduction\");\r\n    setCurrentVocabIndex(0);\r\n    setCurrentQuizIndex(0);\r\n    setSelectedAnswer(null);\r\n    setQuizPoint(0); // Reset điểm khi tải data mới\r\n\r\n    try {\r\n      const [vocabResponse, quizResponse] = await Promise.all([\r\n        fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/lessons/vocabulary?lesson_id=${lesson.id}`\r\n        ),\r\n        fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/lesson-quiz?lesson_id=${lesson.id}`\r\n        ),\r\n      ]);\r\n\r\n      if (!vocabResponse.ok) throw new Error(\"Failed to fetch vocabulary.\");\r\n      if (!quizResponse.ok) throw new Error(\"Failed to fetch quiz questions.\");\r\n\r\n      const vocabData: { vocabulary: BackendVocabularyItem[] } =\r\n        await vocabResponse.json();\r\n      const quizData: LessonQuizResponse = await quizResponse.json();\r\n      const mappedVocabulary: Vocabulary[] = vocabData.vocabulary.map(\r\n        (item) => ({\r\n          title: item.word,\r\n          description: item.description,\r\n          videoUrl: item.video_url,\r\n          imageUrl: null,\r\n        })\r\n      );\r\n      console.log(quizData);\r\n      const fetched_quiz_id = quizData.quiz_id;\r\n      console.log(fetched_quiz_id);\r\n      setQuizAttemptId(fetched_quiz_id); // Giả sử bạn đã đổi tên state này\r\n      setVocabularyList(mappedVocabulary);\r\n      setQuizQuestions(quizData.questions || []);\r\n      setQuizAnswers(new Array(quizData.questions?.length || 0).fill(null));\r\n    } catch (err: any) {\r\n      console.error(err);\r\n      setError(err.message || \"An unknown error occurred.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [lesson.id]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n  const currentVocab = vocabularyList[currentVocabIndex];\r\n  const currentQuestion = quizQuestions[currentQuizIndex];\r\n\r\n  // Logic tính điểm đúng/sai cho câu hỏi HIỆN TẠI\r\n  const correctAnswerIndex = currentQuestion\r\n    ? currentQuestion.options.findIndex((opt) => opt.is_correct)\r\n    : -1;\r\n  const isQuizCorrect = quizAnswers[currentQuizIndex] === correctAnswerIndex;\r\n\r\n  // Logic tính % thanh progress\r\n  const introProgress =\r\n    vocabularyList.length > 0\r\n      ? ((currentVocabIndex + 1) / vocabularyList.length) * 100\r\n      : 0;\r\n  const quizProgress =\r\n    quizQuestions.length > 0\r\n      ? ((currentQuizIndex + 1) / quizQuestions.length) * 100\r\n      : 0;\r\n\r\n  // 3. SỬA: Cập nhật thanh progress cho cả 3 giai đoạn\r\n  const currentProgress =\r\n    phase === \"introduction\"\r\n      ? introProgress\r\n      : phase === \"quiz\"\r\n      ? quizProgress\r\n      : 100; // 100% khi ở màn hình summary\r\n\r\n  const handleFinishIntroduction = () => {\r\n    if (quizQuestions.length > 0) {\r\n      setPhase(\"quiz\");\r\n      setCurrentQuizIndex(0);\r\n      setSelectedAnswer(null);\r\n      setShowQuizResult(false);\r\n    } else {\r\n      handleRestart();\r\n    }\r\n  };\r\n\r\n  // (handleQuizGeneration không đổi)\r\n  const handleQuizGeneration = async () => {\r\n    setIsGenerating(true);\r\n    setError(null);\r\n\r\n    const vocabularyPayload = vocabularyList.map((v) => ({\r\n      word: v.title,\r\n      description: v.description,\r\n      video: v.videoUrl,\r\n    }));\r\n\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_SERVER_URL}/api/generate-quiz`,\r\n        {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            lesson_id: lesson.id,\r\n            lesson_title: lesson.title,\r\n            user_id: user?.id,\r\n            vocabulary: vocabularyPayload,\r\n            session_id: null,\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const err = await response.json();\r\n        throw new Error(err.detail || \"Không thể tạo bài kiểm tra\");\r\n      }\r\n\r\n      const data = await response.json();\r\n      const agentResponse = JSON.parse(data.response);\r\n\r\n      if (agentResponse.action === \"create_quiz\") {\r\n        console.log(\"Quiz đã được tạo:\", agentResponse.payload);\r\n        await fetchData();\r\n        setPhase(\"quiz\");\r\n      } else {\r\n        // --- 💡 START FIX ---\r\n        // Get the payload message from the agent\r\n        const payloadMessage =\r\n          agentResponse.payload || \"Agent không thể tạo quiz\";\r\n\r\n        // Check if the payload message contains your special success string\r\n        if (String(payloadMessage).includes(\"[QuizID:\")) {\r\n          console.log(\r\n            \"Quiz generation handled (e.g., already exists):\",\r\n            payloadMessage\r\n          );\r\n\r\n          // This is not an error, so run the same success logic\r\n          await fetchData();\r\n          setPhase(\"quiz\");\r\n        } else {\r\n          // This is a REAL agent error\r\n          throw new Error(payloadMessage);\r\n        }\r\n        // --- 💡 END FIX ---\r\n      }\r\n    } catch (err: any) {\r\n      // This will now only catch true errors\r\n      setError(err.message);\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleQuizAnswer = (optionIndex: number) => {\r\n    setSelectedAnswer(optionIndex);\r\n    const newAnswers = [...quizAnswers];\r\n    newAnswers[currentQuizIndex] = optionIndex;\r\n    setQuizAnswers(newAnswers);\r\n    setShowQuizResult(true);\r\n  };\r\n\r\n  // 4. SỬA: handleNextQuiz để tính điểm và chuyển sang \"summary\"\r\n  const handleNextQuiz = () => {\r\n    if (currentQuizIndex < quizQuestions.length - 1) {\r\n      // Vẫn còn câu hỏi\r\n      setCurrentQuizIndex(currentQuizIndex + 1);\r\n      setShowQuizResult(false);\r\n      setSelectedAnswer(null);\r\n    } else {\r\n      // Đây là câu hỏi cuối cùng -> Tính điểm và chuyển sang summary\r\n\r\n      // 1. Tính điểm\r\n      const pointPerQuestion =\r\n        quizQuestions.length > 0 ? 100 / quizQuestions.length : 0;\r\n\r\n      const correctAnswersCount = quizAnswers.filter(\r\n        (selectedOptionIndex, questionIndex) => {\r\n          const question = quizQuestions[questionIndex];\r\n          if (!question || selectedOptionIndex === null) return false;\r\n\r\n          const correctOptionIndex = question.options.findIndex(\r\n            (opt) => opt.is_correct\r\n          );\r\n          return selectedOptionIndex === correctOptionIndex;\r\n        }\r\n      ).length;\r\n\r\n      setQuizPoint(Math.round(correctAnswersCount * pointPerQuestion));\r\n\r\n      // 2. Chuyển phase\r\n      setPhase(\"summary\");\r\n    }\r\n  };\r\n  const handleCompleteQuiz = async () => {\r\n    // Kiểm tra các ID cần thiết\r\n    if (!quizAttemptId || !user?.id) {\r\n      console.error(\r\n        \"Thiếu ID lượt làm bài hoặc ID người dùng. Không thể nộp điểm.\"\r\n      );\r\n      setError(\"Lỗi: Không thể nộp điểm. Vui lòng tải lại.\");\r\n      return; // Không làm gì cả nếu thiếu ID\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n    console.log(\"Testing:\", quizAttemptId, user.id, quizPoint, lesson.id);\r\n    try {\r\n      const response = await fetch(\r\n        `${process.env.NEXT_PUBLIC_SERVER_URL}/api/quiz/submit`,\r\n        {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            quiz_id: quizAttemptId,\r\n            user_id: parseInt(user.id), // Đảm bảo user ID là số\r\n            score: quizPoint,\r\n            lesson_id: lesson.id,\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const errData = await response.json();\r\n        throw new Error(errData.detail || \"Lỗi khi nộp bài\");\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log(\"Nộp bài thành công:\", result);\r\n      // Bạn có thể thêm logic ở đây, ví dụ: cập nhật state của user...\r\n      router.back();\r\n    } catch (err: any) {\r\n      console.error(\"Lỗi API nộp bài:\", err);\r\n      setError(err.message); // Hiển thị lỗi trên màn hình summary\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n  const handlePreviousQuiz = () => {\r\n    if (currentQuizIndex > 0) {\r\n      setCurrentQuizIndex(currentQuizIndex - 1);\r\n      setShowQuizResult(false);\r\n      setSelectedAnswer(null);\r\n    }\r\n  };\r\n\r\n  const handleNextVocab = () => {\r\n    if (currentVocabIndex < vocabularyList.length - 1) {\r\n      setCurrentVocabIndex(currentVocabIndex + 1);\r\n    }\r\n  };\r\n\r\n  const handlePreviousVocab = () => {\r\n    if (currentVocabIndex > 0) {\r\n      setCurrentVocabIndex(currentVocabIndex - 1);\r\n    }\r\n  };\r\n\r\n  // 5. SỬA: handleRestart để reset cả điểm\r\n  const handleRestart = () => {\r\n    setPhase(\"introduction\");\r\n    setCurrentVocabIndex(0);\r\n    setCurrentQuizIndex(0);\r\n    setQuizAnswers(new Array(quizQuestions.length).fill(null));\r\n    setShowQuizResult(false);\r\n    setSelectedAnswer(null);\r\n    setQuizPoint(0); // <-- RESET ĐIỂM\r\n  };\r\n\r\n  // (Phần JSX cho loading, error, no-vocabulary không đổi)\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] text-gray-500\">\r\n        <Loader2 className=\"w-8 h-8 animate-spin text-[#f66868]\" />\r\n        <p className=\"mt-3 text-lg\">Đang tải bài học...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !isGenerating) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] text-red-600 bg-red-50 p-6 rounded-lg\">\r\n        <XCircle className=\"w-8 h-8\" />\r\n        <p className=\"mt-3 text-lg font-semibold\">Lỗi khi tải bài học</p>\r\n        <p className=\"text-sm\">{error}</p>\r\n        <Button onClick={fetchData} className=\"mt-4\">\r\n          Thử lại\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (vocabularyList.length === 0) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center min-h-[400px] text-gray-500\">\r\n        <p className=\"text-lg\">Không tìm thấy từ vựng nào cho bài học này.</p>\r\n      </div>\r\n    );\r\n  }\r\n  // --- 1. Define state variables (This is the \"inline\" fix) ---\r\n\r\n  return (\r\n    <div className=\"space-y-8 w-[80%] mx-auto px-4 py-8\">\r\n      {/* (Header không đổi) */}\r\n      <div className=\"text-center\">\r\n        <h2 className=\"text-4xl font-extrabold mb-3 bg-gradient-to-r from-[#f66868] to-rose-400 bg-clip-text text-transparent\">\r\n          {phase === \"introduction\"\r\n            ? \"Học Từ Vựng Kí Hiệu\"\r\n            : phase === \"quiz\"\r\n            ? \"Kiểm Tra Kiến Thức\"\r\n            : \"Tổng Kết Kết Quả\"}\r\n        </h2>\r\n        {/* 6. SỬA: Ẩn đếm số câu/từ vựng khi ở màn hình summary */}\r\n        {phase !== \"summary\" && (\r\n          <p className=\"text-muted-foreground text-sm\">\r\n            {phase === \"introduction\"\r\n              ? `Từ vựng ${currentVocabIndex + 1} / ${vocabularyList.length}`\r\n              : `Câu hỏi ${currentQuizIndex + 1} / ${quizQuestions.length}`}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* (Progress và Tip box không đổi) */}\r\n      <div className=\"space-y-1\">\r\n        <div className=\"flex justify-between text-sm font-medium\">\r\n          <span className=\"text-foreground\">Tiến độ</span>\r\n          <span className=\"text-[#f66868]\">{Math.round(currentProgress)}%</span>\r\n        </div>\r\n        <Progress\r\n          value={currentProgress}\r\n          className=\"h-2 bg-rose-100 [&>div]:bg-[#f66868]\"\r\n        />\r\n      </div>\r\n      {phase == \"introduction\" && (\r\n        <div className=\"w-full flex justify-center\">\r\n          <div className=\"mt-1 w-fit rounded-xl border border-rose-200 bg-gradient-to-r from-rose-50 to-rose-100 p-4 text-center shadow-sm flex flex-row gap-x-4 items-center\">\r\n            <div className=\"text-xl\">💡</div>\r\n            <div className=\"flex flex-col gap-y-1\">\r\n              <p className=\"text-rose-700 font-medium text-lg\">\r\n                Mẹo nhỏ: Hãy bật camera để tự kiểm tra bản thân nhé!\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* === PHASE: INTRODUCTION === */}\r\n      {phase === \"introduction\" && currentVocab && (\r\n        <VocabularyInfo\r\n          word={currentVocab.title}\r\n          partOfSpeech={currentVocab.partOfSpeech}\r\n          definition={currentVocab.description}\r\n          videoUrl={currentVocab.videoUrl}\r\n          imageUrl={currentVocab.imageUrl || undefined}\r\n        />\r\n      )}\r\n\r\n      {/* === PHASE: QUIZ === */}\r\n      {phase === \"quiz\" && currentQuestion && (\r\n        <Card className=\"overflow-hidden border-2 shadow-sm hover:shadow-md transition-all scale-[0.98]\">\r\n          <CardHeader className=\"border-b-2 py-2 px-4\">\r\n            <div className=\"flex justify-between items-start\">\r\n              <div>\r\n                <CardTitle className=\"text-lg font-semibold text-foreground\">\r\n                  {currentQuestion.question_text}\r\n                </CardTitle>\r\n                {currentQuestion.video && (\r\n                  <CardDescription className=\"text-xs mt-0.5\">\r\n                    Xem video và chọn đáp án đúng\r\n                  </CardDescription>\r\n                )}\r\n              </div>\r\n              <Badge className=\"bg-[#f66868]/10 text-[#f66868] border border-[#f66868]/30 text-[11px] py-0.5 px-2\">\r\n                Kiểm Tra\r\n              </Badge>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent className=\"pt-4 space-y-4 px-4 pb-4\">\r\n            {currentQuestion.video && (\r\n              <div className=\"relative rounded-lg overflow-hidden aspect-video bg-rose-50 shadow-inner\">\r\n                <video\r\n                  key={currentQuestion.id}\r\n                  src={currentQuestion.video}\r\n                  className=\"w-full h-full object-cover\"\r\n                  autoPlay\r\n                  loop\r\n                  muted\r\n                />\r\n                <div className=\"absolute top-0 left-0 h-full w-48 bg-white z-10\"></div>\r\n                <div className=\"absolute top-0 right-0 h-full w-48 bg-white z-10\"></div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-2 gap-3\">\r\n              {currentQuestion.options.map((option, index) => (\r\n                <button\r\n                  key={option.id}\r\n                  onClick={() => handleQuizAnswer(index)}\r\n                  disabled={showQuizResult}\r\n                  className={`group w-full rounded-lg overflow-hidden border transition-all duration-300 disabled:opacity-60 disabled:cursor-not-allowed ${\r\n                    // This is the new, cleaned-up logic:\r\n                    showQuizResult && selectedAnswer === index // A. Results are SHOWN and this was the user's answer\r\n                      ? option.is_correct\r\n                        ? \"border-green-500 ring-2 ring-green-500/50\" // A1. It was CORRECT (green)\r\n                        : \"border-red-500 ring-2 ring-red-500/50\" // A2. It was INCORRECT (red)\r\n                      : !showQuizResult && selectedAnswer === index // B. Results NOT shown, but this is selected\r\n                      ? \"border-[#f66868] ring-2 ring-[#f66868]/50\" // B1. Neutral \"selected\" state (pink)\r\n                      : \"border-gray-200 hover:border-[#f66868]/70\" // C. Idle / unselected state (gray)\r\n                  }`}\r\n                >\r\n                  {/* This text block now also changes color based on the state */}\r\n                  <div\r\n                    className={`p-3 bg-white border-t text-sm font-medium text-center transition-all duration-300 ${\r\n                      // Logic for text color\r\n                      showQuizResult && selectedAnswer === index\r\n                        ? option.is_correct\r\n                          ? \"text-green-700 font-bold\" // Correct answer, selected\r\n                          : \"text-red-700 font-bold\" // Incorrect answer, selected\r\n                        : !showQuizResult && selectedAnswer === index\r\n                        ? \"text-[#f66868] font-bold\" // Neutral \"selected\" state\r\n                        : \"text-gray-700 group-hover:text-[#f66868]\" // Idle state\r\n                    }`}\r\n                  >\r\n                    {/* FIX: Added \"flex items-center justify-center gap-2\"\r\n    This centers the content and adds space between the icon and text.\r\n  */}\r\n                    <div className=\"flex items-center justify-center gap-2\">\r\n                      {/* FIX: Wrapped the icon logic in a check.\r\n      This ensures icons ONLY show up for the answer the user selected,\r\n      once the results are shown.\r\n    */}\r\n                      {showQuizResult && selectedAnswer === index && (\r\n                        <>\r\n                          {option.is_correct ? (\r\n                            <CheckCircle2 className=\"w-5 h-5 text-green-600\" />\r\n                          ) : (\r\n                            <XCircle className=\"w-5 h-5 text-red-600\" />\r\n                          )}\r\n                        </>\r\n                      )}\r\n\r\n                      {/* This text now renders correctly with or without an icon */}\r\n                      <span>{option.option_text}</span>\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            {showQuizResult && (\r\n              <div\r\n                className={`p-3 rounded-md border text-sm ${\r\n                  isQuizCorrect\r\n                    ? \"bg-green-50 border-green-200 text-green-800\"\r\n                    : \"bg-red-50 border-red-200 text-red-800\"\r\n                }`}\r\n              >\r\n                <p className=\"font-semibold mb-0.5\">\r\n                  {isQuizCorrect ? \"Tuyệt vời!\" : \"Chưa đúng\"}\r\n                </p>\r\n                <p className=\"text-xs leading-snug\">\r\n                  {isQuizCorrect\r\n                    ? `Đúng rồi! Đây là kí hiệu cho \"${currentQuestion.options[correctAnswerIndex]?.option_text}\".`\r\n                    : `Đáp án đúng là \"${currentQuestion.options[correctAnswerIndex]?.option_text}\". Hãy thử lại nhé!`}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* 7. THÊM: Giao diện cho màn hình SUMMARY */}\r\n      {phase === \"summary\" && (\r\n        <Card className=\"overflow-hidden border-2 border-rose-100 shadow-sm text-center pb-0\">\r\n          <CardHeader className=\"bg-gradient-to-br from-rose-50 to-white py-6\">\r\n            <Trophy className=\"w-16 h-16 text-[#f66868] mx-auto\" />\r\n            <CardTitle className=\"text-3xl font-bold text-[#f66868] pt-2\">\r\n              Chúc Mừng Hoàn Thành!\r\n            </CardTitle>\r\n            <CardDescription className=\"text-lg text-gray-600\">\r\n              Bạn đã hoàn thành bài kiểm tra.\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6 p-6\">\r\n            <div className=\"text-7xl font-bold text-gray-800\">{quizPoint}</div>\r\n            <p className=\"text-xl text-gray-600 -mt-4\">/ 100 điểm</p>\r\n            <div className=\"w-full max-w-xs mx-auto\">\r\n              <Progress\r\n                value={quizPoint}\r\n                className=\"h-3 bg-rose-100 [&>div]:bg-[#f66868]\"\r\n              />\r\n            </div>\r\n            <p className=\"text-gray-500\">\r\n              Bạn đã trả lời đúng{\" \"}\r\n              <strong>\r\n                {Math.round((quizPoint / 100) * quizQuestions.length)} /{\" \"}\r\n                {quizQuestions.length}\r\n              </strong>{\" \"}\r\n              câu hỏi.\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* NAVIGATION */}\r\n      <div className=\"flex items-center justify-between\">\r\n        {/* 8. SỬA: Ẩn nút \"Quay Lại\" khi ở màn hình summary */}\r\n        {phase !== \"summary\" ? (\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={\r\n              phase === \"introduction\"\r\n                ? handlePreviousVocab\r\n                : handlePreviousQuiz\r\n            }\r\n            disabled={\r\n              phase === \"introduction\"\r\n                ? currentVocabIndex === 0\r\n                : currentQuizIndex === 0\r\n            }\r\n            className=\"flex items-center gap-2 border-rose-200 text-[#f66868] hover:bg-rose-50\"\r\n          >\r\n            <ChevronLeft className=\"h-4 w-4\" /> Quay Lại\r\n          </Button>\r\n        ) : (\r\n          <div></div> // Placeholder để giữ nút bên phải ở đúng vị trí\r\n        )}\r\n\r\n        {/* 9. SỬA: Ẩn thanh progress dots khi ở màn hình summary */}\r\n        {phase !== \"summary\" && (\r\n          <div className=\"flex items-center gap-2\">\r\n            {(phase === \"introduction\" ? vocabularyList : quizQuestions).map(\r\n              (_, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  className={`h-2 rounded-full transition-all ${\r\n                    (phase === \"introduction\"\r\n                      ? currentVocabIndex\r\n                      : currentQuizIndex) === idx\r\n                      ? \"w-8 bg-[#f66868]\"\r\n                      : \"w-2 bg-muted\"\r\n                  }`}\r\n                />\r\n              )\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* 10. SỬA: Cập nhật logic nút chính cho cả 3 phase */}\r\n        <div className=\"flex flex-row gap-x-1\">\r\n          <Button\r\n            onClick={\r\n              phase === \"introduction\"\r\n                ? currentVocabIndex === vocabularyList.length - 1\r\n                  ? handleFinishIntroduction\r\n                  : handleNextVocab\r\n                : phase === \"quiz\" // Thêm điều kiện check\r\n                ? currentQuizIndex === quizQuestions.length - 1\r\n                  ? handleNextQuiz // handleNextQuiz sẽ tự động chuyển sang summary\r\n                  : handleNextQuiz\r\n                : handleRestart // Nếu phase là \"summary\", nút này sẽ là \"Restart\"\r\n            }\r\n            disabled={(phase === \"quiz\" && !showQuizResult) || isGenerating}\r\n            className=\"flex items-center gap-2 bg-[#f66868] hover:bg-[#f66868]/90 text-white shadow-md\"\r\n          >\r\n            {phase === \"introduction\" ? (\r\n              currentVocabIndex === vocabularyList.length - 1 ? (\r\n                <>\r\n                  {quizQuestions.length > 0 ? \"Làm Kiểm Tra\" : \"Học lại\"}\r\n                  <ChevronRight className=\"h-4 w-4\" />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  Tiếp Tục <ChevronRight className=\"h-4 w-4\" />\r\n                </>\r\n              )\r\n            ) : phase === \"quiz\" ? ( // Thêm điều kiện check\r\n              currentQuizIndex === quizQuestions.length - 1 ? (\r\n                // Câu quiz cuối\r\n                <>\r\n                  Hoàn thành <ChevronRight className=\"h-4 w-4\" />\r\n                </>\r\n              ) : (\r\n                // Vẫn còn câu quiz\r\n                <>\r\n                  Tiếp Tục <ChevronRight className=\"h-4 w-4\" />\r\n                </>\r\n              )\r\n            ) : (\r\n              // Phase là \"summary\"\r\n              <>\r\n                <RotateCcw className=\"h-4 w-4\" /> Bắt Đầu Lại\r\n              </>\r\n            )}\r\n          </Button>\r\n          {phase === \"summary\" && (\r\n            <Button\r\n              className=\"flex items-center gap-2 bg-[#f66868] hover:bg-[#f66868]/90 text-white shadow-md\"\r\n              onClick={handleCompleteQuiz}\r\n            >\r\n              Hoàn thành\r\n            </Button>\r\n          )}\r\n          {/* Nút \"Tạo Quiz\" (Logic không đổi) */}\r\n          {phase === \"introduction\" && quizQuestions.length === 0 && (\r\n            <Button\r\n              onClick={handleQuizGeneration}\r\n              variant=\"outline\"\r\n              disabled={isGenerating}\r\n              className=\"flex items-center gap-2 border-rose-200 text-[#f66868] hover:bg-rose-50\"\r\n            >\r\n              {isGenerating ? (\r\n                <>\r\n                  <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                  Đang tạo...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <School className=\"h-4 w-4\" /> Tạo Quiz\r\n                </>\r\n              )}\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4475, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/progress-sidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport {\r\n  CheckCircle2,\r\n  Lock,\r\n  Circle,\r\n  SquarePen,\r\n  GraduationCap,\r\n  Sparkles,\r\n  BookOpen,\r\n  Trophy,\r\n} from \"lucide-react\";\r\nimport { SyllabusInfo } from \"../../map/page\";\r\n\r\ntype LessonStatus = \"complete\" | \"in-progress\" | \"not_start\";\r\n\r\ninterface Lesson {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  vocabulary_count: number;\r\n  lesson_status: LessonStatus;\r\n  level: \"Cơ bản\";\r\n}\r\n\r\n// 2. DELETE the hardcoded 'lessons' array.\r\n// const lessons: Lesson[] = [ ... ]; // <-- DELETE THIS\r\n\r\n// 3. UPDATE the props to accept the 'lessons' array\r\ninterface ProgressSidebarProps {\r\n  lessons: Lesson[]; // <-- ADD THIS\r\n  syllabus: SyllabusInfo | undefined;\r\n  selectedLessonId?: number;\r\n  onSelectLesson?: (id: number) => void;\r\n}\r\n\r\nexport default function ProgressSidebar({\r\n  lessons, // <-- 4. ACCEPT the 'lessons' prop\r\n  syllabus,\r\n  selectedLessonId,\r\n  onSelectLesson,\r\n}: ProgressSidebarProps) {\r\n  // 5. CALCULATE progress dynamically from the 'lessons' prop\r\n  const totalLessons = lessons.length;\r\n  const completedCount = lessons.filter(\r\n    (l) => l.lesson_status === \"complete\"\r\n  ).length;\r\n  console.log(lessons);\r\n  // More accurate vocabulary calculation\r\n  const totalVocabulary = lessons.reduce(\r\n    (acc, lesson) => acc + (lesson.vocabulary_count || 0),\r\n    0\r\n  );\r\n\r\n  const vocabularyComplete = lessons.reduce(\r\n    (acc, lesson) =>\r\n      acc + (lesson.lesson_status === \"complete\" ? lesson.vocabulary_count : 0),\r\n    0\r\n  );\r\n  const completionPercentage =\r\n    totalLessons > 0 ? (completedCount / totalLessons) * 100 : 0;\r\n\r\n  const vocabPercentage =\r\n    totalVocabulary > 0 ? (vocabularyComplete / totalVocabulary) * 100 : 0;\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Progress Overview Card */}\r\n      <Card className=\"border border-[#F66868]/30 bg-gradient-to-br from-rose-50 to-white rounded-2xl shadow-sm py-6\">\r\n        {/* Decorative background elements */}\r\n        <div className=\"absolute top-0 right-0 w-32 h-32 bg-[#F66868]/10 rounded-full blur-3xl -mr-16 -mt-16\"></div>\r\n        <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-pink-300/20 rounded-full blur-2xl -ml-12 -mb-12\"></div>\r\n\r\n        <CardHeader className=\"relative z-10\">\r\n          <div className=\"flex items-start justify-between gap-3\">\r\n            <div className=\"flex-1\">\r\n              <div className=\"flex items-center gap-2 mb-3\">\r\n                <div className=\"p-2 bg-[#F66868]/10 rounded-xl\">\r\n                  <GraduationCap className=\"h-5 w-5 text-[#F66868]\" />\r\n                </div>\r\n                <span className=\"text-xs font-bold text-[#F66868]/70 uppercase tracking-wider\">\r\n                  Giáo trình của bạn\r\n                </span>\r\n              </div>\r\n              <CardTitle className=\"text-2xl font-bold text-[#F66868] tracking-tight leading-tight\">\r\n                {syllabus?.title || \"Chọn giáo trình\"}\r\n              </CardTitle>\r\n            </div>\r\n            {syllabus && Number(syllabus.id) > 11 && (\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"default\"\r\n                className=\"bg-[#F66868] text-white transition-all duration-300 rounded-sm shadow-sm hover:bg-[#F66868]/60 hover:text-white\"\r\n              >\r\n                <SquarePen className=\"h-4 w-4 mr-1\" />\r\n                Điều chỉnh\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"space-y-5 relative z-10\">\r\n          {/* Syllabus Description */}\r\n          {syllabus?.description && (\r\n            <div className=\"bg-white/60 backdrop-blur-sm rounded-2xl p-4 border border-rose-100\">\r\n              <p className=\"text-sm text-gray-700 leading-relaxed\">\r\n                {syllabus.description}\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Stats Grid */}\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            {/* Lessons Stat */}\r\n            <div className=\"bg-white rounded-2xl p-4 shadow-sm border border-rose-100 hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-center gap-2 mb-2\">\r\n                <div className=\"p-2 bg-[#F66868]/10 rounded-lg\">\r\n                  <BookOpen className=\"h-4 w-4 text-[#F66868]\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">\r\n                {completedCount}\r\n                <span className=\"text-lg text-gray-400\">/{totalLessons}</span>\r\n              </div>\r\n              <div className=\"text-xs text-gray-600 mt-1 font-medium\">\r\n                Bài học\r\n              </div>\r\n            </div>\r\n\r\n            {/* Vocabulary Stat */}\r\n            <div className=\"bg-white rounded-2xl p-4 shadow-sm border border-emerald-100 hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-center gap-2 mb-2\">\r\n                <div className=\"p-2 bg-emerald-100 rounded-lg\">\r\n                  <Sparkles className=\"h-4 w-4 text-emerald-600\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"text-2xl font-bold text-gray-900\">\r\n                {vocabularyComplete}\r\n                <span className=\"text-lg text-gray-400\">\r\n                  /{totalVocabulary}\r\n                </span>\r\n              </div>\r\n              <div className=\"text-xs text-gray-600 mt-1 font-medium\">\r\n                Từ vựng\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Vocabulary Progress */}\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center justify-between text-sm\">\r\n              <span className=\"text-gray-600 font-semibold\">\r\n                Tiến độ từ vựng\r\n              </span>\r\n              <span className=\"font-bold text-emerald-600 text-base\">\r\n                {Math.round(vocabPercentage)}%\r\n              </span>\r\n            </div>\r\n            <div className=\"relative h-3 bg-emerald-100 rounded-full overflow-hidden shadow-inner\">\r\n              <div\r\n                className=\"h-full bg-gradient-to-r from-emerald-500 via-green-500 to-emerald-500 transition-all duration-700 ease-out rounded-full relative\"\r\n                style={{ width: `${vocabPercentage}%` }}\r\n              >\r\n                <div className=\"absolute inset-0 bg-white/30 animate-pulse\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Achievement Badge */}\r\n          {completionPercentage === 100 && (\r\n            <div className=\"relative overflow-hidden rounded-2xl bg-white/70 backdrop-blur-md border border-[#F66868]/40 p-5 text-center shadow-sm\">\r\n              <div className=\"absolute inset-0 bg-gradient-to-r from-[#F66868]/20 via-[#F66868]/15 to-[#F66868]/25 animate-pulse\"></div>\r\n              <div className=\"relative z-10\">\r\n                <Trophy className=\"h-10 w-10 text-[#F66868] mx-auto mb-2 drop-shadow-sm\" />\r\n                <p className=\"text-[#F66868] font-bold text-base\">\r\n                  Hoàn thành xuất sắc! 🎉\r\n                </p>\r\n                <p className=\"text-[#F66868]/80 text-sm mt-1\">\r\n                  Bạn đã chinh phục giáo trình này\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Lesson List */}\r\n      <div className=\"space-y-2 max-h-[600px] overflow-y-auto pr-2\">\r\n        {lessons.map((lesson) => (\r\n          <div\r\n            key={lesson.id}\r\n            onClick={() => onSelectLesson?.(lesson.id)}\r\n            className={`p-3 rounded-xl border text-sm transition-all cursor-pointer backdrop-blur-sm\r\n    \r\n    ${\r\n      lesson.lesson_status === \"complete\"\r\n        ? \"border-green-400 bg-green-50 hover:bg-green-100\"\r\n        : \"hover:bg-rose-50 hover:border-[#F66868] \"\r\n    }          \r\n    ${\r\n      selectedLessonId === lesson.id\r\n        ? \"border-[#F66868] bg-[#F66868]/10 shadow-[0_0_8px_#F66868]/30\"\r\n        : \"\"\r\n    }\r\n    \r\n  `}\r\n          >\r\n            <div className=\"flex gap-3 items-center\">\r\n              <div className=\"flex-shrink-0 mt-0.5\">\r\n                {lesson.lesson_status === \"complete\" && (\r\n                  <CheckCircle2 className=\"h-5 w-5 text-green-500\" />\r\n                )}\r\n                {lesson.lesson_status === \"in-progress\" && (\r\n                  <Circle className=\"h-5 w-5 text-[#F66868] fill-[#F66868]/40 animate-pulse\" />\r\n                )}\r\n                {lesson.lesson_status === \"not_start\" && (\r\n                  <Circle className=\"h-5 w-5 text-gray-300\" />\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"flex w-full flex-row justify-between items-center\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p\r\n                    className={`text-sm font-medium truncate ${\r\n                      lesson.lesson_status === \"complete\"\r\n                        ? \"text-green-700\"\r\n                        : \"text-gray-900\"\r\n                    }`}\r\n                  >\r\n                    {lesson.title}\r\n                  </p>\r\n                  <p\r\n                    className={`text-xs mt-1 ${\r\n                      lesson.lesson_status === \"complete\"\r\n                        ? \"text-green-600/70\"\r\n                        : \"text-gray-500\"\r\n                    }`}\r\n                  >\r\n                    {lesson.vocabulary_count} từ vựng\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4980, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/components/lesson-tab.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Play,\r\n  CheckCircle2,\r\n  BookOpen,\r\n  Sparkles,\r\n  TrendingUp,\r\n} from \"lucide-react\";\r\nimport LessonPlayer from \"./lesson-player\";\r\nimport ProgressSidebar from \"./progress-sidebar\";\r\nimport { useUserStore } from \"@/store/useUserStore\";\r\nimport { SyllabusInfo } from \"../../map/page\";\r\n\r\ntype LessonStatus = \"complete\" | \"in-progress\" | \"not_start\";\r\n\r\ninterface Lesson {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  vocabularyCount: number;\r\n  lesson_status: LessonStatus;\r\n  level: \"Cơ bản\";\r\n}\r\n\r\nexport default function LessonTab({\r\n  syllabus,\r\n}: {\r\n  syllabus: SyllabusInfo | undefined;\r\n}) {\r\n  const { user } = useUserStore();\r\n  const [lessons, setLessons] = useState<Lesson[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [selectedLesson, setSelectedLesson] = useState<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!syllabus?.id || !user?.id) {\r\n      setLessons([]);\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchLessons = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        const res = await fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/syllabuses/${syllabus.id}/lessons?user_id=${user.id}`\r\n        );\r\n        if (!res.ok) throw new Error(\"Failed to fetch lessons\");\r\n        const data: { lessons: Lesson[] } = await res.json();\r\n        setLessons(data.lessons || []);\r\n      } catch (e) {\r\n        console.error(e);\r\n        setLessons([]);\r\n      } finally {\r\n        setIsLoading(false);\r\n        setSelectedLesson(null);\r\n      }\r\n    };\r\n\r\n    fetchLessons();\r\n  }, [syllabus?.id, user?.id]);\r\n\r\n  const lessonToPlay = lessons.find((l) => l.id === selectedLesson);\r\n\r\n  if (selectedLesson && lessonToPlay) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <Button\r\n          variant=\"outline\"\r\n          onClick={() => setSelectedLesson(null)}\r\n          className=\"mb-4 border-2 border-[#f66868] text-[#f66868] hover:text-white hover:bg-[#f66868] transition-all duration-300 font-semibold shadow-sm\"\r\n        >\r\n          ← Quay Lại Danh Sách\r\n        </Button>\r\n        <LessonPlayer lesson={lessonToPlay} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-20\">\r\n        <div className=\"relative\">\r\n          <div className=\"w-16 h-16 border-4 border-rose-200 border-t-[#f66868] rounded-full animate-spin\"></div>\r\n          <Sparkles className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-6 w-6 text-[#f66868]\" />\r\n        </div>\r\n        <p className=\"mt-6 text-gray-600 font-medium text-lg\">\r\n          Đang tải bài học...\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (lessons.length === 0) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-20 px-4\">\r\n        <div className=\"bg-gradient-to-br from-rose-50 to-pink-50 rounded-3xl p-12 text-center max-w-md\">\r\n          <BookOpen className=\"h-16 w-16 text-[#f66868]/60 mx-auto mb-4\" />\r\n          <h3 className=\"text-xl font-bold text-gray-800 mb-2\">\r\n            Chưa có bài học\r\n          </h3>\r\n          <p className=\"text-gray-600\">\r\n            Không tìm thấy bài học nào cho chủ đề này.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const completed = lessons.filter(\r\n    (l) => l.lesson_status === \"complete\"\r\n  ).length;\r\n  const progress = (completed / lessons.length) * 100;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n      <div className=\"lg:col-span-2 space-y-8\">\r\n        {/* Progress Header */}\r\n        <div className=\"relative overflow-hidden rounded-3xl bg-gradient-to-br from-[#f66868] via-[#ff7b7b] to-[#ff8f8f] p-8 text-white shadow-xl\">\r\n          <div className=\"relative z-10\">\r\n            <div className=\"flex justify-between items-start\">\r\n              <div>\r\n                <h2 className=\"text-4xl font-bold mb-3\">Bài Học</h2>\r\n                <p className=\"text-white/90 text-lg font-medium\">\r\n                  Học bài theo cách lộ trình của bạn\r\n                </p>\r\n              </div>\r\n              <div className=\"bg-white/20 rounded-2xl px-6 py-4 text-center border border-white/30\">\r\n                <div className=\"text-3xl font-bold\">\r\n                  {completed}/{lessons.length}\r\n                </div>\r\n                <div className=\"text-sm text-white/90 mt-1\">Hoàn thành</div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            <div className=\"mt-6\">\r\n              <div className=\"flex justify-between mb-2\">\r\n                <span className=\"text-sm font-semibold text-white/90\">\r\n                  Tiến độ học tập\r\n                </span>\r\n                <span className=\"text-sm font-bold\">\r\n                  {Math.round(progress)}%\r\n                </span>\r\n              </div>\r\n              <div className=\"h-3 bg-white/20 rounded-full overflow-hidden\">\r\n                <div\r\n                  className=\"h-full bg-white rounded-full transition-all duration-1000 ease-out\"\r\n                  style={{ width: `${progress}%` }}\r\n                ></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Lessons Grid */}\r\n        <div className=\"grid gap-6 md:grid-cols-2\">\r\n          {lessons.map((lesson, index) => {\r\n            const isComplete = lesson.lesson_status === \"complete\";\r\n            const isPlayable =\r\n              lesson.lesson_status === \"in-progress\" ||\r\n              lesson.lesson_status === \"not_start\";\r\n\r\n            return (\r\n              <Card\r\n                key={lesson.id}\r\n                onClick={() => setSelectedLesson(lesson.id)}\r\n                className={`group relative overflow-hidden rounded-3xl border-2 transition-all duration-500 hover:scale-[1.02] cursor-pointer \r\n                  ${\r\n                    isComplete\r\n                      ? \"border-emerald-200 hover:border-emerald-400 hover:shadow-[0_8px_30px_rgb(16,185,129,0.15)]\"\r\n                      : \"border-rose-100 hover:border-[#F66868] hover:shadow-[0_8px_30px_rgba(246,104,104,0.15)]\"\r\n                  }`}\r\n              >\r\n                {/* Hover Overlay */}\r\n                <div\r\n                  className={`absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 ${\r\n                    isComplete\r\n                      ? \"bg-gradient-to-br from-emerald-50/50 to-green-50/50\"\r\n                      : \"bg-gradient-to-br from-rose-50/50 to-pink-50/50\"\r\n                  }`}\r\n                />\r\n\r\n                <CardHeader className=\"pt-6 pb-4 relative z-10\">\r\n                  <div className=\"flex justify-between items-start gap-4\">\r\n                    <div className=\"flex-1\">\r\n                      <div\r\n                        className={`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold mb-3 ${\r\n                          isComplete\r\n                            ? \"bg-emerald-100 text-emerald-700\"\r\n                            : \"bg-rose-100 text-[#f66868]\"\r\n                        }`}\r\n                      >\r\n                        <span>Bài {index + 1}</span>\r\n                        {lesson.lesson_status === \"in-progress\" && (\r\n                          <TrendingUp className=\"h-3 w-3\" />\r\n                        )}\r\n                      </div>\r\n\r\n                      <CardTitle\r\n                        className={`text-xl font-bold leading-snug transition-colors ${\r\n                          isComplete\r\n                            ? \"text-emerald-600 group-hover:text-emerald-700\"\r\n                            : \"text-gray-800 group-hover:text-[#f66868]\"\r\n                        }`}\r\n                      >\r\n                        {lesson.title}\r\n                      </CardTitle>\r\n\r\n                      <p className=\"text-sm text-gray-600 mt-2 line-clamp-2\">\r\n                        {lesson.description}\r\n                      </p>\r\n                    </div>\r\n\r\n                    {isComplete && (\r\n                      <CheckCircle2 className=\"h-8 w-8 text-emerald-500 drop-shadow-sm\" />\r\n                    )}\r\n                  </div>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"space-y-4 pb-6 relative z-10\">\r\n                  <Button\r\n                    className={`w-full h-12 rounded-xl text-sm font-bold shadow-md hover:shadow-xl transition-all duration-300\r\n                      ${\r\n                        isComplete\r\n                          ? \"bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600 text-white\"\r\n                          : isPlayable\r\n                          ? \"bg-gradient-to-r from-[#F66868] to-[#ff7b7b] hover:from-[#f55555] hover:to-[#F66868] text-white\"\r\n                          : \"bg-gray-100 text-gray-500 cursor-not-allowed\"\r\n                      }`}\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      setSelectedLesson(lesson.id);\r\n                    }}\r\n                  >\r\n                    {isComplete && (\r\n                      <>\r\n                        <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n                        Ôn Tập\r\n                      </>\r\n                    )}\r\n                    {lesson.lesson_status === \"in-progress\" && (\r\n                      <>\r\n                        <Play className=\"h-4 w-4 mr-2\" />\r\n                        Tiếp Tục\r\n                      </>\r\n                    )}\r\n                    {lesson.lesson_status === \"not_start\" && (\r\n                      <>\r\n                        <Play className=\"h-4 w-4 mr-2\" />\r\n                        Bắt Đầu\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                </CardContent>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"lg:col-span-1\">\r\n        <div className=\"sticky top-24\">\r\n          <ProgressSidebar\r\n            syllabus={syllabus}\r\n            lessons={lessons}\r\n            selectedLessonId={selectedLesson ?? undefined}\r\n            onSelectLesson={setSelectedLesson}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5506, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,KAEoC;QAFpC,EACd,GAAG,OAC+C,GAFpC;IAGd,qBAAO,6NAAC,6MAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,KAEgC;QAFhC,EACrB,GAAG,OACkD,GAFhC;IAGrB,qBAAO,6NAAC,gNAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,KAEgC;QAFhC,EACpB,GAAG,OACiD,GAFhC;IAGpB,qBAAO,6NAAC,+MAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,KAEgC;QAFhC,EACnB,GAAG,OACgD,GAFhC;IAGnB,qBAAO,6NAAC,8MAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,KAGgC;QAHhC,EACrB,SAAS,EACT,GAAG,OACkD,GAHhC;IAIrB,qBACE,6NAAC,gNAAuB;QACtB,aAAU;QACV,WAAW,IAAA,4JAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,cAAc,KAOtB;QAPsB,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ,GAPsB;IAQrB,qBACE,6NAAC;QAAa,aAAU;;0BACtB,6NAAC;;;;;0BACD,6NAAC,gNAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,4JAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,6NAAC,8MAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,6NAAC,4OAAK;;;;;0CACN,6NAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;MAhCS;AAkCT,SAAS,aAAa,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACpB,qBACE,6NAAC;QACC,aAAU;QACV,WAAW,IAAA,4JAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,aAAa,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACpB,qBACE,6NAAC;QACC,aAAU;QACV,WAAW,IAAA,4JAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,KAGgC;QAHhC,EACnB,SAAS,EACT,GAAG,OACgD,GAHhC;IAInB,qBACE,6NAAC,8MAAqB;QACpB,aAAU;QACV,WAAW,IAAA,4JAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,KAGgC;QAHhC,EACzB,SAAS,EACT,GAAG,OACsD,GAHhC;IAIzB,qBACE,6NAAC,oNAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,4JAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS","debugId":null}},
    {"offset": {"line": 5722, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,KAGoC;QAHpC,EACb,SAAS,EACT,GAAG,OAC8C,GAHpC;IAIb,qBACE,6NAAC,4MAAmB;QAClB,aAAU;QACV,WAAW,IAAA,4JAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS","debugId":null}},
    {"offset": {"line": 5756, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\r\n  return (\r\n    <textarea\r\n      data-slot=\"textarea\"\r\n      className={cn(\r\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Textarea }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,KAAyD;QAAzD,EAAE,SAAS,EAAE,GAAG,OAAyC,GAAzD;IAChB,qBACE,6NAAC;QACC,aAAU;QACV,WAAW,IAAA,4JAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS","debugId":null}},
    {"offset": {"line": 5787, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/components/curriculum-modal/index.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport type React from \"react\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\n\r\ninterface CurriculumFormData {\r\n  target: string;\r\n  freetime: string;\r\n  schedule: string;\r\n  hope: string;\r\n}\r\n\r\ninterface CurriculumModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSubmit: (data: CurriculumFormData) => void;\r\n  isLoading?: boolean;\r\n}\r\n\r\nexport default function CurriculumModal({\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  isLoading = false,\r\n}: CurriculumModalProps) {\r\n  const [formData, setFormData] = useState<CurriculumFormData>({\r\n    target: \"\",\r\n    freetime: \"\",\r\n    schedule: \"\",\r\n    hope: \"\",\r\n  });\r\n\r\n  const handleInputChange = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\r\n  ) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    onSubmit(formData);\r\n    setFormData({\r\n      target: \"\",\r\n      freetime: \"\",\r\n      schedule: \"\",\r\n      hope: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={onClose}>\r\n      <DialogContent className=\"sm:max-w-[500px]\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-2xl font-semibold text-[#F66868]\">\r\n            🤖 Tạo giáo trình cá nhân hoá\r\n          </DialogTitle>\r\n          <DialogDescription className=\"text-base\">\r\n            Điền thông tin dưới đây để AI tạo ra một giáo trình học tập phù hợp\r\n            với bạn\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n          {/* Target Field */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"target\" className=\"text-base font-medium\">\r\n              🎯 Mục tiêu học tập\r\n            </Label>\r\n            <Input\r\n              id=\"target\"\r\n              name=\"target\"\r\n              placeholder=\"Ví dụ: Thành thạo Ngôn ngữ Kí hiệu cơ bản trong 3 tháng\"\r\n              value={formData.target}\r\n              onChange={handleInputChange}\r\n              required\r\n              className=\"text-base\"\r\n            />\r\n          </div>\r\n\r\n          {/* Freetime Field */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"freetime\" className=\"text-base font-medium\">\r\n              ⏰ Thời gian rảnh có sẵn\r\n            </Label>\r\n            <Input\r\n              id=\"freetime\"\r\n              name=\"freetime\"\r\n              placeholder=\"Ví dụ: 1-2 giờ mỗi ngày, 5 ngày một tuần\"\r\n              value={formData.freetime}\r\n              onChange={handleInputChange}\r\n              required\r\n              className=\"text-base\"\r\n            />\r\n          </div>\r\n\r\n          {/* Schedule Field */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"schedule\" className=\"text-base font-medium\">\r\n              📅 Lịch trình học tập\r\n            </Label>\r\n            <Input\r\n              id=\"schedule\"\r\n              name=\"schedule\"\r\n              placeholder=\"Ví dụ: Sáng 8-9 giờ và chiều 5-6 giờ\"\r\n              value={formData.schedule}\r\n              onChange={handleInputChange}\r\n              required\r\n              className=\"text-base\"\r\n            />\r\n          </div>\r\n\r\n          {/* Hope/Expectations Field */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"hope\" className=\"text-base font-medium\">\r\n              💭 Kỳ vọng & Mong muốn\r\n            </Label>\r\n            <Textarea\r\n              id=\"hope\"\r\n              name=\"hope\"\r\n              placeholder=\"Ví dụ: Muốn giao tiếp cơ bản, học từ vựng y tế, tăng tốc độ học nhanh...\"\r\n              value={formData.hope}\r\n              onChange={handleInputChange}\r\n              required\r\n              className=\"text-base resize-none\"\r\n              rows={4}\r\n            />\r\n          </div>\r\n\r\n          {/* Submit Buttons */}\r\n          <div className=\"flex gap-3 pt-4\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={onClose}\r\n              className=\"flex-1 text-base bg-transparent\"\r\n              disabled={isLoading}\r\n            >\r\n              Hủy\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              className=\"flex-1 bg-[#F66868] hover:bg-[#e25757] text-white text-base\"\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading ? \"Đang tạo...\" : \"Tạo giáo trình\"}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAIA;AACA;AACA;AAOA;AACA;AACA;;;AAfA;;;;;;;AA+Be,SAAS,gBAAgB,KAKjB;QALiB,EACtC,MAAM,EACN,OAAO,EACP,QAAQ,EACR,YAAY,KAAK,EACI,GALiB;;IAMtC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yMAAQ,EAAqB;QAC3D,QAAQ;QACR,UAAU;QACV,UAAU;QACV,MAAM;IACR;IAEA,MAAM,oBAAoB,CACxB;QAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY,CAAC,OAAS,CAAC;gBACrB,GAAG,IAAI;gBACP,CAAC,KAAK,EAAE;YACV,CAAC;IACH;IAEA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,SAAS;QACT,YAAY;YACV,QAAQ;YACR,UAAU;YACV,UAAU;YACV,MAAM;QACR;IACF;IAEA,qBACE,6NAAC,+KAAM;QAAC,MAAM;QAAQ,cAAc;kBAClC,cAAA,6NAAC,sLAAa;YAAC,WAAU;;8BACvB,6NAAC,qLAAY;;sCACX,6NAAC,oLAAW;4BAAC,WAAU;sCAAwC;;;;;;sCAG/D,6NAAC,0LAAiB;4BAAC,WAAU;sCAAY;;;;;;;;;;;;8BAM3C,6NAAC;oBAAK,UAAU;oBAAc,WAAU;;sCAEtC,6NAAC;4BAAI,WAAU;;8CACb,6NAAC,6KAAK;oCAAC,SAAQ;oCAAS,WAAU;8CAAwB;;;;;;8CAG1D,6NAAC,6KAAK;oCACJ,IAAG;oCACH,MAAK;oCACL,aAAY;oCACZ,OAAO,SAAS,MAAM;oCACtB,UAAU;oCACV,QAAQ;oCACR,WAAU;;;;;;;;;;;;sCAKd,6NAAC;4BAAI,WAAU;;8CACb,6NAAC,6KAAK;oCAAC,SAAQ;oCAAW,WAAU;8CAAwB;;;;;;8CAG5D,6NAAC,6KAAK;oCACJ,IAAG;oCACH,MAAK;oCACL,aAAY;oCACZ,OAAO,SAAS,QAAQ;oCACxB,UAAU;oCACV,QAAQ;oCACR,WAAU;;;;;;;;;;;;sCAKd,6NAAC;4BAAI,WAAU;;8CACb,6NAAC,6KAAK;oCAAC,SAAQ;oCAAW,WAAU;8CAAwB;;;;;;8CAG5D,6NAAC,6KAAK;oCACJ,IAAG;oCACH,MAAK;oCACL,aAAY;oCACZ,OAAO,SAAS,QAAQ;oCACxB,UAAU;oCACV,QAAQ;oCACR,WAAU;;;;;;;;;;;;sCAKd,6NAAC;4BAAI,WAAU;;8CACb,6NAAC,6KAAK;oCAAC,SAAQ;oCAAO,WAAU;8CAAwB;;;;;;8CAGxD,6NAAC,mLAAQ;oCACP,IAAG;oCACH,MAAK;oCACL,aAAY;oCACZ,OAAO,SAAS,IAAI;oCACpB,UAAU;oCACV,QAAQ;oCACR,WAAU;oCACV,MAAM;;;;;;;;;;;;sCAKV,6NAAC;4BAAI,WAAU;;8CACb,6NAAC,+KAAM;oCACL,MAAK;oCACL,SAAQ;oCACR,SAAS;oCACT,WAAU;oCACV,UAAU;8CACX;;;;;;8CAGD,6NAAC,+KAAM;oCACL,MAAK;oCACL,WAAU;oCACV,UAAU;8CAET,YAAY,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO3C;GAxIwB;KAAA","debugId":null}},
    {"offset": {"line": 6052, "column": 0}, "map": {"version":3,"sources":["file:///C:/KhanhAn/Project_Sudo/wave-wave/src/app/study/learn/syllabus/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport RequireLogin from \"@/components/RequireLogin\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { User, useUserStore } from \"@/store/useUserStore\";\r\nimport { BookOpen, Hand, Zap } from \"lucide-react\";\r\nimport { useEffect, useState, use } from \"react\";\r\nimport PracticeTab from \"../../components/practice-tab\";\r\nimport LessonTab from \"../../components/lesson-tab\";\r\nimport { removeBrackets } from \"@/lib/utils\";\r\nimport { SyllabusInfo } from \"../../../map/page\";\r\nimport CurriculumModal from \"@/components/curriculum-modal\";\r\n\r\n// --- 1. CHANGE COMPONENT SIGNATURE ---\r\n// Accept 'params' which contains the { id: \"2\" } from the URL\r\nexport default function StudyPage({\r\n  params,\r\n}: {\r\n  params: Promise<{ id: string }>; // 1. Update the type to be a Promise\r\n}) {\r\n  // --- 2. GET THE ID FROM PARAMS ---\r\n  const resolvedParams = use(params); // 2. Unwrap the promise\r\n  const urlSyllabusId = resolvedParams.id; // 3. Access the id\r\n  const { user, setUser } = useUserStore();\r\n  const [activeTab, setActiveTab] = useState(\"lessons\");\r\n  const [syllabuses, setSyllabuses] = useState<SyllabusInfo[]>([]);\r\n  const [selectedSyllabusId, setSelectedSyllabusId] = useState<string | null>(\r\n    urlSyllabusId\r\n  );\r\n  const [isLoadingSyllabus, setIsLoadingSyllabus] = useState(true);\r\n  const [isModalOpen, setIsModalOpen] = useState(false); // Added modal state\r\n  const [isSubmitting, setIsSubmitting] = useState(false); // Added submission state\r\n  // This effect sets the user\r\n  useEffect(() => {\r\n    setSelectedSyllabusId(urlSyllabusId);\r\n  }, [urlSyllabusId]);\r\n\r\n  // This effect fetches data and sets the selected ID\r\n  useEffect(() => {\r\n    if (!user?.id) return;\r\n\r\n    const fetchSyllabuses = async () => {\r\n      try {\r\n        setIsLoadingSyllabus(true);\r\n        const response = await fetch(\r\n          `${process.env.NEXT_PUBLIC_SERVER_URL}/api/syllabuses?user_id=${user.id}`\r\n        );\r\n        if (!response.ok) {\r\n          throw new Error(\"Failed to fetch syllabuses\");\r\n        }\r\n\r\n        const data: { syllabuses: SyllabusInfo[] } = await response.json();\r\n        const sortedSyllabuses = data.syllabuses.sort((a, b) => a.id - b.id);\r\n\r\n        // --- 3. FIX: SET ALL SYLLABUSES FOR THE DROPDOWN ---\r\n        // Do not filter the list, just set the full sorted list\r\n        setSyllabuses(sortedSyllabuses);\r\n\r\n        // --- 4. NEW SELECTION LOGIC (PRIORITIZED) ---\r\n\r\n        // Check if the ID from the URL is valid\r\n        const isValidUrlId = sortedSyllabuses.some(\r\n          (s) => s.id.toString() === urlSyllabusId\r\n        );\r\n\r\n        if (isValidUrlId) {\r\n          // Priority 1: Set ID from URL\r\n          setSelectedSyllabusId(urlSyllabusId);\r\n        } else {\r\n          // Priority 2: Find \"in-progress\"\r\n          const inProgressSyllabus = sortedSyllabuses.find(\r\n            (s) => s.status === \"in-progress\"\r\n          );\r\n          if (inProgressSyllabus) {\r\n            setSelectedSyllabusId(inProgressSyllabus.id.toString());\r\n          } else if (sortedSyllabuses.length > 0) {\r\n            // Priority 3: Default to the first syllabus\r\n            setSelectedSyllabusId(sortedSyllabuses[0].id.toString());\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching syllabuses:\", error);\r\n      } finally {\r\n        setIsLoadingSyllabus(false);\r\n      }\r\n    };\r\n\r\n    fetchSyllabuses();\r\n\r\n    // --- 5. ADD 'urlSyllabusId' TO DEPENDENCY ARRAY ---\r\n    // This ensures the component reacts if the URL ID changes\r\n  }, [user, urlSyllabusId]);\r\n  const handleCurriculumSubmit = async (formData: {\r\n    target: string;\r\n    freetime: string;\r\n    schedule: string;\r\n    hope: string;\r\n  }) => {\r\n    setIsSubmitting(true);\r\n    try {\r\n      const aiQuery = `Based on the following requirements, create a personalized curriculum:\r\n- Target: ${formData.target}\r\n- Available Free Time: ${formData.freetime}\r\n- Preferred Schedule: ${formData.schedule}\r\n- Expectations: ${formData.hope}\r\n\r\nPlease suggest a structured learning path with specific lessons and milestones.`;\r\n\r\n      console.log(\"Sending to AI:\", aiQuery);\r\n\r\n      // TODO: Send this to your AI API\r\n      // const response = await fetch('/api/generate-curriculum', {\r\n      //   method: 'POST',\r\n      //   headers: { 'Content-Type': 'application/json' },\r\n      //   body: JSON.stringify({ query: aiQuery }),\r\n      // });\r\n\r\n      setIsModalOpen(false);\r\n      alert(\"Giáo trình cá nhân hoá đang được tạo...\");\r\n    } catch (err) {\r\n      console.error(\"Error submitting curriculum form:\", err);\r\n      alert(\"Có lỗi xảy ra. Vui lòng thử lại.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n  if (!user) {\r\n    return (\r\n      <div className=\"flex flex-col justify-center items-center w-full h-screen\">\r\n        <RequireLogin />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-background to-secondary/20\">\r\n      {/* Header */}\r\n      <header className=\"sticky top-0 z-50 border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\r\n        <div className=\"container mx-auto px-4 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"flex h-10 w-10 items-center justify-center rounded-lg bg-[#f66868] text-primary-foreground\">\r\n                <Hand className=\"h-6 w-6\" />\r\n              </div>\r\n              <h1 className=\"text-2xl text-[#f66868] font-bold\">Học Kí Hiệu</h1>\r\n            </div>\r\n            <Tabs\r\n              value={activeTab}\r\n              onValueChange={setActiveTab}\r\n              className=\"w-fit text-3xl\"\r\n            >\r\n              <TabsList className=\"grid w-fit grid-cols-2 lg:inline-grid gap-4 mx-auto p-1.5 rounded-full shadow-inner h-fit bg-rose-50/70 border-2 border-rose-200/60\">\r\n                <TabsTrigger\r\n                  value=\"lessons\"\r\n                  className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-rose-600 rounded-full transition-all duration-300 hover:bg-[#F66868]/10 data-[state=active]:bg-[#F66868] data-[state=active]:text-white data-[state=active]:shadow-[0_0_8px_#F66868] cursor-pointer\"\r\n                >\r\n                  <BookOpen className=\"h-4 w-4\" />\r\n                  <span className=\"hidden sm:inline \">Bài Học</span>\r\n                </TabsTrigger>\r\n\r\n                <TabsTrigger\r\n                  value=\"practice\"\r\n                  className=\"flex items-center gap-2 px-4 py-2 text-sm font-medium text-rose-600 rounded-full transition-all duration-300 hover:bg-[#F66868]/10 data-[state=active]:bg-[#F66868] data-[state=active]:text-white data-[state=active]:shadow-[0_0_8px_#F66868] cursor-pointer\"\r\n                >\r\n                  <Zap className=\"h-4 w-4\" />\r\n                  <span className=\"hidden sm:inline\">Luyện Tập</span>\r\n                </TabsTrigger>\r\n              </TabsList>\r\n            </Tabs>\r\n            {/* --- SYLLABUS PICKING UI --- */}\r\n            <div>\r\n              {isLoadingSyllabus ? (\r\n                <div className=\"h-10 w-[280px] animate-pulse rounded-full bg-gray-200\" />\r\n              ) : (\r\n                <Select\r\n                  value={selectedSyllabusId || \"\"}\r\n                  onValueChange={setSelectedSyllabusId}\r\n                >\r\n                  <SelectTrigger\r\n                    className=\"w-[280px] gap-2 rounded-full border-2 \r\n                                       border-rose-200/60 bg-rose-50/70 text-rose-600 shadow-inner \r\n                                       hover:bg-rose-100 focus:ring-rose-500\"\r\n                  >\r\n                    <SelectValue placeholder=\"Chọn chủ đề\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {syllabuses.map((syllabus) => (\r\n                      <SelectItem\r\n                        key={syllabus.id}\r\n                        value={syllabus.id.toString()}\r\n                        disabled={syllabus.status === \"locked\"}\r\n                        className={`${syllabus.id} >= 12 ? 'bg-yellow-50/70 text-yellow-600' : ''}`}\r\n                      >\r\n                        {removeBrackets(syllabus.title)}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"container mx-auto px-4 py-8\">\r\n        <Tabs\r\n          value={activeTab}\r\n          onValueChange={setActiveTab}\r\n          className=\"w-full text-3xl\"\r\n        >\r\n          <TabsContent value=\"lessons\" className=\"space-y-6\">\r\n            <LessonTab\r\n              syllabus={syllabuses.find(\r\n                (syllabus) => syllabus.id === Number(selectedSyllabusId)\r\n              )}\r\n            />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"practice\" className=\"space-y-6\">\r\n            <PracticeTab syllabusId={selectedSyllabusId} />\r\n          </TabsContent>\r\n        </Tabs>\r\n      </main>\r\n      <CurriculumModal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        onSubmit={handleCurriculumSubmit}\r\n        isLoading={isSubmitting}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}